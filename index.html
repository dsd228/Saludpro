```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>SaludPro · Sistema Integral de Gestión Clínica</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Google+Sans+Text:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Google Design System Colors */
            --grey-0: #fff;
            --grey-50: #f8f9fa;
            --grey-100: #f1f3f4;
            --grey-200: #e8eaed;
            --grey-300: #dadce0;
            --grey-400: #bdc1c6;
            --grey-500: #9aa0a6;
            --grey-600: #80868b;
            --grey-700: #5f6368;
            --grey-800: #3c4043;
            --grey-900: #202124;
            --grey-1000: #060606;
            --blue-50: #e8f0fe;
            --blue-100: #d2e3fc;
            --blue-200: #aecbfa;
            --blue-300: #8ab4f8;
            --blue-400: #669df6;
            --blue-500: #4285f4;
            --blue-600: #1a73e8;
            --blue-700: #1967d2;
            --blue-800: #185abc;
            --blue-900: #174ea6;
            --red-50: #fce8e6;
            --red-100: #fad2cf;
            --red-200: #f6aea9;
            --red-300: #f28b82;
            --red-400: #ee675c;
            --red-500: #ea4335;
            --red-600: #d93025;
            --red-700: #c5221f;
            --red-800: #b31412;
            --red-900: #a50e0e;
            --yellow-50: #fef7e0;
            --yellow-100: #feefc3;
            --yellow-200: #fde293;
            --yellow-300: #fdd663;
            --yellow-400: #fcc934;
            --yellow-500: #fbbc04;
            --yellow-600: #f9ab00;
            --yellow-700: #f29900;
            --yellow-800: #ea8600;
            --yellow-900: #e37400;
            --green-50: #e6f4ea;
            --green-100: #ceead6;
            --green-200: #a8dab5;
            --green-300: #81c995;
            --green-400: #58b776;
            --green-500: #34a853;
            --green-600: #2d8943;
            --green-700: #266d35;
            --green-800: #1f5128;
            --green-900: #18351b;
            
            /* Tema clínico profesional */
            --clinico-primary: #1a73e8;
            --clinico-primary-light: #e8f0fe;
            --clinico-secondary: #34a853;
            --clinico-warning: #f9ab00;
            --clinico-danger: #ea4335;
            --clinico-info: #4285f4;
            --clinico-bg: #f8f9fa;
            --clinico-surface: #ffffff;
            --clinico-text: #202124;
            --clinico-text-secondary: #5f6368;
            --clinico-border: #dadce0;
            
            /* Theme-specific variables */
            --background: var(--clinico-bg);
            --surface: var(--clinico-surface);
            --surface-container: var(--grey-50);
            --surface-container-bright: var(--grey-50);
            --surface-media: var(--grey-100);
            --on-surface: var(--clinico-text);
            --on-surface-variant: var(--clinico-text-secondary);
            --outline: var(--clinico-border);
            
            /* Typography */
            --font: 'Google Sans', system-ui, -apple-system, sans-serif;
            --font-text: 'Google Sans Text', system-ui, -apple-system, sans-serif;
            
            /* Spacing */
            --spacer-xs: 0.25rem;
            --spacer-sm: 0.5rem;
            --spacer-md: 1rem;
            --spacer-lg: 1.5rem;
            --spacer-xl: 2rem;
            --spacer-2xl: 3rem;
            
            /* Shapes */
            --shapes-corner-sm: 4px;
            --shapes-corner-md: 8px;
            --shapes-corner-lg: 12px;
            --shapes-corner-xl: 16px;
            --shapes-corner-xxl: 24px;
            
            /* Elevation */
            --elevation-1: 0 1px 3px 0 rgba(60, 64, 67, 0.1), 0 1px 2px 0 rgba(60, 64, 67, 0.1);
            --elevation-2: 0 1px 5px 0 rgba(60, 64, 67, 0.1), 0 2px 2px 0 rgba(60, 64, 67, 0.06), 0 1px 1px 0 rgba(60, 64, 67, 0.08);
            --elevation-3: 0 2px 8px 0 rgba(60, 64, 67, 0.1), 0 4px 4px 0 rgba(60, 64, 67, 0.06), 0 1px 1px 0 rgba(60, 64, 67, 0.08);
            --elevation-4: 0 2px 12px 0 rgba(60, 64, 67, 0.2), 0 3px 8px 0 rgba(60, 64, 67, 0.12), 0 5px 6px 0 rgba(60, 64, 67, 0.14);
            --elevation-6: 0 3px 14px 0 rgba(60, 64, 67, 0.2), 0 8px 10px 1px rgba(60, 64, 67, 0.12), 0 5px 6px 0 rgba(60, 64, 67, 0.14);
            
            /* Transitions */
            --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --hover-scale: 1.02;
        }
        
        body {
            background: var(--background);
            color: var(--on-surface);
            font-family: var(--font-text);
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            margin: 0;
            min-height: 100vh;
            letter-spacing: 0.1px;
        }
        
        .app {
            max-width: 1440px;
            margin: 0 auto;
            padding: var(--spacer-md);
        }
        
        header {
            background: var(--surface);
            box-shadow: var(--elevation-2);
            border-radius: var(--shapes-corner-xxl);
            margin: var(--spacer-2xl) 0 var(--spacer-xl) 0;
            padding: var(--spacer-xl) var(--spacer-2xl);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }
        
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(26, 115, 232, 0.05) 0%, transparent 70%);
            transform: rotate(30deg);
            pointer-events: none;
        }
        
        header:hover {
            box-shadow: var(--elevation-3);
            transform: translateY(-1px);
        }
        
        .logo {
            font-family: var(--font);
            font-weight: 700;
            font-size: 2.6rem;
            color: var(--on-surface);
            display: flex;
            align-items: center;
            gap: var(--spacer-md);
            position: relative;
            z-index: 2;
            transition: var(--transition);
        }
        
        .logo:hover {
            transform: scale(var(--hover-scale));
            color: var(--clinico-primary);
        }
        
        .subtitle {
            color: var(--on-surface-variant);
            font-weight: 400;
            font-size: 1.2rem;
            text-align: right;
            font-family: var(--font-text);
        }
        
        .user-profile {
            display: none;
            align-items: center;
            gap: var(--spacer-sm);
            background: var(--surface-container);
            padding: var(--spacer-sm) var(--spacer-md);
            border-radius: var(--shapes-corner-lg);
            border: 1px solid var(--outline);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .user-profile.active {
            display: flex;
        }
        
        .user-profile:hover {
            background: var(--blue-50);
            transform: translateY(-1px);
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--clinico-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        nav {
            display: flex;
            gap: var(--spacer-md);
            margin: 0 0 var(--spacer-xl) 0;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            background: var(--surface);
            padding: var(--spacer-lg);
            border-radius: var(--shapes-corner-xl);
            box-shadow: var(--elevation-1);
        }
        
        nav button {
            font-family: var(--font);
            font-weight: 500;
            padding: var(--spacer-md) var(--spacer-lg);
            border-radius: var(--shapes-corner-lg);
            border: none;
            background: var(--surface-container);
            color: var(--on-surface);
            cursor: pointer;
            box-shadow: none;
            display: flex;
            align-items: center;
            gap: var(--spacer-xs);
            font-size: 1.05rem;
            transition: var(--transition);
            border: 1px solid transparent;
        }
        
        nav button:hover {
            background: var(--blue-50);
            color: var(--clinico-primary);
            border-color: var(--blue-300);
            transform: translateY(-1px);
        }
        
        nav button.active {
            background: var(--clinico-primary);
            color: white;
            border-color: var(--blue-600);
            box-shadow: var(--elevation-2);
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .glass-home {
            background: linear-gradient(135deg, rgba(26, 115, 232, 0.1) 0%, rgba(52, 168, 83, 0.1) 50%, rgba(251, 171, 0, 0.1) 100%);
            border-radius: var(--shapes-corner-xxl);
            padding: var(--spacer-2xl);
            margin-bottom: var(--spacer-xl);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(26, 115, 232, 0.2);
            box-shadow: var(--elevation-2);
        }
        
        .glass-title {
            font-family: var(--font);
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--clinico-text);
            margin-bottom: var(--spacer-sm);
        }
        
        .glass-subtitle {
            color: var(--clinico-text-secondary);
            font-size: 1.2rem;
            margin-bottom: var(--spacer-lg);
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacer-lg);
            margin-top: var(--spacer-xl);
        }
        
        .dashboard-card {
            background: var(--surface);
            border-radius: var(--shapes-corner-lg);
            padding: var(--spacer-lg);
            box-shadow: var(--elevation-1);
            border: 1px solid var(--outline);
            transition: var(--transition);
        }
        
        .dashboard-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--elevation-2);
        }
        
        .dashboard-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacer-md);
        }
        
        .dashboard-card-title {
            font-family: var(--font);
            font-weight: 500;
            color: var(--clinico-primary);
            margin: 0;
        }
        
        .dashboard-card-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--blue-50);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--clinico-primary);
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--clinico-text);
        }
        
        .metric-label {
            color: var(--clinico-text-secondary);
            font-size: 0.9rem;
            margin-top: var(--spacer-xs);
        }
        
        .patient-selector {
            display: flex;
            gap: var(--spacer-sm);
            margin-bottom: var(--spacer-xl);
            flex-wrap: wrap;
        }
        
        .patient-pill {
            padding: var(--spacer-sm) var(--spacer-md);
            background: var(--surface-container);
            border: 1px solid var(--outline);
            border-radius: var(--shapes-corner-lg);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        .patient-pill.active {
            background: var(--clinico-primary);
            color: white;
            border-color: var(--clinico-primary);
        }
        
        .patient-pill:hover:not(.active) {
            background: var(--blue-50);
            border-color: var(--blue-300);
        }
        
        .alert-banner {
            background: var(--yellow-50);
            border-left: 4px solid var(--yellow-700);
            padding: var(--spacer-md) var(--spacer-lg);
            border-radius: var(--shapes-corner-md);
            margin: var(--spacer-lg) 0;
            display: flex;
            align-items: center;
            gap: var(--spacer-md);
        }
        
        .alert-banner.warning {
            background: var(--red-50);
            border-left-color: var(--red-600);
        }
        
        .vih-info {
            background: var(--blue-50);
            border-left: 4px solid var(--blue-600);
            border: 1px solid var(--blue-300);
            padding: var(--spacer-md) var(--spacer-lg);
            border-radius: var(--shapes-corner-md);
            margin: var(--spacer-lg) 0;
        }
        
        .vih-interactions {
            margin-top: var(--spacer-lg);
        }
        
        .vih-interactions h4 {
            color: var(--clinico-primary);
            font-family: var(--font);
            font-weight: 600;
            margin: var(--spacer-md) 0 var(--spacer-sm) 0;
        }
        
        .vih-interactions ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .vih-interactions li {
            margin: 8px 0;
            padding-left: 6px;
        }
        
        .fatal {
            color: var(--red-700);
        }
        
        .moderate {
            color: var(--yellow-700);
        }
        
        .leve {
            color: var(--green-700);
        }
        
        .level-badge {
            position: absolute;
            top: var(--spacer-md);
            right: var(--spacer-md);
            width: 26px;
            height: 26px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            color: white;
        }
        
        .fatal .level-badge {
            background: var(--red-600);
        }
        
        .moderate .level-badge {
            background: var(--yellow-700);
        }
        
        .leve .level-badge {
            background: var(--green-600);
        }
        
        .modal-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(4px);
            transition: opacity 0.3s;
        }
        
        .modal-backdrop.active {
            display: block;
            opacity: 1;
        }
        
        .panel {
            display: none;
            flex-direction: column;
            background: var(--surface);
            box-shadow: var(--elevation-4);
            border-radius: var(--shapes-corner-xl);
            padding: var(--spacer-2xl);
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1001;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--outline);
        }
        
        .panel.active {
            display: flex;
            animation: panelFadeIn 0.3s ease-out;
        }
        
        @keyframes panelFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -48%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }
        
        .panel h2 {
            display: flex;
            align-items: center;
            gap: var(--spacer-md);
            color: var(--clinico-primary);
            font-family: var(--font);
            font-size: 1.8rem;
            margin: 0 0 var(--spacer-xl) 0;
        }
        
        .close-btn {
            position: absolute;
            top: var(--spacer-lg);
            right: var(--spacer-lg);
            background: var(--surface-container);
            border: 1px solid var(--outline);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--on-surface);
            transition: var(--transition);
            box-shadow: var(--elevation-1);
            z-index: 1002;
        }
        
        .close-btn:hover {
            background: var(--red-50);
            color: var(--red-600);
            border-color: var(--red-300);
            transform: rotate(90deg);
            box-shadow: 0 2px 8px rgba(234, 67, 53, 0.2);
        }
        
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacer-lg) 0;
        }
        
        .info-table th,
        .info-table td {
            padding: var(--spacer-md);
            text-align: left;
            border-bottom: 1px solid var(--outline);
        }
        
        .info-table th {
            background: var(--surface-container);
            font-family: var(--font);
            font-weight: 500;
            color: var(--clinico-text);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacer-lg);
            margin-bottom: var(--spacer-lg);
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacer-xs);
        }
        
        .form-group label {
            font-family: var(--font);
            font-weight: 500;
            color: var(--clinico-text);
            font-size: 0.95rem;
        }
        
        input,
        select,
        textarea {
            padding: var(--spacer-md);
            border: 1px solid var(--outline);
            border-radius: var(--shapes-corner-md);
            font-family: var(--font-text);
            font-size: 1rem;
            background: var(--surface);
            color: var(--clinico-text);
            transition: var(--transition);
            box-shadow: none;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--clinico-primary);
            box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
        }
        
        .btn-primary {
            background: var(--clinico-primary);
            color: white;
            border: none;
            padding: var(--spacer-md) var(--spacer-lg);
            border-radius: var(--shapes-corner-lg);
            font-family: var(--font);
            font-weight: 500;
            font-size: 1.05rem;
            cursor: pointer;
            box-shadow: var(--elevation-1);
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: var(--spacer-xs);
        }
        
        .btn-primary:hover {
            background: var(--blue-700);
            box-shadow: var(--elevation-2);
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: var(--surface-container);
            color: var(--clinico-text);
            border: 1px solid var(--outline);
            padding: var(--spacer-md) var(--spacer-lg);
            border-radius: var(--shapes-corner-lg);
            font-family: var(--font);
            font-weight: 500;
            font-size: 1.05rem;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: var(--spacer-xs);
        }
        
        .btn-secondary:hover {
            background: var(--blue-50);
            border-color: var(--blue-300);
            transform: translateY(-1px);
        }
        
        .calculator-result {
            background: var(--surface-container);
            border: 1px solid var(--outline);
            border-radius: var(--shapes-corner-lg);
            padding: var(--spacer-lg);
            margin-top: var(--spacer-lg);
            display: none;
        }
        
        .result-title {
            font-family: var(--font);
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0 0 var(--spacer-sm) 0;
            color: var(--clinico-text);
        }
        
        .tabs {
            display: flex;
            gap: var(--spacer-sm);
            margin-bottom: var(--spacer-xl);
            border-bottom: 1px solid var(--outline);
        }
        
        .tab {
            padding: var(--spacer-md) var(--spacer-lg);
            background: transparent;
            border: none;
            font-family: var(--font);
            font-weight: 500;
            color: var(--clinico-text-secondary);
            cursor: pointer;
            border-radius: var(--shapes-corner-md) var(--shapes-corner-md) 0 0;
            transition: var(--transition);
        }
        
        .tab:hover {
            background: var(--surface-container);
            color: var(--clinico-text);
        }
        
        .tab.active {
            background: var(--surface);
            color: var(--clinico-primary);
            border: 1px solid var(--outline);
            border-bottom-color: var(--surface);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .medication-card {
            background: var(--surface);
            border: 1px solid var(--outline);
            border-radius: var(--shapes-corner-lg);
            padding: var(--spacer-lg);
            margin-bottom: var(--spacer-md);
            transition: var(--transition);
            position: relative;
        }
        
        .medication-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--elevation-2);
        }
        
        .medication-card h4 {
            margin-top: 0;
            color: var(--clinico-primary);
        }
        
        .medication-card p {
            margin: var(--spacer-sm) 0;
            color: var(--clinico-text-secondary);
        }
        
        .medication-meta {
            display: flex;
            gap: var(--spacer-md);
            margin-top: var(--spacer-sm);
        }
        
        .medication-meta span {
            background: var(--blue-50);
            padding: var(--spacer-xs) var(--spacer-sm);
            border-radius: var(--shapes-corner-sm);
            font-size: 0.9rem;
            color: var(--blue-700);
        }
        
        .timeline {
            position: relative;
            margin: var(--spacer-xl) 0;
            padding-left: var(--spacer-lg);
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 2px;
            background: var(--outline);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: var(--spacer-lg);
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--clinico-primary);
        }
        
        .timeline-date {
            font-size: 0.9rem;
            color: var(--clinico-text-secondary);
            margin-bottom: var(--spacer-xs);
        }
        
        .timeline-content {
            background: var(--surface-container);
            padding: var(--spacer-md);
            border-radius: var(--shapes-corner-md);
            border: 1px solid var(--outline);
        }
        
        .search-box {
            margin-bottom: var(--spacer-xl);
            position: relative;
        }
        
        .search-box input {
            padding-left: 48px;
            width: 100%;
            font-size: 1.1rem;
        }
        
        .search-box::before {
            content: 'search';
            font-family: 'Material Symbols Outlined';
            position: absolute;
            left: var(--spacer-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--clinico-text-secondary);
            font-size: 1.2rem;
        }
        
        .interaction-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacer-lg);
        }
        
        .interaction-category {
            background: var(--surface-container);
            border-radius: var(--shapes-corner-lg);
            padding: var(--spacer-lg);
            border: 1px solid var(--outline);
        }
        
        .interaction-category h3 {
            margin-top: 0;
            color: var(--clinico-primary);
        }
        
        .interaction-item {
            padding: var(--spacer-md);
            border-bottom: 1px solid var(--outline);
        }
        
        .interaction-item:last-child {
            border-bottom: none;
        }
        
        .chart-container {
            height: 300px;
            margin: var(--spacer-lg) 0;
        }
        
        @media (max-width: 768px) {
            .app {
                padding: var(--spacer-sm);
            }
            
            header {
                flex-direction: column;
                padding: var(--spacer-lg) var(--spacer-md);
                gap: var(--spacer-md);
            }
            
            .logo {
                font-size: 2.2rem;
                padding: var(--spacer-md) var(--spacer-lg);
                justify-content: center;
            }
            
            .subtitle {
                text-align: center;
                font-size: 1.1rem;
            }
            
            nav {
                padding: var(--spacer-md);
                gap: var(--spacer-sm);
            }
            
            nav button {
                padding: var(--spacer-sm) var(--spacer-md);
                font-size: 0.95rem;
                min-width: auto;
            }
            
            .glass-home {
                padding: var(--spacer-xl) var(--spacer-lg);
            }
            
            .panel {
                width: 95%;
                padding: var(--spacer-xl) var(--spacer-lg);
            }
            
            .close-btn {
                top: var(--spacer-md);
                right: var(--spacer-md);
                width: 36px;
                height: 36px;
                font-size: 1.4rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .interaction-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            nav {
                flex-direction: column;
            }
            
            nav button {
                width: 100%;
                justify-content: center;
            }
            
            .patient-selector {
                flex-direction: column;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <header>
            <span class="logo"><span class="material-symbols-outlined">health_and_safety</span>SaludPro</span>
            <div class="subtitle">Sistema Integral de Gestión Clínica</div>
            <div class="user-profile" id="userProfile">
                <div class="avatar">DR</div>
                <div>
                    <div style="font-weight: 500; color: var(--clinico-text);" id="userName">Dr. Juan Pérez</div>
                    <div style="font-size: 0.9rem; color: var(--clinico-text-secondary);" id="userSpecialty">Cardiólogo</div>
                </div>
            </div>
        </header>
        
        <nav id="mainNav">
            <button class="active" id="btn-dashboard"><span class="material-symbols-outlined">dashboard</span>Dashboard</button>
            <button id="btn-pacientes"><span class="material-symbols-outlined">group</span>Pacientes</button>
            <button id="btn-signos"><span class="material-symbols-outlined">monitoring</span>Signos Vitales</button>
            <button id="btn-recetas"><span class="material-symbols-outlined">inventory</span>Recetas</button>
            <button id="btn-educacion"><span class="material-symbols-outlined">book_4</span>Educación</button>
            <button id="btn-calculadoras"><span class="material-symbols-outlined">calculate</span>Calculadoras</button>
            <button id="btn-login"><span class="material-symbols-outlined">login</span>Iniciar Sesión</button>
        </nav>
        
        <!-- Página de Inicio de Sesión -->
        <div class="page active" id="page-login">
            <div style="max-width: 400px; margin: 5rem auto; padding: var(--spacer-xl); background: var(--surface); border-radius: var(--shapes-corner-xl); box-shadow: var(--elevation-2);">
                <h2 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg); text-align: center;">Iniciar Sesión</h2>
                <div class="form-group">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" id="email" placeholder="su.correo@hospital.com">
                </div>
                <div class="form-group">
                    <label for="password">Contraseña</label>
                    <input type="password" id="password" placeholder="••••••••">
                </div>
                <button class="btn-primary" id="loginBtn" style="width: 100%; margin-top: var(--spacer-xl);"><span class="material-symbols-outlined">login</span>Iniciar Sesión</button>
                <p style="text-align: center; margin-top: var(--spacer-md); color: var(--on-surface-variant);">¿No tiene cuenta? <a href="#" style="color: var(--clinico-primary); text-decoration: none;" id="registerLink">Regístrese aquí</a></p>
            </div>
        </div>
        
        <!-- Dashboard Principal -->
        <div class="page" id="page-dashboard">
            <div class="glass-home">
                <h1 class="glass-title">Bienvenido de vuelta, <span id="welcomeName">Dr. Pérez</span></h1>
                <p class="glass-subtitle">Hoy tiene 3 consultas programadas y 2 pacientes con seguimiento pendiente. El paciente Juan Pérez requiere evaluación de su estado inmunológico por VIH.</p>
                <div style="display: flex; gap: var(--spacer-md); flex-wrap: wrap;">
                    <button class="btn-primary"><span class="material-symbols-outlined">add</span>Nueva Consulta</button>
                    <button class="btn-secondary"><span class="material-symbols-outlined">calendar_today</span>Agenda del Día</button>
                </div>
            </div>
            
            <div class="patient-selector">
                <div class="patient-pill active">Juan Pérez (45 años)</div>
                <div class="patient-pill">María González (38 años)</div>
                <div class="patient-pill">Carlos Mendoza (52 años)</div>
            </div>
            
            <div class="alert-banner">
                <span class="material-symbols-outlined" style="color: var(--yellow-700);">warning</span>
                <div>
                    <strong>Seguimiento pendiente:</strong> El paciente Juan Pérez necesita evaluación de su estado inmunológico por VIH. Último control hace 6 meses.
                </div>
            </div>
            
            <div class="vih-info">
                <h3 style="margin: 0;">Evaluación del Estado Inmunológico en VIH</h3>
                <p style="margin: 10px 0 0 0;">Utilice esta calculadora para evaluar el estado inmunológico del paciente y obtener recomendaciones clínicas.</p>
                <button class="btn-primary" style="margin-top: var(--spacer-md);" onclick="document.getElementById('panel-vih').classList.add('active'); document.querySelector('.modal-backdrop').classList.add('active');">
                    <span class="material-symbols-outlined">calculate</span>Evaluar Estado Inmunológico
                </button>
            </div>
            
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">CD4</h3>
                        <div class="dashboard-card-icon">
                            <span class="material-symbols-outlined">bloodtype</span>
                        </div>
                    </div>
                    <div class="metric-value">480</div>
                    <div class="metric-label">células/mm³ (Último: 15/03/2024)</div>
                </div>
                
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">Carga Viral</h3>
                        <div class="dashboard-card-icon">
                            <span class="material-symbols-outlined">trending_up</span>
                        </div>
                    </div>
                    <div class="metric-value">48</div>
                    <div class="metric-label">copias/mL (Último: 15/03/2024)</div>
                </div>
                
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">IMC</h3>
                        <div class="dashboard-card-icon">
                            <span class="material-symbols-outlined">scale</span>
                        </div>
                    </div>
                    <div class="metric-value">24.8</div>
                    <div class="metric-label">Peso normal (Último: 15/03/2024)</div>
                </div>
                
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">Presión Arterial</h3>
                        <div class="dashboard-card-icon">
                            <span class="material-symbols-outlined">monitor_heart</span>
                        </div>
                    </div>
                    <div class="metric-value">132/85</div>
                    <div class="metric-label">mmHg (Último: 15/03/2024)</div>
                </div>
            </div>
            
            <h2 style="color: var(--clinico-primary); margin: var(--spacer-2xl) 0 var(--spacer-lg) 0; font-family: var(--font);">Gráficos de Evolución</h2>
            
            <div class="form-row" style="margin-bottom: var(--spacer-lg);">
                <div class="form-group">
                    <label for="tipo-grafica">Tipo de Gráfica</label>
                    <select id="tipo-grafica">
                        <option value="presion">Presión Arterial</option>
                        <option value="fc">Frecuencia Cardíaca</option>
                        <option value="temp">Temperatura</option>
                        <option value="spo2">Saturación de O2</option>
                    </select>
                </div>
            </div>
            
            <div class="chart-container">
                <canvas id="vitalsChart"></canvas>
            </div>
        </div>
        
        <!-- Gestión de Pacientes -->
        <div class="page" id="page-pacientes">
            <div class="search-box">
                <input type="text" placeholder="Buscar pacientes..." id="searchPacientes">
            </div>
            
            <div class="patient-selector">
                <div class="patient-pill active">Todos</div>
                <div class="patient-pill">Cardiología</div>
                <div class="patient-pill">Endocrinología</div>
                <div class="patient-pill">Neurología</div>
            </div>
            
            <div class="dashboard-grid" id="pacientesGrid">
                <!-- Los pacientes se cargarán dinámicamente -->
            </div>
            
            <button class="btn-primary" style="margin-top: var(--spacer-xl);" id="btnNuevoPaciente">
                <span class="material-symbols-outlined">add</span>Agregar Nuevo Paciente
            </button>
        </div>
        
        <!-- Signos Vitales -->
        <div class="page" id="page-signos">
            <div class="patient-selector" id="selectorSignos">
                <div class="patient-pill active">Juan Pérez (45 años)</div>
                <div class="patient-pill">María González (38 años)</div>
                <div class="patient-pill">Carlos Mendoza (52 años)</div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="fecha-signos">Fecha y Hora</label>
                    <input type="datetime-local" id="fecha-signos">
                </div>
                <div class="form-group">
                    <label for="temperatura">Temperatura (°C)</label>
                    <input type="number" id="temperatura" step="0.1" placeholder="Ej: 36.5">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="sistolica">Presión Arterial (Sistólica)</label>
                    <input type="number" id="sistolica" placeholder="Ej: 132">
                </div>
                <div class="form-group">
                    <label for="diastolica">Presión Arterial (Diastólica)</label>
                    <input type="number" id="diastolica" placeholder="Ej: 85">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="fc">Frecuencia Cardíaca (lpm)</label>
                    <input type="number" id="fc" placeholder="Ej: 78">
                </div>
                <div class="form-group">
                    <label for="fr">Frecuencia Respiratoria (rpm)</label>
                    <input type="number" id="fr" placeholder="Ej: 16">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="spo2">Saturación de O2 (%)</label>
                    <input type="number" id="spo2" placeholder="Ej: 98">
                </div>
                <div class="form-group">
                    <label for="peso">Peso (kg)</label>
                    <input type="number" id="peso" step="0.1" placeholder="Ej: 70">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="talla">Talla (cm)</label>
                    <input type="number" id="talla" placeholder="Ej: 170">
                </div>
                <div class="form-group">
                    <label for="imc">IMC</label>
                    <input type="number" id="imc" step="0.1" placeholder="Se calculará automáticamente" readonly>
                </div>
            </div>
            
            <div class="form-group">
                <label for="notas-signos">Notas Adicionales</label>
                <textarea id="notas-signos" rows="4" placeholder="Observaciones adicionales..."></textarea>
            </div>
            
            <button class="btn-primary" style="margin-top: var(--spacer-xl);" id="guardarSignos">
                <span class="material-symbols-outlined">save</span>Guardar Signos Vitales
            </button>
            
            <div class="dashboard-card" style="margin-top: var(--spacer-xl);">
                <div class="dashboard-card-header">
                    <h3 class="dashboard-card-title">Registro Histórico</h3>
                    <div class="dashboard-card-icon">
                        <span class="material-symbols-outlined">history</span>
                    </div>
                </div>
                <div class="timeline" id="timelineSignos">
                    <!-- Los registros se cargarán dinámicamente -->
                </div>
            </div>
        </div>
        
        <!-- Recetas -->
        <div class="page" id="page-recetas">
            <div class="patient-selector" id="selectorRecetas">
                <div class="patient-pill active">Juan Pérez (45 años)</div>
                <div class="patient-pill">María González (38 años)</div>
                <div class="patient-pill">Carlos Mendoza (52 años)</div>
            </div>
            
            <div class="form-group">
                <label for="medicamento">Medicamento</label>
                <input type="text" id="medicamento" placeholder="Nombre del medicamento" list="medicamentosList">
                <datalist id="medicamentosList">
                    <option value="Losartan">
                    <option value="Metformina">
                    <option value="Aspirina">
                    <option value="Paracetamol">
                    <option value="Omeprazol">
                </datalist>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="dosis">Dosis</label>
                    <input type="text" id="dosis" placeholder="Ej: 500 mg">
                </div>
                <div class="form-group">
                    <label for="via">Vía de Administración</label>
                    <select id="via">
                        <option value="oral">Oral</option>
                        <option value="intravenosa">Intravenosa</option>
                        <option value="intramuscular">Intramascular</option>
                        <option value="subcutanea">Subcutánea</option>
                        <option value="topica">Tópica</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="frecuencia">Frecuencia</label>
                    <select id="frecuencia">
                        <option value="una_vez">Una vez al día</option>
                        <option value="dos_veces">Dos veces al día</option>
                        <option value="tres_veces">Tres veces al día</option>
                        <option value="cuatro_veces">Cuatro veces al día</option>
                        <option value="cada_6_horas">Cada 6 horas</option>
                        <option value="cada_8_horas">Cada 8 horas</option>
                        <option value="cada_12_horas">Cada 12 horas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="duracion">Duración (días)</label>
                    <input type="number" id="duracion" placeholder="Ej: 7">
                </div>
            </div>
            
            <div class="form-group">
                <label for="indicaciones">Indicaciones Específicas</label>
                    <textarea id="indicaciones" rows="3" placeholder="Ej: Tomar con las comidas, evitar alcohol..."></textarea>
            </div>
            
            <div id="receta-lista" style="margin-top: var(--spacer-xl);">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-md);">Receta Actual</h3>
                <div id="listaMedicamentos">
                    <!-- Los medicamentos se cargarán dinámicamente -->
                </div>
            </div>
            
            <div style="display: flex; gap: var(--spacer-md); margin-top: var(--spacer-xl);">
                <button class="btn-primary" id="agregarMedicamento"><span class="material-symbols-outlined">add</span>Agregar Medicamento</button>
                <button class="btn-secondary"><span class="material-symbols-outlined">print</span>Imprimir Receta</button>
                <button class="btn-secondary"><span class="material-symbols-outlined">download</span>Descargar PDF</button>
            </div>
        </div>
        
        <!-- Educación Médica -->
        <div class="page" id="page-educacion">
            <div class="tabs">
                <div class="tab active" data-tab="guias">Guías Clínicas</div>
                <div class="tab" data-tab="protocolos">Protocolos</div>
                <div class="tab" data-tab="pacientes">Material para Pacientes</div>
                <div class="tab" data-tab="farmacologia">Farmacología</div>
            </div>
            
            <div class="tab-content active" id="tab-guias">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Guías Clínicas Actualizadas</h3>
                <div class="medication-card">
                    <h4>Guía de Práctica Clínica para el Manejo de la Diabetes Tipo 2</h4>
                    <p>Actualización 2023. Incluye algoritmos de tratamiento, metas glucémicas y manejo de complicaciones.</p>
                    <div class="medication-meta">
                        <span>ADA</span>
                        <span>56 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.diabetes.org/sites/default/files/2023-01/2023-Standards-of-Care.pdf', '_blank')">Descargar guía</button>
                </div>
                <div class="medication-card">
                    <h4>Guías ESC 2023 para el Manejo de la Cardiopatía Coronaria</h4>
                    <p>Nuevas recomendaciones sobre estrategias de revascularización y tratamiento médico óptimo.</p>
                    <div class="medication-meta">
                        <span>Sociedad Europea de Cardiología</span>
                        <span>42 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://academic.oup.com/eurheartj/article/44/39/4065/7225235', '_blank')">Descargar guía</button>
                </div>
                <div class="medication-card">
                    <h4>Guía de Práctica Clínica sobre Hipertensión Arterial</h4>
                    <p>Actualización de las guías JNC 9. Estratificación de riesgo y algoritmo de tratamiento.</p>
                    <div class="medication-meta">
                        <span>JNC</span>
                        <span>38 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://jamanetwork.com/journals/jama/fullarticle/2570875', '_blank')">Descargar guía</button>
                </div>
                <div class="medication-card">
                    <h4>Guía de Manejo de Infecciones del Tracto Urinario</h4>
                    <p>Recomendaciones para diagnóstico, tratamiento y prevención de ITUs en adultos y población geriátrica.</p>
                    <div class="medication-meta">
                        <span>IDSA</span>
                        <span>34 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.idsociety.org/practice-guideline/care-of-patients-with-an-infectious-disease/', '_blank')">Descargar guía</button>
                </div>
            </div>
            
            <div class="tab-content" id="tab-protocolos">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Protocolos y Procedimientos</h3>
                <div class="medication-card">
                    <h4>Protocolo de Manejo de la Crisis Hipertensiva</h4>
                    <p>Algoritmo diagnóstico y terapéutico para el manejo de urgencias hipertensivas en sala de emergencias.</p>
                    <div class="medication-meta">
                        <span>Urgencias</span>
                        <span>12 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.ahajournals.org/doi/10.1161/HYPERTENSIONAHA.117.10803', '_blank')">Descargar protocolo</button>
                </div>
                <div class="medication-card">
                    <h4>Protocolo de Antibioticoterapia Empírica</h4>
                    <p>Guía de selección de antibióticos según localización de infección y perfil de resistencias local.</p>
                    <div class="medication-meta">
                        <span>Infectología</span>
                        <span>24 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.cdc.gov/antibiotic-use/clinicalguidelines.html', '_blank')">Descargar protocolo</button>
                </div>
                <div class="medication-card">
                    <h4>Protocolo de Manejo del Dolor Agudo y Crónico</h4>
                    <p>Escalas de valoración y algoritmo de tratamiento según intensidad y tipo de dolor.</p>
                    <div class="medication-meta">
                        <span>Dolor</span>
                        <span>18 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.guideline.gov/summaries/summary/55292', '_blank')">Descargar protocolo</button>
                </div>
                <div class="medication-card">
                    <h4>Protocolo de Reanimación Cardiopulmonar (RCP)</h4>
                    <p>Guía actualizada según recomendaciones AHA 2023 para RCP en adultos, niños y lactantes.</p>
                    <div class="medication-meta">
                        <span>Urgencias</span>
                        <span>16 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://cpr.heart.org/en/resuscitation-science/cpr-guidelines-and-recommendations', '_blank')">Descargar protocolo</button>
                </div>
            </div>
            
            <div class="tab-content" id="tab-pacientes">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Material Educativo para Pacientes</h3>
                <div class="medication-card">
                    <h4>Guía de Autocuidado en Diabetes</h4>
                    <p>Material educativo sobre monitorización glucémica, alimentación y prevención de complicaciones.</p>
                    <div class="medication-meta">
                        <span>Diabetes</span>
                        <span>16 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.diabetes.org/resources/living-with-diabetes/diabetes-care/blood-glucose-testing-and-control', '_blank')">Descargar material</button>
                </div>
                <div class="medication-card">
                    <h4>Guía de Alimentación Saludable</h4>
                    <p>Recomendaciones nutricionales, plan de alimentación y recetas saludables para pacientes.</p>
                    <div class="medication-meta">
                        <span>Nutrición</span>
                        <span>20 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.myplate.gov/', '_blank')">Descargar material</button>
                </div>
                <div class="medication-card">
                    <h4>Guía de Actividad Física</h4>
                    <p>Recomendaciones de ejercicio según condición clínica y nivel de capacidad física.</p>
                    <div class="medication-meta">
                        <span>Ejercicio</span>
                        <span>14 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.cdc.gov/physical-activity/basics/index.htm', '_blank')">Descargar material</button>
                </div>
                <div class="medication-card">
                    <h4>Guía de Manejo del Estrés y Ansiedad</h4>
                    <p>Técnicas de relajación, mindfulness y recomendaciones para el manejo del estrés diario.</p>
                    <div class="medication-meta">
                        <span>Salud Mental</span>
                        <span>12 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.apa.org/topics/stress', '_blank')">Descargar material</button>
                </div>
            </div>
            
            <div class="tab-content" id="tab-farmacologia">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Recursos de Farmacología</h3>
                <div class="medication-card">
                    <h4>Manual de Farmacología Clínica</h4>
                    <p>Guía rápida de dosificación, interacciones y efectos adversos de medicamentos de uso común.</p>
                    <div class="medication-meta">
                        <span>Farmacología</span>
                        <span>68 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.ncbi.nlm.nih.gov/books/NBK556074/', '_blank')">Descargar manual</button>
                </div>
                <div class="medication-card">
                    <h4>Guía de Antibióticos</h4>
                    <p>Spectro de actividad, dosificación en insuficiencia renal y consideraciones especiales.</p>
                    <div class="medication-meta">
                        <span>Antibióticos</span>
                        <span>32 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.rxlist.com/', '_blank')">Descargar guía</button>
                </div>
                <div class="medication-card">
                    <h4>Interacciones Medicamentosas Comunes</h4>
                    <p>Guía de las interacciones más relevantes en la práctica clínica diaria.</p>
                    <div class="medication-meta">
                        <span>Interacciones</span>
                        <span>26 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.drugs.com/drug_interactions.html', '_blank')">Descargar guía</button>
                </div>
                <div class="medication-card">
                    <h4>Guía de Anticoagulantes</h4>
                    <p>Manejo de anticoagulantes orales, monitoreo, reversión y manejo de complicaciones.</p>
                    <div class="medication-meta">
                        <span>Hematología</span>
                        <span>28 páginas</span>
                        <span>PDF</span>
                    </div>
                    <button class="btn-secondary" onclick="window.open('https://www.acc.org/latest-in-cardiology/clinical-trials/2020/11/16/16/24/2020-acc-aha-guideline-for-the-management-of-atrial-fibrillation', '_blank')">Descargar guía</button>
                </div>
            </div>
        </div>
        
        <!-- Calculadoras Médicas -->
        <div class="page" id="page-calculadoras">
            <div class="tabs">
                <div class="tab active" data-tab="vih">VIH</div>
                <div class="tab" data-tab="cardiovascular">Cardiovascular</div>
                <div class="tab" data-tab="renal">Renal</div>
                <div class="tab" data-tab="hepatico">Hepático</div>
                <div class="tab" data-tab="nutricion">Nutrición</div>
            </div>
            
            <div class="tab-content active" id="tab-vih">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Calculadora de Estado VIH</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="cd4-input">Recuento de CD4 (células/μL)</label>
                        <input type="number" id="cd4-input" placeholder="Ej: 450" min="0" max="2000">
                    </div>
                    <div class="form-group">
                        <label for="carga-viral-input">Carga Viral (copias/mL)</label>
                        <input type="number" id="carga-viral-input" placeholder="Ej: 50" min="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="sintomas-input">Síntomas Actuales</label>
                        <select id="sintomas-input">
                            <option value="ninguno">Ninguno</option>
                            <option value="leves">Leves</option>
                            <option value="moderados">Moderados</option>
                            <option value="severos">Severos</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tratamiento-input">¿Está en tratamiento antirretroviral?</label>
                        <select id="tratamiento-input">
                            <option value="si">Sí</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                </div>
                <button class="btn-primary" id="calcular-estado-vih"><span class="material-symbols-outlined">calculate</span>Calcular Estado</button>
                
                <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-calculadora-vih">
                    <h4>Estado Inmunológico: <span id="estado-inmunologico"></span></h4>
                    <p id="explicacion-estado"></p>
                    <h4>Recomendaciones</h4>
                    <ul id="lista-recomendaciones"></ul>
                </div>
            </div>
            
            <div class="tab-content" id="tab-cardiovascular">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Calculadoras Cardiovasculares</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="imc-peso">Peso (kg)</label>
                        <input type="number" id="imc-peso" placeholder="Ej: 70">
                    </div>
                    <div class="form-group">
                        <label for="imc-altura">Altura (cm)</label>
                        <input type="number" id="imc-altura" placeholder="Ej: 170">
                    </div>
                </div>
                <button class="btn-primary" id="calcular-imc"><span class="material-symbols-outlined">calculate</span>Calcular IMC</button>
                
                <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-imc">
                    <h4>Resultado del IMC</h4>
                    <p><strong>Valor de IMC:</strong> <span id="valor-imc"></span></p>
                    <p><strong>Categoría:</strong> <span id="categoria-imc"></span></p>
                </div>
                
                <div class="form-row" style="margin-top: var(--spacer-xl);">
                    <div class="form-group">
                        <label for="sistolica-presion">Presión Sistólica (mmHg)</label>
                        <input type="number" id="sistolica-presion" placeholder="Ej: 132">
                    </div>
                    <div class="form-group">
                        <label for="diastolica-presion">Presión Diastólica (mmHg)</label>
                        <input type="number" id="diastolica-presion" placeholder="Ej: 85">
                    </div>
                </div>
                <button class="btn-primary" id="calcular-presion"><span class="material-symbols-outlined">calculate</span>Clasificar Hipertensión</button>
                
                <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-presion">
                    <h4>Resultado de la Clasificación</h4>
                    <p><strong>Clasificación:</strong> <span id="clasificacion-presion"></span></p>
                    <p><strong>Interpretación:</strong> <span id="interpretacion-presion"></span></p>
                </div>
            </div>
            
            <div class="tab-content" id="tab-renal">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Calculadora de Filtrado Glomerular</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="creatinina-input">Creatinina (mg/dL)</label>
                        <input type="number" id="creatinina-input" step="0.1" placeholder="Ej: 0.8">
                    </div>
                    <div class="form-group">
                        <label for="edad-renal">Edad</label>
                        <input type="number" id="edad-renal" placeholder="Ej: 45">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="peso-renal">Peso (kg)</label>
                        <input type="number" id="peso-renal" placeholder="Ej: 70">
                    </div>
                    <div class="form-group">
                        <label for="genero-renal">Género</label>
                        <select id="genero-renal">
                            <option value="hombre">Hombre</option>
                            <option value="mujer">Mujer</option>
                        </select>
                    </div>
                </div>
                <button class="btn-primary" id="calcular-fg"><span class="material-symbols-outlined">calculate</span>Calcular Filtrado Glomerular</button>
                
                <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-fg">
                    <h4>Resultado del Filtrado Glomerular</h4>
                    <p><strong>Valor:</strong> <span id="valor-fg"></span> ml/min</p>
                    <p><strong>Clasificación:</strong> <span id="clasificacion-fg"></span></p>
                </div>
            </div>
            
            <div class="tab-content" id="tab-hepatico">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Calculadora de Child-Pugh</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="bilirrubina-input">Bilirrubina total (mg/dL)</label>
                        <input type="number" id="bilirrubina-input" step="0.1" placeholder="Ej: 1.8">
                    </div>
                    <div class="form-group">
                        <label for="albumina-input">Albúmina (g/dL)</label>
                        <input type="number" id="albumina-input" step="0.1" placeholder="Ej: 3.6">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="inr-input">INR</label>
                        <input type="number" id="inr-input" step="0.1" placeholder="Ej: 1.2">
                    </div>
                    <div class="form-group">
                        <label for="ascitis-input">Ascitis</label>
                        <select id="ascitis-input">
                            <option value="1">Ausente (1 punto)</option>
                            <option value="2">Leve/Moderada (2 puntos)</option>
                            <option value="3">Refractaria (3 puntos)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="encefalopatia-input">Encefalopatía hepática</label>
                    <select id="encefalopatia-input">
                        <option value="1">Ausente (1 punto)</option>
                        <option value="2">Leve (2 puntos)</option>
                        <option value="3">Moderada/Severa (3 puntos)</option>
                    </select>
                </div>
                <button class="btn-primary" id="calcular-child-pugh"><span class="material-symbols-outlined">calculate</span>Calcular Puntuación Child-Pugh</button>
                
                <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-child-pugh">
                    <h4>Resultado de la Puntuación Child-Pugh</h4>
                    <p><strong>Puntuación total:</strong> <span id="puntuacion-child-pugh"></span></p>
                    <p><strong>Clasificación:</strong> <span id="clasificacion-child-pugh"></span></p>
                </div>
            </div>
            
            <div class="tab-content" id="tab-nutricion">
                <h3 style="color: var(--clinico-primary); font-family: var(--font); margin-bottom: var(--spacer-lg);">Calculadoras Nutricionales</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="peso-actual-input">Peso Actual (kg)</label>
                        <input type="number" id="peso-actual-input" step="0.1" placeholder="Ej: 70">
                    </div>
                    <div class="form-group">
                        <label for="peso-habitual-input">Peso Habitual (kg)</label>
                        <input type="number" id="peso-habitual-input" step="0.1" placeholder="Ej: 72">
                    </div>
                </div>
                <button class="btn-primary" id="calcular-perdida-peso"><span class="material-symbols-outlined">calculate</span>Calcular Pérdida de Peso</button>
                
                <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-perdida-peso">
                    <h4>Resultado de la Pérdida de Peso</h4>
                    <p><strong>Porcentaje de pérdida:</strong> <span id="porcentaje-perdida-peso"></span>%</p>
                    <p><strong>Interpretación:</strong> <span id="interpretacion-perdida-peso"></span></p>
                </div>
            </div>
        </div>
        
        <!-- Paneles Modales -->
        <div class="modal-backdrop"></div>
        
        <!-- Panel de Nuevo Paciente -->
        <section class="panel" id="panel-nuevo-paciente">
            <button class="close-btn" title="Cerrar" onclick="document.getElementById('panel-nuevo-paciente').classList.remove('active'); document.querySelector('.modal-backdrop').classList.remove('active');">&times;</button>
            <h2><span class="material-symbols-outlined">person_add</span>Registrar Nuevo Paciente</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="nuevo-nombre">Nombre completo</label>
                    <input type="text" id="nuevo-nombre">
                </div>
                <div class="form-group">
                    <label for="nuevo-edad">Edad</label>
                    <input type="number" id="nuevo-edad">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="nuevo-genero">Género</label>
                    <select id="nuevo-genero">
                        <option value="masculino">Masculino</option>
                        <option value="femenino">Femenino</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="nuevo-telefono">Teléfono</label>
                    <input type="tel" id="nuevo-telefono">
                </div>
            </div>
            
            <div class="form-group">
                <label for="nuevo-email">Email</label>
                <input type="email" id="nuevo-email">
            </div>
            
            <div class="form-group">
                <label for="nuevo-direccion">Dirección</label>
                <textarea id="nuevo-direccion" rows="3"></textarea>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="nuevo-antecedentes">Antecedentes Médicos</label>
                    <textarea id="nuevo-antecedentes" rows="3" placeholder="Enfermedades, cirugías, alergias..."></textarea>
                </div>
                <div class="form-group">
                    <label for="nuevo-medicamentos">Medicamentos Actuales</label>
                    <textarea id="nuevo-medicamentos" rows="3" placeholder="Lista de medicamentos que toma actualmente"></textarea>
                </div>
            </div>
            
            <button class="btn-primary" id="guardar-nuevo-paciente"><span class="material-symbols-outlined">save</span>Guardar Paciente</button>
        </section>
        
        <!-- Panel de Edición de Paciente -->
        <section class="panel" id="panel-editar-paciente">
            <button class="close-btn" title="Cerrar" onclick="document.getElementById('panel-editar-paciente').classList.remove('active'); document.querySelector('.modal-backdrop').classList.remove('active');">&times;</button>
            <h2><span class="material-symbols-outlined">edit</span>Editar Paciente</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="editar-nombre">Nombre completo</label>
                    <input type="text" id="editar-nombre">
                </div>
                <div class="form-group">
                    <label for="editar-edad">Edad</label>
                    <input type="number" id="editar-edad">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="editar-genero">Género</label>
                    <select id="editar-genero">
                        <option value="masculino">Masculino</option>
                        <option value="femenino">Femenino</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editar-telefono">Teléfono</label>
                    <input type="tel" id="editar-telefono">
                </div>
            </div>
            
            <div class="form-group">
                <label for="editar-email">Email</label>
                <input type="email" id="editar-email">
            </div>
            
            <div class="form-group">
                <label for="editar-direccion">Dirección</label>
                <textarea id="editar-direccion" rows="3"></textarea>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="editar-antecedentes">Antecedentes Médicos</label>
                    <textarea id="editar-antecedentes" rows="3" placeholder="Enfermedades, cirugías, alergias..."></textarea>
                </div>
                <div class="form-group">
                    <label for="editar-medicamentos">Medicamentos Actuales</label>
                    <textarea id="editar-medicamentos" rows="3" placeholder="Lista de medicamentos que toma actualmente"></textarea>
                </div>
            </div>
            
            <button class="btn-primary" id="guardar-edicion-paciente"><span class="material-symbols-outlined">save</span>Guardar Cambios</button>
        </section>
        
        <!-- Panel de Historia Clínica -->
        <section class="panel" id="panel-historia">
            <button class="close-btn" title="Cerrar" onclick="document.getElementById('panel-historia').classList.remove('active'); document.querySelector('.modal-backdrop').classList.remove('active');">&times;</button>
            <h2><span class="material-symbols-outlined">medical_information</span>Historia Clínica Completa</h2>
            
            <div class="tabs">
                <div class="tab active" data-tab="resumen">Resumen</div>
                <div class="tab" data-tab="diagnosticos">Diagnósticos</div>
                <div class="tab" data-tab="tratamientos">Tratamientos</div>
                <div class="tab" data-tab="evolucion">Evolución</div>
            </div>
            
            <div class="tab-content active" id="tab-resumen">
                <div class="form-group">
                    <label for="paciente-historias">Seleccionar paciente</label>
                    <select id="paciente-historias">
                        <option value="">Seleccionar paciente...</option>
                        <option value="1" selected>María López Fernández</option>
                        <option value="2">Carlos Ruiz Martínez</option>
                        <option value="3">Ana Sánchez Gómez</option>
                    </select>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="dashboard-card-header">
                            <h3 class="dashboard-card-title">Información Básica</h3>
                            <div class="dashboard-card-icon">
                                <span class="material-symbols-outlined">person</span>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: auto 1fr; gap: var(--spacer-sm);">
                            <span style="font-weight: 500;">Nombre:</span><span id="info-nombre">María López Fernández</span>
                            <span style="font-weight: 500;">Edad:</span><span id="info-edad">68 años</span>
                            <span style="font-weight: 500;">Género:</span><span id="info-genero">Femenino</span>
                            <span style="font-weight: 500;">Teléfono:</span><span id="info-telefono">+34 612 345 678</span>
                            <span style="font-weight: 500;">Email:</span><span id="info-email">maria.lopez@email.com</span>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="dashboard-card-header">
                            <h3 class="dashboard-card-title">Antecedentes Médicos</h3>
                            <div class="dashboard-card-icon">
                                <span class="material-symbols-outlined">medical_information</span>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: auto 1fr; gap: var(--spacer-sm);">
                            <span style="font-weight: 500;">Alergias:</span><span id="info-alergias">Penicilina</span>
                            <span style="font-weight: 500;">Enfermedades:</span><span id="info-enfermedades">Diabetes tipo 2, Hipertensión arterial</span>
                            <span style="font-weight: 500;">Cirugías:</span><span id="info-cirugias">Colecistectomía (2015)</span>
                            <span style="font-weight: 500;">Medicamentos:</span><span id="info-medicamentos">Metformina, Losartan, Tri-zevuvir</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="tab-diagnosticos">
                <h3>Diagnósticos del Paciente</h3>
                <div class="info-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Código CIE-10</th>
                            <th>Diagnóstico</th>
                            <th>Tipo</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-diagnosticos">
                        <!-- Los diagnósticos se cargarán dinámicamente -->
                    </tbody>
                </div>
                <button class="btn-primary" style="margin-top: var(--spacer-xl);"><span class="material-symbols-outlined">add</span>Agregar diagnóstico</button>
            </div>
            
            <div class="tab-content" id="tab-tratamientos">
                <h3>Tratamientos Actuales</h3>
                <div class="medication-card">
                    <h4>Metformina</h4>
                    <p>850 mg cada 12 horas. Para el control de la diabetes mellitus tipo 2.</p>
                    <div class="medication-meta">
                        <span>Iniciado: 15/01/2023</span>
                        <span>Duración: Continua</span>
                        <span>Prescriptor: Dr. Pérez</span>
                    </div>
                </div>
                <div class="medication-card">
                    <h4>Losartan</h4>
                    <p>50 mg cada 24 horas. Para el control de la hipertensión arterial.</p>
                    <div class="medication-meta">
                        <span>Iniciado: 15/01/2023</span>
                        <span>Duración: Continua</span>
                        <span>Prescriptor: Dr. Pérez</span>
                    </div>
                </div>
                <div class="medication-card">
                    <h4>Tri-zevuvir</h4>
                    <p>1 comprimido al día. Tratamiento antirretroviral para VIH.</p>
                    <div class="medication-meta">
                        <span>Iniciado: 15/01/2024</span>
                        <span>Duración: Continua</span>
                        <span>Prescriptor: Dr. Pérez</span>
                    </div>
                </div>
                <button class="btn-primary" style="margin-top: var(--spacer-xl);"><span class="material-symbols-outlined">add</span>Agregar tratamiento</button>
            </div>
            
            <div class="tab-content" id="tab-evolucion">
                <h3>Evolución Clínica</h3>
                <div class="form-group">
                    <label for="fecha-evolucion">Fecha</label>
                    <input type="date" id="fecha-evolucion">
                </div>
                <div class="form-group">
                    <label for="nota-evolucion">Nota de evolución</label>
                    <textarea id="nota-evolucion" rows="6" placeholder="Describa la evolución del paciente..."></textarea>
                </div>
                <button class="btn-primary">Guardar nota de evolución</button>
                
                <div style="margin-top: var(--spacer-xl);">
                    <h4>Notas anteriores</h4>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-date">15/03/2024</div>
                            <div class="timeline-content">
                                <p style="margin: 0;">Paciente estable, sin quejas. Análisis dentro de rangos normales. Se mantiene tratamiento actual.</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-date">28/02/2024</div>
                            <div class="timeline-content">
                                <p style="margin: 0;">Paciente refiere mareos leves. TA: 135/85 mmHg. Se ajusta dosis de Losartan a 50 mg/día. Programar seguimiento en 2 semanas.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Panel de Interacciones -->
        <section class="panel" id="panel-interacciones">
            <button class="close-btn" title="Cerrar" onclick="document.getElementById('panel-interacciones').classList.remove('active'); document.querySelector('.modal-backdrop').classList.remove('active');">&times;</button>
            <h2><span class="material-symbols-outlined">warning</span> Interacciones Medicamentosas</h2>
            
            <div class="search-box">
                <input type="text" placeholder="Buscar medicamento o interacción...">
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="categorias">Por Categorías</div>
                <div class="tab" data-tab="busqueda">Búsqueda Avanzada</div>
                <div class="tab" data-tab="favoritos">Favoritos</div>
            </div>
            
            <div class="tab-content active" id="tab-categorias">
                <h3>Interacciones por Categorías</h3>
                <div class="interaction-grid">
                    <div class="interaction-category">
                        <h3>Cardiología</h3>
                        <div class="interaction-item">
                            <h4>Warfarina + AINEs</h4>
                            <p><span class="fatal">FATAL:</span> Aumento del riesgo de hemorragia gastrointestinal.</p>
                        </div>
                        <div class="interaction-item">
                            <h4>IECA + Espironolactona</h4>
                            <p><span class="moderate">MODERADA:</span> Riesgo de hiperkalemia.</p>
                        </div>
                    </div>
                    <div class="interaction-category">
                        <h3>Endocrinología</h3>
                        <div class="interaction-item">
                            <h4>Metformina + Contraste yodado</h4>
                            <p><span class="moderate">MODERADA:</span> Riesgo de acidosis láctica.</p>
                        </div>
                        <div class="interaction-item">
                            <h4>Insulina + Betabloqueantes</h4>
                            <p><span class="moderate">MODERADA:</span> Enmascaramiento de hipoglucemia.</p>
                        </div>
                    </div>
                    <div class="interaction-category">
                        <h3>Psiquiatría</h3>
                        <div class="interaction-item">
                            <h4>ISRS + IMAO</h4>
                            <p><span class="fatal">FATAL:</span> Riesgo de síndrome serotoninérgico.</p>
                        </div>
                        <div class="interaction-item">
                            <h4>Benzodiacepinas + Opioides</h4>
                            <p><span class="fatal">FATAL:</span> Depresión respiratoria severa.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="tab-busqueda">
                <h3>Búsqueda de Interacciones</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="medicamento1">Medicamento 1</label>
                        <input type="text" id="medicamento1" placeholder="Nombre del medicamento" list="medicamentosList">
                    </div>
                    <div class="form-group">
                        <label for="medicamento2">Medicamento 2</label>
                        <input type="text" id="medicamento2" placeholder="Nombre del medicamento" list="medicamentosList">
                    </div>
                </div>
                <button class="btn-primary">Verificar interacción</button>
                
                <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-interaccion">
                    <h4>Resultado de la interacción</h4>
                    <p id="detalle-interaccion"></p>
                </div>
            </div>
            
            <div class="tab-content" id="tab-favoritos">
                <h3>Interacciones Favoritas</h3>
                <p>Guarde aquí las interacciones que consulta frecuentemente.</p>
                <div class="interaction-item">
                    <h4>Warfarina + AINEs</h4>
                    <p><span class="fatal">FATAL:</span> Aumento del riesgo de hemorragia gastrointestinal.</p>
                </div>
                <div class="interaction-item">
                    <h4>Metformina + Contraste yodado</h4>
                    <p><span class="moderate">MODERADA:</span> Riesgo de acidosis láctica.</p>
                </div>
            </div>
        </section>
        
        <!-- Panel de Combinador de Medicamentos -->
        <section class="panel" id="panel-combinador">
            <button class="close-btn" title="Cerrar" onclick="document.getElementById('panel-combinador').classList.remove('active'); document.querySelector('.modal-backdrop').classList.remove('active');">&times;</button>
            <h2><span class="material-symbols-outlined">science</span> Combinador de Medicamentos</h2>
            
            <div class="vih-info">
                <h3 style="margin: 0 0 var(--spacer-sm) 0;">Herramienta de verificación de interacciones</h3>
                <p>Ingrese hasta 5 medicamentos para verificar interacciones entre ellos.</p>
            </div>
            
            <div class="form-group">
                <label for="combinador-paciente">Paciente (opcional)</label>
                <select id="combinador-paciente">
                    <option value="">Seleccionar paciente...</option>
                    <option value="1">María López Fernández</option>
                    <option value="2">Carlos Ruiz Martínez</option>
                    <option value="3">Ana Sánchez Gómez</option>
                </select>
            </div>
            
            <div id="medicamentos-combinador">
                <div class="form-row">
                    <div class="form-group">
                        <label>Medicamento 1</label>
                        <input type="text" placeholder="Nombre del medicamento" list="medicamentosList">
                    </div>
                    <div class="form-group">
                        <label>Dosis</label>
                        <input type="text" placeholder="Ej: 50 mg cada 24h">
                    </div>
                </div>
            </div>
            
            <button class="btn-secondary" id="agregar-medicamento"><span class="material-symbols-outlined">add</span>Agregar otro medicamento</button>
            <button class="btn-primary" style="margin-top: var(--spacer-xl);">Verificar interacciones</button>
            
            <div class="calculator-result" style="margin-top: var(--spacer-xl); display: none;" id="resultado-combinador">
                <h4>Resultado del análisis</h4>
                <div id="detalle-combinador"></div>
            </div>
        </section>
        
        <!-- Panel de Información de Medicamentos -->
        <section class="panel" id="panel-medicamentos">
            <button class="close-btn" title="Cerrar" onclick="document.getElementById('panel-medicamentos').classList.remove('active'); document.querySelector('.modal-backdrop').classList.remove('active');">&times;</button>
            <h2><span class="material-symbols-outlined">pill</span>Información de Medicamentos</h2>
            
            <div class="search-box">
                <input type="text" placeholder="Buscar medicamento..." id="searchMedicamentos">
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="todos">Todos</div>
                <div class="tab" data-tab="cardiologia">Cardiología</div>
                <div class="tab" data-tab="endocrinologia">Endocrinología</div>
                <div class="tab" data-tab="neurologia">Neurología</div>
            </div>
            
            <div class="tab-content active" id="tab-todos">
                <div class="medication-card">
                    <h4>Losartan</h4>
                    <p><strong>Nombre comercial:</strong> Cozaar</p>
                    <p><strong>Categoría:</strong> Antihipertensivo (Bloqueador de receptores de angiotensina II)</p>
                    <p><strong>Indicaciones:</strong> Hipertensión arterial, protección renal en diabetes tipo 2</p>
                    <p><strong>Dosis habitual:</strong> 50 mg una vez al día, ajustable a 100 mg si es necesario</p>
                    <p><strong>Efectos adversos comunes:</strong> Mareo, hipotensión, hiperkalemia, disfunción renal</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2018/020525s038lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
                <div class="medication-card">
                    <h4>Metformina</h4>
                    <p><strong>Nombre comercial:</strong> Glucophage</p>
                    <p><strong>Categoría:</strong> Antidiabético (Biguanida)</p>
                    <p><strong>Indicaciones:</strong> Diabetes tipo 2, síndrome de ovario poliquístico</p>
                    <p><strong>Dosis habitual:</strong> 500-850 mg dos veces al día, con las comidas</p>
                    <p><strong>Efectos adversos comunes:</strong> Náuseas, diarrea, pérdida de apetito, sabor metálico</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2012/020357s023lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
                <div class="medication-card">
                    <h4>Aspirina</h4>
                    <p><strong>Nombre comercial:</strong> Bayaspirina</p>
                    <p><strong>Categoría:</strong> Antiagregante, antiinflamatorio no esteroideo (AINE)</p>
                    <p><strong>Indicaciones:</strong> Prevención cardiovascular, dolor leve, fiebre</p>
                    <p><strong>Dosis habitual:</strong> 75-100 mg una vez al día para prevención cardiovascular</p>
                    <p><strong>Efectos adversos comunes:</strong> Irritación gástrica, riesgo de hemorragia gastrointestinal</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2017/005803s060lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
            </div>
            
            <div class="tab-content" id="tab-cardiologia">
                <div class="medication-card">
                    <h4>Losartan</h4>
                    <p><strong>Nombre comercial:</strong> Cozaar</p>
                    <p><strong>Categoría:</strong> Antihipertensivo (Bloqueador de receptores de angiotensina II)</p>
                    <p><strong>Indicaciones:</strong> Hipertensión arterial, protección renal en diabetes tipo 2</p>
                    <p><strong>Dosis habitual:</strong> 50 mg una vez al día, ajustable a 100 mg si es necesario</p>
                    <p><strong>Efectos adversos comunes:</strong> Mareo, hipotensión, hiperkalemia, disfunción renal</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2018/020525s038lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
                <div class="medication-card">
                    <h4>Atorvastatina</h4>
                    <p><strong>Nombre comercial:</strong> Lipitor</p>
                    <p><strong>Categoría:</strong> Estatina (hipolipemiante)</p>
                    <p><strong>Indicaciones:</strong> Hipercolesterolemia, prevención cardiovascular</p>
                    <p><strong>Dosis habitual:</strong> 10-80 mg una vez al día</p>
                    <p><strong>Efectos adversos comunes:</strong> Dolor muscular, elevación de enzimas hepáticas, diabetes</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2019/020702s081lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
            </div>
            
            <div class="tab-content" id="tab-endocrinologia">
                <div class="medication-card">
                    <h4>Metformina</h4>
                    <p><strong>Nombre comercial:</strong> Glucophage</p>
                    <p><strong>Categoría:</strong> Antidiabético (Biguanida)</p>
                    <p><strong>Indicaciones:</strong> Diabetes tipo 2, síndrome de ovario poliquístico</p>
                    <p><strong>Dosis habitual:</strong> 500-850 mg dos veces al día, con las comidas</p>
                    <p><strong>Efectos adversos comunes:</strong> Náuseas, diarrea, pérdida de apetito, sabor metálico</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2012/020357s023lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
                <div class="medication-card">
                    <h4>Levotiroxina</h4>
                    <p><strong>Nombre comercial:</strong> Eutirox</p>
                    <p><strong>Categoría:</strong> Hormona tiroidea</p>
                    <p><strong>Indicaciones:</strong> Hipotiroidismo, bocio</p>
                    <p><strong>Dosis habitual:</strong> 1.6 mcg/kg/día, ajustada según TSH</p>
                    <p><strong>Efectos adversos comunes:</strong> Palpitaciones, insomnio, pérdida de peso, osteoporosis con dosis altas</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2019/022416s034lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
            </div>
            
            <div class="tab-content" id="tab-neurologia">
                <div class="medication-card">
                    <h4>Levetiracetam</h4>
                    <p><strong>Nombre comercial:</strong> Keppra</p>
                    <p><strong>Categoría:</strong> Anticonvulsivante</p>
                    <p><strong>Indicaciones:</strong> Epilepsia, convulsiones parciales y generalizadas</p>
                    <p><strong>Dosis habitual:</strong> 1000-3000 mg/día en dos dosis</p>
                    <p><strong>Efectos adversos comunes:</strong> Somnolencia, mareo, infecciones nasofaríngeas</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2019/021235s041lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
                <div class="medication-card">
                    <h4>Carbamazepina</h4>
                    <p><strong>Nombre comercial:</strong> Tegretol</p>
                    <p><strong>Categoría:</strong> Anticonvulsivante, estabilizador del estado de ánimo</p>
                    <p><strong>Indicaciones:</strong> Epilepsia, neuralgia del trigémino, trastorno bipolar</p>
                    <p><strong>Dosis habitual:</strong> 200-1200 mg/día en dosis divididas</p>
                    <p><strong>Efectos adversos comunes:</strong> Mareo, nistagmo, ataxia, leucopenia</p>
                    <button class="btn-secondary" onclick="window.open('https://www.accessdata.fda.gov/drugsatfda_docs/label/2017/017443s046lbl.pdf', '_blank')">Ficha técnica completa</button>
                </div>
            </div>
        </section>
        
        <script>
            // Estado de la aplicación
            let currentUser = null;
            let pacientes = [];
            let medicamentos = [];
            let diagnosticos = [];
            
            // Base de datos simulada
            const db = {
                usuarios: [
                    { email: 'dr.perez@hospital.com', password: '123456', nombre: 'Dr. Juan Pérez', especialidad: 'Cardiólogo' },
                    { email: 'dr.gomez@hospital.com', password: '123456', nombre: 'Dra. María Gómez', especialidad: 'Endocrinóloga' }
                ],
                
                pacientes: [
                    {
                        id: 1,
                        nombre: "María López Fernández",
                        edad: 68,
                        genero: "femenino",
                        telefono: "+34 612 345 678",
                        email: "maria.lopez@email.com",
                        direccion: "Calle Principal 123, Madrid",
                        antecedentes: "Diabetes tipo 2, Hipertensión arterial, Colecistectomía (2015)",
                        medicamentos: "Metformina, Losartan, Tri-zevuvir",
                        diagnosticos: [
                            { fecha: "15/01/2023", codigo: "E11.9", diagnostico: "Diabetes mellitus tipo 2", tipo: "Crónico", estado: "Activo" },
                            { fecha: "15/01/2023", codigo: "I10", diagnostico: "Hipertensión esencial", tipo: "Crónico", estado: "Activo" },
                            { fecha: "20/05/2023", codigo: "B20", diagnostico: "Infección por VIH", tipo: "Crónico", estado: "Activo" }
                        ],
                        signos: [
                            { fecha: "15/03/2024 10:30", sistolica: 126, diastolica: 82, fc: 78, temp: 36.8, spo2: 98, fr: 16 },
                            { fecha: "14/03/2024 09:15", sistolica: 130, diastolica: 85, fc: 82, temp: 36.5, spo2: 97, fr: 18 }
                        ]
                    },
                    {
                        id: 2,
                        nombre: "Carlos Ruiz Martínez",
                        edad: 72,
                        genero: "masculino",
                        telefono: "+34 623 456 789",
                        email: "carlos.ruiz@email.com",
                        direccion: "Avenida Central 456, Barcelona",
                        antecedentes: "Insuficiencia cardíaca, Fibrilación auricular, Infarto de miocardio (2020)",
                        medicamentos: "Digoxina, Furosemida, Apixaban",
                        diagnosticos: [
                            { fecha: "10/02/2023", codigo: "I50.9", diagnostico: "Insuficiencia cardíaca no especificada", tipo: "Crónico", estado: "Activo" },
                            { fecha: "10/02/2023", codigo: "I48.9", diagnostico: "Fibrilación auricular", tipo: "Crónico", estado: "Activo" }
                        ],
                        signos: [
                            { fecha: "15/03/2024 11:00", sistolica: 140, diastolica: 90, fc: 85, temp: 36.6, spo2: 96, fr: 18 },
                            { fecha: "13/03/2024 10:00", sistolica: 145, diastolica: 92, fc: 88, temp: 36.7, spo2: 95, fr: 20 }
                        ]
                    },
                    {
                        id: 3,
                        nombre: "Ana Sánchez Gómez",
                        edad: 55,
                        genero: "femenino",
                        telefono: "+34 634 567 890",
                        email: "ana.sanchez@email.com",
                        direccion: "Plaza Mayor 789, Valencia",
                        antecedentes: "Artritis reumatoide, Osteoporosis",
                        medicamentos: "Metotrexato, Calcio, Vitamina D",
                        diagnosticos: [
                            { fecha: "05/06/2022", codigo: "M05.9", diagnostico: "Artritis reumatoide no especificada", tipo: "Crónico", estado: "Activo" },
                            { fecha: "05/06/2022", codigo: "M81.0", diagnostico: "Osteoporosis sin fractura patológica actual", tipo: "Crónico", estado: "Activo" }
                        ],
                        signos: [
                            { fecha: "15/03/2024 09:30", sistolica: 128, diastolica: 84, fc: 75, temp: 36.9, spo2: 98, fr: 16 },
                            { fecha: "12/03/2024 09:00", sistolica: 130, diastolica: 86, fc: 76, temp: 36.8, spo2: 97, fr: 16 }
                        ]
                    }
                ],
                
                medicamentos: [
                    { 
                        nombre: "Losartan", 
                        nombreComercial: "Cozaar", 
                        categoria: "Antihipertensivo", 
                        laboratorio: "MSD", 
                        forma: "Comprimido 50 mg",
                        indicaciones: "Hipertensión arterial, protección renal en diabetes tipo 2",
                        dosisHabitual: "50 mg una vez al día, ajustable a 100 mg si es necesario",
                        efectosAdversos: "Mareo, hipotensión, hiperkalemia, disfunción renal"
                    },
                    { 
                        nombre: "Metformina", 
                        nombreComercial: "Glucophage", 
                        categoria: "Antidiabético", 
                        laboratorio: "Bago", 
                        forma: "Comprimido 850 mg",
                        indicaciones: "Diabetes tipo 2, síndrome de ovario poliquístico",
                        dosisHabitual: "500-850 mg dos veces al día, con las comidas",
                        efectosAdversos: "Náuseas, diarrea, pérdida de apetito, sabor metálico"
                    },
                    { 
                        nombre: "Aspirina", 
                        nombreComercial: "Bayaspirina", 
                        categoria: "Antiagregante", 
                        laboratorio: "Bayer", 
                        forma: "Comprimido 100 mg",
                        indicaciones: "Prevención cardiovascular, dolor leve, fiebre",
                        dosisHabitual: "75-100 mg una vez al día para prevención cardiovascular",
                        efectosAdversos: "Irritación gástrica, riesgo de hemorragia gastrointestinal"
                    },
                    { 
                        nombre: "Paracetamol", 
                        nombreComercial: "Dolores", 
                        categoria: "Analgésico", 
                        laboratorio: "Dolores", 
                        forma: "Comprimido 500 mg",
                        indicaciones: "Dolor leve a moderado, fiebre",
                        dosisHabitual: "500-1000 mg cada 4-6 horas, máximo 4000 mg/día",
                        efectosAdversos: "Daño hepático con sobredosis"
                    },
                    { 
                        nombre: "Omeprazol", 
                        nombreComercial: "Losec", 
                        categoria: "Inhibidor de bomba de protones", 
                        laboratorio: "AstraZeneca", 
                        forma: "Cápsula 20 mg",
                        indicaciones: "Enfermedad por reflujo gastroesofágico, úlcera péptica",
                        dosisHabitual: "20 mg una vez al día",
                        efectosAdversos: "Dolor de cabeza, diarrea, náuseas"
                    },
                    { 
                        nombre: "Digoxina", 
                        nombreComercial: "Lanoxin", 
                        categoria: "Cardiotónico", 
                        laboratorio: "Roemmers", 
                        forma: "Comprimido 0.25 mg",
                        indicaciones: "Insuficiencia cardíaca, fibrilación auricular",
                        dosisHabitual: "0.125-0.25 mg una vez al día",
                        efectosAdversos: "Náuseas, vómitos, arritmias, visión borrosa"
                    },
                    { 
                        nombre: "Furosemida", 
                        nombreComercial: "Lasix", 
                        categoria: "Diurético", 
                        laboratorio: "Roemmers", 
                        forma: "Comprimido 40 mg",
                        indicaciones: "Edema por insuficiencia cardíaca, hipertensión",
                        dosisHabitual: "20-80 mg una vez al día",
                        efectosAdversos: "Deshidratación, hipotensión, hipopotasemia"
                    },
                    { 
                        nombre: "Apixaban", 
                        nombreComercial: "Eliquis", 
                        categoria: "Anticoagulante", 
                        laboratorio: "Bristol-Myers Squibb", 
                        forma: "Comprimido 5 mg",
                        indicaciones: "Prevención de accidente cerebrovascular en FA, trombosis venosa",
                        dosisHabitual: "5 mg dos veces al día",
                        efectosAdversos: "Riesgo de hemorragia, anemia"
                    },
                    { 
                        nombre: "Metotrexato", 
                        nombreComercial: "Trexall", 
                        categoria: "Inmunosupresor", 
                        laboratorio: "Pfizer", 
                        forma: "Comprimido 2.5 mg",
                        indicaciones: "Artritis reumatoide, psoriasis, cáncer",
                        dosisHabitual: "7.5-25 mg una vez a la semana",
                        efectosAdversos: "Mucositis, hepatotoxicidad, mielosupresión"
                    },
                    { 
                        nombre: "Calcio", 
                        nombreComercial: "Calciosan", 
                        categoria: "Suplemento", 
                        laboratorio: "Sanofi", 
                        forma: "Cápsula 500 mg",
                        indicaciones: "Osteoporosis, deficiencia de calcio",
                        dosisHabitual: "1000-1200 mg/día",
                        efectosAdversos: "Estreñimiento, cálculos renales"
                    },
                    { 
                        nombre: "Vitamina D", 
                        nombreComercial: "Decodrate", 
                        categoria: "Suplemento", 
                        laboratorio: "Roche", 
                        forma: "Cápsula 1000 UI",
                        indicaciones: "Deficiencia de vitamina D, osteoporosis",
                        dosisHabitual: "800-2000 UI/día",
                        efectosAdversos: "Hipercalcemia con dosis altas"
                    },
                    { 
                        nombre: "Tri-zevuvir", 
                        nombreComercial: "Truvada", 
                        categoria: "Antirretroviral", 
                        laboratorio: "Gilead", 
                        forma: "Comprimido",
                        indicaciones: "Tratamiento y prevención de VIH",
                        dosisHabitual: "1 comprimido al día",
                        efectosAdversos: "Náuseas, dolor de cabeza, disfunción renal"
                    },
                    { 
                        nombre: "Atorvastatina", 
                        nombreComercial: "Lipitor", 
                        categoria: "Estatinas", 
                        laboratorio: "Pfizer", 
                        forma: "Comprimido 20 mg",
                        indicaciones: "Hipercolesterolemia, prevención cardiovascular",
                        dosisHabitual: "10-80 mg una vez al día",
                        efectosAdversos: "Dolor muscular, elevación de enzimas hepáticas"
                    },
                    { 
                        nombre: "Levotiroxina", 
                        nombreComercial: "Eutirox", 
                        categoria: "Hormona tiroidea", 
                        laboratorio: "Merck", 
                        forma: "Comprimido 50 mcg",
                        indicaciones: "Hipotiroidismo, bocio",
                        dosisHabitual: "1.6 mcg/kg/día, ajustada según TSH",
                        efectosAdversos: "Palpitaciones, insomnio, pérdida de peso"
                    },
                    { 
                        nombre: "Levetiracetam", 
                        nombreComercial: "Keppra", 
                        categoria: "Anticonvulsivante", 
                        laboratorio: "UCB", 
                        forma: "Comprimido 500 mg",
                        indicaciones: "Epilepsia, convulsiones",
                        dosisHabitual: "1000-3000 mg/día en dos dosis",
                        efectosAdversos: "Somnolencia, mareo, infecciones nasofaríngeas"
                    },
                    { 
                        nombre: "Carbamazepina", 
                        nombreComercial: "Tegretol", 
                        categoria: "Anticonvulsivante", 
                        laboratorio: "Novartis", 
                        forma: "Comprimido 200 mg",
                        indicaciones: "Epilepsia, neuralgia del trigémino",
                        dosisHabitual: "200-1200 mg/día en dosis divididas",
                        efectosAdversos: "Mareo, nistagmo, ataxia, leucopenia"
                    }
                ],
                
                interacciones: [
                    {
                        medicamento1: "Warfarina",
                        medicamento2: "AINEs",
                        severidad: "fatal",
                        descripcion: "Aumento significativo del riesgo de hemorragia gastrointestinal. Los AINEs inhiben la agregación plaquetaria y dañan la mucosa gástrica, potenciando el efecto anticoagulante de la warfarina."
                    },
                    {
                        medicamento1: "IECA",
                        medicamento2: "Espironolactona",
                        severidad: "moderate",
                        descripcion: "Riesgo de hiperkalemia grave. Ambos medicamentos reducen la excreción de potasio, lo que puede llevar a niveles peligrosos, especialmente en pacientes con insuficiencia renal."
                    },
                    {
                        medicamento1: "Digoxina",
                        medicamento2: "Verapamilo",
                        severidad: "moderate",
                        descripcion: "El verapamilo aumenta los niveles séricos de digoxina al reducir su eliminación renal y aumentar su absorción, lo que puede llevar a toxicidad digitálica con náuseas, vómitos y arritmias."
                    },
                    {
                        medicamento1: "Metformina",
                        medicamento2: "Contraste yodado",
                        severidad: "moderate",
                        descripcion: "Riesgo de acidosis láctica. El contraste yodado puede causar nefropatía por contraste, reduciendo la eliminación de metformina y aumentando el riesgo de acidosis láctica, especialmente en pacientes con función renal comprometida."
                    },
                    {
                        medicamento1: "Insulina",
                        medicamento2: "Betabloqueantes",
                        severidad: "moderate",
                        descripcion: "Los betabloqueantes enmascaran los síntomas de hipoglucemia (taquicardia, temblores), dificultando el reconocimiento de niveles bajos de glucosa, lo que puede llevar a hipoglucemias graves no reconocidas."
                    },
                    {
                        medicamento1: "ISRS",
                        medicamento2: "IMAO",
                        severidad: "fatal",
                        descripcion: "Riesgo extremo de síndrome serotoninérgico, una condición potencialmente mortal caracterizada por hipertermia, rigidez muscular, taquicardia, alteraciones del estado mental y convulsiones."
                    },
                    {
                        medicamento1: "Benzodiacepinas",
                        medicamento2: "Opioides",
                        severidad: "fatal",
                        descripcion: "Depresión respiratoria severa y sinérgica. Ambos depresores del SNC potencian mutuamente sus efectos, aumentando significativamente el riesgo de apnea, hipoxia e insuficiencia respiratoria."
                    },
                    {
                        medicamento1: "Metotrexato",
                        medicamento2: "NSAIDs",
                        severidad: "moderate",
                        descripcion: "Aumento del riesgo de toxicidad por metotrexato. Los AINEs reducen la excreción renal de metotrexato, elevando sus niveles séricos y aumentando el riesgo de mielosupresión, mucositis y hepatotoxicidad."
                    },
                    {
                        medicamento1: "Atorvastatina",
                        medicamento2: "Macrólidos",
                        severidad: "moderate",
                        descripcion: "Los macrólidos (como la eritromicina) inhiben el metabolismo de las estatinas vía CYP3A4, aumentando significativamente sus niveles séricos y el riesgo de rabdomiólisis."
                    },
                    {
                        medicamento1: "Levotiroxina",
                        medicamento2: "Calcio",
                        severidad: "moderate",
                        descripcion: "El calcio reduce significativamente la absorción intestinal de levotiroxina. Debe administrarse con al menos 4 horas de separación para evitar la interferencia en el control del hipotiroidismo."
                    }
                ]
            };
            
            // Funciones de autenticación
            function login(email, password) {
                const usuario = db.usuarios.find(u => u.email === email && u.password === password);
                if (usuario) {
                    currentUser = usuario;
                    showPage('page-dashboard');
                    document.getElementById('userProfile').classList.add('active');
                    document.getElementById('userName').textContent = usuario.nombre;
                    document.getElementById('userSpecialty').textContent = usuario.especialidad;
                    document.getElementById('welcomeName').textContent = usuario.nombre.replace('Dr. ', '').replace('Dra. ', '');
                    document.getElementById('btn-login').style.display = 'none';
                    return true;
                }
                return false;
            }
            
            // Funciones de navegación
            function showPage(pageId) {
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                document.getElementById(pageId).classList.add('active');
            }
            
            // Inicialización
            document.addEventListener('DOMContentLoaded', function() {
                // Cargar medicamentos en el datalist
                const datalist = document.getElementById('medicamentosList');
                db.medicamentos.forEach(med => {
                    const option = document.createElement('option');
                    option.value = med.nombre;
                    datalist.appendChild(option);
                });
                
                // Evento de inicio de sesión
                document.getElementById('loginBtn').addEventListener('click', () => {
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    
                    if (login(email, password)) {
                        showPage('page-dashboard');
                    } else {
                        alert('Credenciales incorrectas. Use dr.perez@hospital.com / 123456');
                    }
                });
                
                // Enlace de registro
                document.getElementById('registerLink').addEventListener('click', (e) => {
                    e.preventDefault();
                    alert('Funcionalidad de registro no implementada en esta versión de demostración.');
                });
                
                // Navegación
                document.getElementById('btn-dashboard').addEventListener('click', () => {
                    if (currentUser) showPage('page-dashboard');
                });
                
                document.getElementById('btn-pacientes').addEventListener('click', () => {
                    if (currentUser) {
                        showPage('page-pacientes');
                        renderPacientes();
                    }
                });
                
                document.getElementById('btn-signos').addEventListener('click', () => {
                    if (currentUser) showPage('page-signos');
                });
                
                document.getElementById('btn-recetas').addEventListener('click', () => {
                    if (currentUser) showPage('page-recetas');
                });
                
                document.getElementById('btn-educacion').addEventListener('click', () => {
                    if (currentUser) showPage('page-educacion');
                });
                
                document.getElementById('btn-calculadoras').addEventListener('click', () => {
                    if (currentUser) showPage('page-calculadoras');
                });
                
                // Botón de nuevo paciente
                document.getElementById('btnNuevoPaciente').addEventListener('click', () => {
                    document.getElementById('panel-nuevo-paciente').classList.add('active');
                    document.querySelector('.modal-backdrop').classList.add('active');
                });
                
                // Guardar nuevo paciente
                document.getElementById('guardar-nuevo-paciente').addEventListener('click', () => {
                    const nombre = document.getElementById('nuevo-nombre').value;
                    const edad = document.getElementById('nuevo-edad').value;
                    const genero = document.getElementById('nuevo-genero').value;
                    const telefono = document.getElementById('nuevo-telefono').value;
                    const email = document.getElementById('nuevo-email').value;
                    const direccion = document.getElementById('nuevo-direccion').value;
                    const antecedentes = document.getElementById('nuevo-antecedentes').value;
                    const medicamentos = document.getElementById('nuevo-medicamentos').value;
                    
                    if (!nombre || !edad) {
                        alert('Por favor, complete al menos el nombre y la edad');
                        return;
                    }
                    
                    const nuevoPaciente = {
                        id: db.pacientes.length + 1,
                        nombre,
                        edad: parseInt(edad),
                        genero,
                        telefono,
                        email,
                        direccion,
                        antecedentes,
                        medicamentos,
                        diagnosticos: [],
                        signos: []
                    };
                    
                    db.pacientes.push(nuevoPaciente);
                    renderPacientes();
                    
                    // Cerrar panel
                    document.getElementById('panel-nuevo-paciente').classList.remove('active');
                    document.querySelector('.modal-backdrop').classList.remove('active');
                    
                    // Limpiar formulario
                    document.getElementById('nuevo-nombre').value = '';
                    document.getElementById('nuevo-edad').value = '';
                    document.getElementById('nuevo-telefono').value = '';
                    document.getElementById('nuevo-email').value = '';
                    document.getElementById('nuevo-direccion').value = '';
                    document.getElementById('nuevo-antecedentes').value = '';
                    document.getElementById('nuevo-medicamentos').value = '';
                    
                    alert('Paciente registrado correctamente');
                });
                
                // Buscar pacientes
                document.getElementById('searchPacientes').addEventListener('input', () => {
                    renderPacientes();
                });
                
                // Cálculo de IMC
                document.getElementById('talla').addEventListener('change', () => {
                    const peso = parseFloat(document.getElementById('peso').value);
                    const talla = parseFloat(document.getElementById('talla').value) / 100;
                    if (peso && talla) {
                        const imc = peso / (talla * talla);
                        document.getElementById('imc').value = imc.toFixed(1);
                    }
                });
                
                document.getElementById('peso').addEventListener('change', () => {
                    const peso = parseFloat(document.getElementById('peso').value);
                    const talla = parseFloat(document.getElementById('talla').value) / 100;
                    if (peso && talla) {
                        const imc = peso / (talla * talla);
                        document.getElementById('imc').value = imc.toFixed(1);
                    }
                });
                
                // Guardar signos vitales
                document.getElementById('guardarSignos').addEventListener('click', () => {
                    const fecha = document.getElementById('fecha-signos').value;
                    const temperatura = document.getElementById('temperatura').value;
                    const sistolica = document.getElementById('sistolica').value;
                    const diastolica = document.getElementById('diastolica').value;
                    const fc = document.getElementById('fc').value;
                    const fr = document.getElementById('fr').value;
                    const spo2 = document.getElementById('spo2').value;
                    const peso = document.getElementById('peso').value;
                    const talla = document.getElementById('talla').value;
                    const imc = document.getElementById('imc').value;
                    const notas = document.getElementById('notas-signos').value;
                    
                    if (!fecha || !sistolica || !diastolica) {
                        alert('Por favor, complete al menos la fecha y la presión arterial');
                        return;
                    }
                    
                    // Aquí se guardarían los datos en la base de datos
                    console.log('Signos vitales guardados:', { fecha, temperatura, sistolica, diastolica, fc, fr, spo2, peso, talla, imc, notas });
                    alert('Signos vitales guardados correctamente');
                    
                    // Limpiar formulario
                    document.getElementById('fecha-signos').value = '';
                    document.getElementById('temperatura').value = '';
                    document.getElementById('sistolica').value = '';
                    document.getElementById('diastolica').value = '';
                    document.getElementById('fc').value = '';
                    document.getElementById('fr').value = '';
                    document.getElementById('spo2').value = '';
                    document.getElementById('peso').value = '';
                    document.getElementById('talla').value = '';
                    document.getElementById('imc').value = '';
                    document.getElementById('notas-signos').value = '';
                    
                    // Actualizar historial
                    renderHistorialSignos();
                });
                
                // Agregar medicamento a receta
                document.getElementById('agregarMedicamento').addEventListener('click', () => {
                    const medicamento = document.getElementById('medicamento').value;
                    const dosis = document.getElementById('dosis').value;
                    const via = document.getElementById('via').value;
                    const frecuencia = document.getElementById('frecuencia').value;
                    const duracion = document.getElementById('duracion').value;
                    const indicaciones = document.getElementById('indicaciones').value;
                    
                    if (!medicamento || !dosis) {
                        alert('Por favor, complete al menos el medicamento y la dosis');
                        return;
                    }
                    
                    // Verificar interacciones antes de agregar
                    const pacienteSeleccionado = document.querySelector('#selectorRecetas .patient-pill.active').textContent;
                    const paciente = db.pacientes.find(p => p.nombre.includes(pacienteSeleccionado.split(' ')[0]));
                    
                    if (paciente && paciente.medicamentos) {
                        const medicamentosActuales = paciente.medicamentos.split(', ').map(m => m.trim());
                        
                        for (let medActual of medicamentosActuales) {
                            const interaccion = db.interacciones.find(i => 
                                (i.medicamento1.toLowerCase() === medicamento.toLowerCase() && i.medicamento2.toLowerCase() === medActual.toLowerCase()) ||
                                (i.medicamento1.toLowerCase() === medActual.toLowerCase() && i.medicamento2.toLowerCase() === medicamento.toLowerCase())
                            );
                            
                            if (interaccion) {
                                const confirmacion = confirm(`ADVERTENCIA: Posible interacción entre ${medicamento} y ${medActual}.\n\n${interaccion.severidad.toUpperCase()}: ${interaccion.descripcion}\n\n¿Desea continuar de todas formas?`);
                                if (!confirmacion) {
                                    return;
                                }
                            }
                        }
                    }
                    
                    const medicamentoCard = document.createElement('div');
                    medicamentoCard.className = 'medication-card';
                    medicamentoCard.innerHTML = `
                        <h4>${medicamento}</h4>
                        <p>${dosis}, vía ${via}, ${frecuencia}, durante ${duracion} días</p>
                        <p><strong>Indicaciones:</strong> ${indicaciones}</p>
                        <div class="medication-meta">
                            <span>Prescrito: ${new Date().toLocaleDateString()}</span>
                            <span>Estado: Activo</span>
                        </div>
                        <button class="btn-secondary eliminar-medicamento" style="margin-top: var(--spacer-md);">Eliminar</button>
                    `;
                    
                    document.getElementById('listaMedicamentos').appendChild(medicamentoCard);
                    
                    // Evento para eliminar medicamento
                    medicamentoCard.querySelector('.eliminar-medicamento').addEventListener('click', () => {
                        medicamentoCard.remove();
                    });
                    
                    // Limpiar formulario
                    document.getElementById('medicamento').value = '';
                    document.getElementById('dosis').value = '';
                    document.getElementById('frecuencia').value = 'una_vez';
                    document.getElementById('duracion').value = '';
                    document.getElementById('indicaciones').value = '';
                });
                
                // Funcionalidad de pestañas en paneles
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        const tabContainer = tab.closest('.tabs');
                        const panel = tab.closest('.panel');
                        const tabName = tab.dataset.tab;
                        
                        // Desactivar todas las pestañas
                        tabContainer.querySelectorAll('.tab').forEach(t => {
                            t.classList.remove('active');
                        });
                        
                        // Activar la pestaña seleccionada
                        tab.classList.add('active');
                        
                        // Ocultar todos los contenidos
                        panel.querySelectorAll('.tab-content').forEach(content => {
                            content.classList.remove('active');
                        });
                        
                        // Mostrar el contenido correspondiente
                        document.getElementById(`tab-${tabName}`).classList.add('active');
                    });
                });
                
                // Cerrar paneles
                document.querySelectorAll('.close-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        btn.closest('.panel').classList.remove('active');
                        document.querySelector('.modal-backdrop').classList.remove('active');
                    });
                });
                
                // Modal backdrop
                document.querySelector('.modal-backdrop').addEventListener('click', () => {
                    document.querySelectorAll('.panel').forEach(panel => {
                        panel.classList.remove('active');
                    });
                    document.querySelector('.modal-backdrop').classList.remove('active');
                });
                
                // Inicializar gráficos
                initCharts();
            });
            
            // Funciones auxiliares
            function renderPacientes() {
                const grid = document.getElementById('pacientesGrid');
                grid.innerHTML = '';
                
                const searchTerm = document.getElementById('searchPacientes').value.toLowerCase();
                const pacientesFiltrados = db.pacientes.filter(p => 
                    p.nombre.toLowerCase().includes(searchTerm) ||
                    p.diagnosticos.some(d => d.diagnostico.toLowerCase().includes(searchTerm)) ||
                    p.medicamentos.toLowerCase().includes(searchTerm)
                );
                
                pacientesFiltrados.forEach(paciente => {
                    const card = document.createElement('div');
                    card.className = 'dashboard-card';
                    card.innerHTML = `
                        <div class="dashboard-card-header">
                            <h3 class="dashboard-card-title">${paciente.nombre}</h3>
                            <div class="level-badge">${paciente.edad}</div>
                        </div>
                        <div style="display: grid; grid-template-columns: auto 1fr; gap: var(--spacer-sm);">
                            <span style="font-weight: 500;">Género:</span><span>${paciente.genero === 'masculino' ? 'Masculino' : paciente.genero === 'femenino' ? 'Femenino' : 'Otro'}</span>
                            <span style="font-weight: 500;">Diagnóstico:</span><span>${paciente.diagnosticos.length > 0 ? paciente.diagnosticos[0].diagnostico : 'Sin diagnóstico'}</span>
                            <span style="font-weight: 500;">Última visita:</span><span>${paciente.signos.length > 0 ? paciente.signos[0].fecha : 'Sin registros'}</span>
                        </div>
                        <button class="btn-secondary ver-historia" style="margin-top: var(--spacer-md);">Ver historia completa</button>
                    `;
                    
                    card.querySelector('.ver-historia').addEventListener('click', () => {
                        // Aquí se abriría la historia clínica del paciente
                        document.getElementById('panel-historia').classList.add('active');
                        document.querySelector('.modal-backdrop').classList.add('active');
                        
                        // Actualizar información del paciente en el panel
                        document.getElementById('info-nombre').textContent = paciente.nombre;
                        document.getElementById('info-edad').textContent = `${paciente.edad} años`;
                        document.getElementById('info-genero').textContent = paciente.genero === 'masculino' ? 'Masculino' : paciente.genero === 'femenino' ? 'Femenino' : 'Otro';
                        document.getElementById('info-telefono').textContent = paciente.telefono;
                        document.getElementById('info-email').textContent = paciente.email;
                        document.getElementById('info-alergias').textContent = paciente.antecedentes.includes('alergia') ? paciente.antecedentes : 'Ninguna';
                        document.getElementById('info-enfermedades').textContent = paciente.antecedentes;
                        document.getElementById('info-cirugias').textContent = paciente.antecedentes.includes('cirugía') ? paciente.antecedentes : 'Ninguna';
                        document.getElementById('info-medicamentos').textContent = paciente.medicamentos;
                        
                        // Actualizar tabla de diagnósticos
                        const tablaDiagnosticos = document.getElementById('tabla-diagnosticos');
                        tablaDiagnosticos.innerHTML = '';
                        paciente.diagnosticos.forEach(diag => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${diag.fecha}</td>
                                <td>${diag.codigo}</td>
                                <td>${diag.diagnostico}</td>
                                <td>${diag.tipo}</td>
                                <td>${diag.estado}</td>
                            `;
                            tablaDiagnosticos.appendChild(row);
                        });
                    });
                    
                    grid.appendChild(card);
                });
            }
            
            function renderHistorialSignos() {
                const timeline = document.getElementById('timelineSignos');
                timeline.innerHTML = '';
                
                // Usamos datos del paciente actual (por simplicidad)
                const paciente = db.pacientes[0];
                
                paciente.signos.forEach(signo => {
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    item.innerHTML = `
                        <div class="timeline-date">${signo.fecha}</div>
                        <div class="timeline-content">
                            <h4 style="margin: 0 0 var(--spacer-xs) 0;">Signos Vitales Registrados</h4>
                            <p style="margin: 0;"><strong>TA:</strong> ${signo.sistolica}/${signo.diastolica} mmHg | <strong>FC:</strong> ${signo.fc} lpm | <strong>Temp:</strong> ${signo.temp}°C | <strong>SpO2:</strong> ${signo.spo2}%</p>
                        </div>
                    `;
                    timeline.appendChild(item);
                });
            }
            
            function initCharts() {
                // Gráfico de signos vitales
                const vitalsCtx = document.getElementById('vitalsChart').getContext('2d');
                new Chart(vitalsCtx, {
                    type: 'line',
                     {
                        labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                        datasets: [
                            {
                                label: 'Presión Sistólica',
                                 [135, 138, 132, 130, 134, 132],
                                borderColor: '#ea4335',
                                backgroundColor: 'rgba(234, 67, 53, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Presión Diastólica',
                                 [88, 86, 85, 84, 86, 85],
                                borderColor: '#34a853',
                                backgroundColor: 'rgba(52, 168, 83, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Frecuencia Cardíaca',
                                 [78, 76, 78, 75, 77, 78],
                                borderColor: '#4285f4',
                                backgroundColor: 'rgba(66, 133, 244, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Evolución de Signos Vitales'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false
                            }
                        }
                    }
                });
                
                // Event listener para cambiar el tipo de gráfica de signos vitales
                document.getElementById('tipo-grafica').addEventListener('change', function() {
                    const tipo = this.value;
                    let nuevosDatos = [];
                    let label = '';
                    let color = '';
                    
                    switch(tipo) {
                        case 'presion':
                            nuevosDatos = [126, 130, 135, 128, 132];
                            label = 'Presión Sistólica (mmHg)';
                            color = '#1a73e8';
                            break;
                        case 'fc':
                            nuevosDatos = [78, 82, 85, 80, 79];
                            label = 'Frecuencia Cardíaca (lpm)';
                            color = '#ea4335';
                            break;
                        case 'temp':
                            nuevosDatos = [36.8, 36.5, 37.1, 36.7, 36.9];
                            label = 'Temperatura (°C)';
                            color = '#fbbc04';
                            break;
                        case 'spo2':
                            nuevosDatos = [98, 97, 96, 97, 98];
                            label = 'Saturación de Oxígeno (%)';
                            color = '#34a853';
                            break;
                    }
                    
                    // Actualizar el gráfico (simplificado para demostración)
                    alert(`Gráfico actualizado para mostrar ${label}`);
                });
            }
            
            // Calculadoras médicas
            document.getElementById('calcular-estado-vih').addEventListener('click', () => {
                const cd4 = parseInt(document.getElementById('cd4-input').value);
                const cargaViral = parseInt(document.getElementById('carga-viral-input').value);
                const sintomas = document.getElementById('sintomas-input').value;
                const enTratamiento = document.getElementById('tratamiento-input').value;
                
                if (!cd4 || !cargaViral) {
                    alert('Por favor, complete todos los campos');
                    return;
                }
                
                let estado = '';
                let explicacion = '';
                let recomendaciones = [];
                
                if (cd4 > 500 && cargaViral < 50) {
                    estado = 'ÓPTIMO';
                    explicacion = 'Excelente control virológico y respuesta inmunológica.';
                    recomendaciones = [
                        'Continuar con el tratamiento actual',
                        'Mantener seguimiento cada 6 meses',
                        'Promover adherencia al tratamiento'
                    ];
                } else if (cd4 >= 350 && cargaViral < 200) {
                    estado = 'ESTABLE';
                    explicacion = 'Control virológico adecuado y respuesta inmunológica aceptable.';
                    recomendaciones = [
                        'Continuar con el tratamiento actual',
                        'Monitorizar posibles efectos secundarios',
                        'Reforzar adherencia al tratamiento'
                    ];
                } else if (cd4 >= 200 && cd4 < 350) {
                    estado = 'NECESITA ATENCIÓN';
                    explicacion = 'Inmunosupresión moderada. Se requiere evaluación cuidadosa.';
                    recomendaciones = [
                        'Evaluar adherencia al tratamiento',
                        'Considerar posibles interacciones medicamentosas',
                        'Descartar comorbilidades'
                    ];
                } else {
                    estado = 'CRÍTICO';
                    explicacion = 'Inmunosupresión severa y alto riesgo de complicaciones.';
                    recomendaciones = [
                        'Evaluación médica urgente',
                        'Considerar cambio de regimen antirretroviral',
                        'Descartar infecciones oportunistas'
                    ];
                }
                
                // Ajustar según síntomas
                if (sintomas === 'moderados') {
                    estado += ' | CON SÍNTOMAS MODERADOS';
                    recomendaciones.push('Manejo sintomático de las manifestaciones presentes');
                } else if (sintomas === 'severos') {
                    estado += ' | CON SÍNTOMAS SEVEROS';
                    recomendaciones.push('Evaluación urgente para descartar infecciones oportunistas');
                }
                
                // Ajustar si no está en tratamiento
                if (enTratamiento === 'no') {
                    estado += ' | SIN TRATAMIENTO';
                    recomendaciones.unshift('Iniciar tratamiento antirretroviral lo antes posible');
                }
                
                // Mostrar resultados
                document.getElementById('estado-inmunologico').textContent = estado;
                document.getElementById('explicacion-estado').textContent = explicacion;
                const listaRecomendaciones = document.getElementById('lista-recomendaciones');
                listaRecomendaciones.innerHTML = '';
                recomendaciones.forEach(recomendacion => {
                    const li = document.createElement('li');
                    li.textContent = recomendacion;
                    listaRecomendaciones.appendChild(li);
                });
                
                document.getElementById('resultado-calculadora-vih').style.display = 'block';
            });
            
            // Calculadora IMC
            document.getElementById('calcular-imc').addEventListener('click', () => {
                const peso = parseFloat(document.getElementById('imc-peso').value);
                const altura = parseFloat(document.getElementById('imc-altura').value) / 100; // Convertir a metros
                
                if (!peso || !altura) {
                    alert('Por favor, complete todos los campos');
                    return;
                }
                
                const imc = peso / (altura * altura);
                let categoria = '';
                
                if (imc < 18.5) {
                    categoria = 'Bajo peso';
                } else if (imc < 25) {
                    categoria = 'Peso normal';
                } else if (imc < 30) {
                    categoria = 'Sobrepeso';
                } else if (imc < 35) {
                    categoria = 'Obesidad grado I';
                } else if (imc < 40) {
                    categoria = 'Obesidad grado II';
                } else {
                    categoria = 'Obesidad grado III (mórbida)';
                }
                
                document.getElementById('valor-imc').textContent = imc.toFixed(1);
                document.getElementById('categoria-imc').textContent = categoria;
                document.getElementById('resultado-imc').style.display = 'block';
            });
            
            // Calculadora de presión arterial
            document.getElementById('calcular-presion').addEventListener('click', () => {
                const sistolica = parseInt(document.getElementById('sistolica-presion').value);
                const diastolica = parseInt(document.getElementById('diastolica-presion').value);
                
                if (!sistolica || !diastolica) {
                    alert('Por favor, complete todos los campos');
                    return;
                }
                
                let clasificacion = '';
                let interpretacion = '';
                
                if (sistolica < 120 && diastolica < 80) {
                    clasificacion = 'Presión normal';
                    interpretacion = 'Su presión arterial está en el rango normal. Mantenga hábitos saludables.';
                } else if (sistolica < 130 && diastolica < 85) {
                    clasificacion = 'Prehipertensión';
                    interpretacion = 'Presión arterial en el límite superior del rango normal. Recomendado seguimiento y cambios en estilo de vida.';
                } else if (sistolica < 140 || diastolica < 90) {
                    clasificacion = 'Hipertensión grado 1';
                    interpretacion = 'Evaluar necesidad de tratamiento farmacológico. Implementar cambios en estilo de vida.';
                } else if (sistolica < 160 || diastolica < 100) {
                    clasificacion = 'Hipertensión grado 2';
                    interpretacion = 'Se recomienda tratamiento farmacológico junto con cambios en estilo de vida.';
                } else {
                    clasificacion = 'Hipertensión grado 3';
                    interpretacion = 'Hipertensión severa. Requiere tratamiento farmacológico inmediato y seguimiento cercano.';
                }
                
                document.getElementById('clasificacion-presion').textContent = clasificacion;
                document.getElementById('interpretacion-presion').textContent = interpretacion;
                document.getElementById('resultado-presion').style.display = 'block';
            });
            
            // Calculadora de filtrado glomerular
            document.getElementById('calcular-fg').addEventListener('click', () => {
                const creatinina = parseFloat(document.getElementById('creatinina-input').value);
                const edad = parseInt(document.getElementById('edad-renal').value);
                const peso = parseFloat(document.getElementById('peso-renal').value);
                const genero = document.getElementById('genero-renal').value;
                
                if (!creatinina || !edad || !peso) {
                    alert('Por favor, complete todos los campos');
                    return;
                }
                
                let fg = 0;
                if (genero === 'hombre') {
                    fg = ((140 - edad) * peso) / (72 * creatinina);
                } else {
                    fg = ((140 - edad) * peso * 0.85) / (72 * creatinina);
                }
                
                let clasificacion = '';
                if (fg >= 90) {
                    clasificacion = 'Función renal normal';
                } else if (fg >= 60) {
                    clasificacion = 'Daño renal leve (G2-G3a)';
                } else if (fg >= 30) {
                    clasificacion = 'Enfermedad renal moderada a severa (G3b-G4)';
                } else {
                    clasificacion = 'Insuficiencia renal terminal (G5)';
                }
                
                document.getElementById('valor-fg').textContent = fg.toFixed(0);
                document.getElementById('clasificacion-fg').textContent = clasificacion;
                document.getElementById('resultado-fg').style.display = 'block';
            });
            
            // Calculadora de Child-Pugh
            document.getElementById('calcular-child-pugh').addEventListener('click', () => {
                const bilirrubina = parseFloat(document.getElementById('bilirrubina-input').value);
                const albumina = parseFloat(document.getElementById('albumina-input').value);
                const inr = parseFloat(document.getElementById('inr-input').value);
                const ascitis = parseInt(document.getElementById('ascitis-input').value);
                const encefalopatia = parseInt(document.getElementById('encefalopatia-input').value);
                
                if (!bilirrubina || !albumina || !inr) {
                    alert('Por favor, complete todos los campos');
                    return;
                }
                
                // Puntuación según valores
                let puntosBilirrubina = 0;
                if (bilirrubina < 2) puntosBilirrubina = 1;
                else if (bilirrubina < 3) puntosBilirrubina = 2;
                else puntosBilirrubina = 3;
                
                let puntosAlbumina = 0;
                if (albumina > 3.5) puntosAlbumina = 1;
                else if (albumina > 2.8) puntosAlbumina = 2;
                else puntosAlbumina = 3;
                
                let puntosInr = 0;
                if (inr < 1.7) puntosInr = 1;
                else if (inr < 2.3) puntosInr = 2;
                else puntosInr = 3;
                
                const total = puntosBilirrubina + puntosAlbumina + puntosInr + ascitis + encefalopatia;
                
                let clasificacion = '';
                if (total <= 6) {
                    clasificacion = 'Child-Pugh A (Enfermedad hepática compensada)';
                } else if (total <= 9) {
                    clasificacion = 'Child-Pugh B (Enfermedad hepática descompensada)';
                } else {
                    clasificacion = 'Child-Pugh C (Enfermedad hepática avanzada)';
                }
                
                document.getElementById('puntuacion-child-pugh').textContent = total;
                document.getElementById('clasificacion-child-pugh').textContent = clasificacion;
                document.getElementById('resultado-child-pugh').style.display = 'block';
            });
            
            // Calculadora de pérdida de peso
            document.getElementById('calcular-perdida-peso').addEventListener('click', () => {
                const pesoActual = parseFloat(document.getElementById('peso-actual-input').value);
                const pesoHabitual = parseFloat(document.getElementById('peso-habitual-input').value);
                
                if (!pesoActual || !pesoHabitual) {
                    alert('Por favor, complete todos los campos');
                    return;
                }
                
                const porcentaje = ((pesoHabitual - pesoActual) / pesoHabitual) * 100;
                const perdidaRedondeada = porcentaje.toFixed(1);
                let interpretacion = '';
                
                if (porcentaje < 5) {
                    interpretacion = 'Pérdida de peso insignificante.';
                } else if (porcentaje < 10) {
                    interpretacion = 'Pérdida de peso moderada. Monitorizar.';
                } else {
                    interpretacion = 'Pérdida de peso significativa. Evaluar causas y considerar intervención nutricional.';
                }
                
                document.getElementById('porcentaje-perdida-peso').textContent = perdidaRedondeada;
                document.getElementById('interpretacion-perdida-peso').textContent = interpretacion;
                document.getElementById('resultado-perdida-peso').style.display = 'block';
            });
            
            // Verificación de interacciones medicamentosas
            document.querySelector('#tab-busqueda .btn-primary').addEventListener('click', () => {
                const med1 = document.getElementById('medicamento1').value.trim().toLowerCase();
                const med2 = document.getElementById('medicamento2').value.trim().toLowerCase();
                
                if (!med1 || !med2) {
                    alert('Por favor, ingrese los nombres de dos medicamentos');
                    return;
                }
                
                // Buscar interacción
                const interaccion = db.interacciones.find(i => 
                    (i.medicamento1.toLowerCase() === med1 && i.medicamento2.toLowerCase() === med2) ||
                    (i.medicamento1.toLowerCase() === med2 && i.medicamento2.toLowerCase() === med1)
                );
                
                const resultadoDiv = document.getElementById('resultado-interaccion');
                const detalleInteraccion = document.getElementById('detalle-interaccion');
                
                if (interaccion) {
                    const severidadClass = interaccion.severidad === 'fatal' ? 'fatal' : 
                                         interaccion.severidad === 'moderate' ? 'moderate' : 'leve';
                    detalleInteraccion.innerHTML = `<span class="${severidadClass}">${interaccion.severidad.toUpperCase()}:</span> ${interaccion.descripcion}`;
                } else {
                    detalleInteraccion.innerHTML = `No se encontraron interacciones significativas entre <strong>${med1}</strong> y <strong>${med2}</strong>.<br>Siempre consulte con un farmacéutico para una evaluación completa.`;
                }
                
                resultadoDiv.style.display = 'block';
            });
            
            // Agregar medicamento al combinador
            document.getElementById('agregar-medicamento').addEventListener('click', () => {
                const contenedor = document.getElementById('medicamentos-combinador');
                const numMedicamentos = contenedor.querySelectorAll('.form-row').length;
                
                if (numMedicamentos >= 5) {
                    alert('Máximo 5 medicamentos permitidos');
                    return;
                }
                
                const nuevoMedicamento = document.createElement('div');
                nuevoMedicamento.className = 'form-row';
                nuevoMedicamento.innerHTML = `
                    <div class="form-group">
                        <label>Medicamento ${numMedicamentos + 1}</label>
                        <input type="text" placeholder="Nombre del medicamento" list="medicamentosList">
                    </div>
                    <div class="form-group">
                        <label>Dosis</label>
                        <input type="text" placeholder="Ej: 50 mg cada 24h">
                    </div>
                `;
                
                contenedor.appendChild(nuevoMedicamento);
            });
            
            // Combinador de medicamentos
            document.querySelector('#panel-combinador .btn-primary').addEventListener('click', () => {
                const inputs = document.querySelectorAll('#medicamentos-combinador input[type="text"]');
                const medicamentos = [];
                
                // Recoger nombres de medicamentos (cada par de inputs: nombre y dosis)
                for (let i = 0; i < inputs.length; i += 2) {
                    if (inputs[i].value.trim()) {
                        medicamentos.push(inputs[i].value.trim());
                    }
                }
                
                if (medicamentos.length < 2) {
                    alert('Ingrese al menos 2 medicamentos');
                    return;
                }
                
                // Buscar interacciones entre todos los medicamentos
                const interaccionesEncontradas = [];
                for (let i = 0; i < medicamentos.length; i++) {
                    for (let j = i + 1; j < medicamentos.length; j++) {
                        const med1 = medicamentos[i].toLowerCase();
                        const med2 = medicamentos[j].toLowerCase();
                        
                        const interaccion = db.interacciones.find(i => 
                            (i.medicamento1.toLowerCase() === med1 && i.medicamento2.toLowerCase() === med2) ||
                            (i.medicamento1.toLowerCase() === med2 && i.medicamento2.toLowerCase() === med1)
                        );
                        
                        if (interaccion) {
                            interaccionesEncontradas.push(interaccion);
                        }
                    }
                }
                
                const resultadoDiv = document.getElementById('resultado-combinador');
                const detalleCombinador = document.getElementById('detalle-combinador');
                
                if (interaccionesEncontradas.length > 0) {
                    detalleCombinador.innerHTML = '<h4>Interacciones encontradas:</h4>';
                    interaccionesEncontradas.forEach(interaccion => {
                        const severidadClass = interaccion.severidad === 'fatal' ? 'fatal' : 
                                             interaccion.severidad === 'moderate' ? 'moderate' : 'leve';
                        detalleCombinador.innerHTML += `
                            <div class="interaction-item">
                                <h4>${interaccion.medicamento1} + ${interaccion.medicamento2}</h4>
                                <p><span class="${severidadClass}">${interaccion.severidad.toUpperCase()}:</span> ${interaccion.descripcion}</p>
                            </div>
                        `;
                    });
                } else {
                    detalleCombinador.innerHTML = `
                        <p>No se encontraron interacciones significativas entre los medicamentos ingresados.</p>
                        <p>Recuerde que esta es una herramienta de screening y no reemplaza la evaluación de un profesional.</p>
                    `;
                }
                
                resultadoDiv.style.display = 'block';
            });
        </script>
    </div>
</body>
</html>
```
