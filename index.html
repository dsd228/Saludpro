```html
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicación Médica con Almacenamiento Local</title>
    <style>
        :root {
            --primary: #667eea;
            --primary-dark: #5a67d8;
            --secondary: #f56565;
            --success: #48bb78;
            --warning: #f6ad55;
            --danger: #e53e3e;
            --info: #3498db;
            --light: #f7fafc;
            --dark: #2d3748;
            --text: #4a5568;
            --text-light: #718096;
            --text-lighter: #a0aec0;
            --bg: #ffffff;
            --bg-light: #f7fafc;
            --bg-dark: #edf2f7;
            --border: #e2e8f0;
            --border-light: #cbd5e0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --radius: 0.375rem;
            --radius-lg: 0.5rem;
            --radius-full: 9999px;
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 1200px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
        }

        .header {
            background: #4a5568;
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .nav-container {
            display: flex;
            height: calc(100% - 60px);
        }

        .sidebar {
            width: 280px;
            background: #f7fafc;
            padding: 20px;
            border-right: 1px solid #e2e8f0;
            overflow-y: auto;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #4a5568;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 600;
        }

        .cat-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            border: none;
            background: transparent;
            color: #4a5568;
            cursor: pointer;
            border-radius: 10px;
            margin-bottom: 10px;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
            width: 100%;
            text-align: left;
            position: relative;
        }

        .cat-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 6px rgba(102, 126, 234, 0.2);
        }

        .cat-btn:hover:not(.active) {
            background: #e2e8f0;
            transform: translateX(4px);
        }

        .cat-btn i {
            width: 22px;
            text-align: center;
            font-size: 16px;
        }

        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: #f8fafc;
        }

        .search-container {
            margin-bottom: 25px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            outline: none;
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1);
            transform: translateY(-1px);
        }

        .card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            overflow: hidden;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #f7fafc;
            padding: 18px 24px;
            border-bottom: 1px solid #e2e8f0;
        }

        .card-icon {
            color: var(--primary);
            font-size: 20px;
        }

        .card-title {
            font-size: 19px;
            font-weight: 600;
            color: #2d3748;
        }

        .card-body {
            padding: 24px;
        }

        .card-content {
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 20px;
            font-size: 15px;
        }

        .steps-list {
            list-style: none;
            margin: 20px 0;
        }

        .steps-list li {
            padding: 10px 0;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            border-bottom: 1px dashed #e2e8f0;
            padding-bottom: 10px;
        }

        .steps-list li:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .steps-list li:before {
            content: "";
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--primary);
            margin-top: 10px;
            flex-shrink: 0;
        }

        .notes {
            background-color: rgba(249, 115, 22, 0.1);
            border-left: 4px solid #f97316;
            padding: 18px;
            border-radius: 0 10px 10px 0;
            margin: 20px 0;
            font-size: 14px;
            border: 1px solid rgba(249, 115, 22, 0.2);
        }

        .notes i {
            color: #f97316;
            margin-right: 10px;
        }

        .visual-reference {
            margin: 20px 0;
            text-align: center;
        }

        .visual-reference img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .visual-reference img:hover {
            transform: scale(1.02);
        }

        .visual-reference .caption {
            font-size: 14px;
            color: #718096;
            margin-top: 10px;
            font-style: italic;
            text-align: center;
        }

        .source {
            font-size: 14px;
            color: #718096;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .source i {
            color: var(--primary);
        }

        .source a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .source a:hover {
            text-decoration: underline;
        }

        .last-updated {
            font-size: 13px;
            color: #a0aec0;
            margin-left: 10px;
        }

        .tab-container {
            margin-top: 25px;
        }

        .tab-buttons {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 25px;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
        }

        .tab-btn {
            padding: 12px 20px;
            background: #f7fafc;
            border: none;
            color: #718096;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            color: var(--primary);
            background: white;
            border-bottom: 3px solid var(--primary);
            font-weight: 600;
        }

        .tab-btn:hover:not(.active) {
            color: #4a5568;
            background: #edf2f7;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .disease-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            overflow: hidden;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .disease-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
        }

        .disease-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f7fafc;
            padding: 18px 24px;
            border-bottom: 1px solid #e2e8f0;
        }

        .disease-title {
            font-size: 19px;
            font-weight: 600;
            color: #2d3748;
        }

        .disease-prevalence {
            font-size: 14px;
            color: #718096;
            background: #e2e8f0;
            padding: 6px 10px;
            border-radius: 8px;
            font-weight: 500;
        }

        .disease-description {
            padding: 24px;
            color: #4a5568;
            line-height: 1.7;
            font-size: 15px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 18px;
            margin: 20px 0;
        }

        .info-item {
            background: #f7fafc;
            padding: 14px;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .info-item:hover {
            background: #edf2f7;
            border-color: #cbd5e0;
        }

        .info-label {
            font-size: 14px;
            color: #718096;
            margin-bottom: 6px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-label i {
            color: var(--primary);
            font-size: 14px;
        }

        .info-value {
            color: #2d3748;
            font-size: 15px;
            line-height: 1.5;
        }

        .image-gallery {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .image-item {
            flex: 1;
            min-width: 220px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .image-item:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .image-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 10px;
        }

        .image-item .caption {
            padding: 8px;
            background: white;
            text-align: center;
            font-size: 13px;
            color: #718096;
            border-top: 1px solid #e2e8f0;
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }

        .resource-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            padding: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            height: 100%;
        }

        .resource-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
        }

        .resource-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .resource-title i {
            color: var(--primary);
        }

        .resource-description {
            color: #4a5568;
            font-size: 14px;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .resource-category {
            font-size: 12px;
            color: #718096;
            background: #e2e8f0;
            padding: 5px 10px;
            border-radius: 8px;
            display: inline-block;
            margin-bottom: 10px;
        }

        .resource-link {
            display: inline-block;
            padding: 10px 16px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            width: 100%;
        }

        .resource-link:hover {
            background: #5a67d8;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .progress-container {
            margin: 25px 0;
        }

        .quiz-container {
            margin: 25px 0;
        }

        .quiz-question {
            font-size: 16px;
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 18px;
            line-height: 1.5;
        }

        .quiz-options {
            list-style: none;
        }

        .quiz-option {
            padding: 12px 18px;
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
        }

        .quiz-option:hover {
            background: #edf2f7;
            border-color: var(--primary);
            transform: translateX(6px);
        }

        .quiz-option.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            font-weight: 500;
        }

        .quiz-feedback {
            margin: 20px 0;
            padding: 18px;
            border-radius: 10px;
            font-size: 15px;
            line-height: 1.5;
        }

        .quiz-feedback.correct {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            color: #166534;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #991b1b;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quiz-feedback i {
            font-size: 18px;
            flex-shrink: 0;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
            transform: translateY(-1px);
        }

        .vitals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px;
            margin: 25px 0;
        }

        .vital-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .vital-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .vital-label {
            font-size: 15px;
            color: #718096;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .vital-value {
            font-size: 28px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 4px;
        }

        .vital-unit {
            font-size: 14px;
            color: #718096;
        }

        .normal-range {
            font-size: 13px;
            color: #a0aec0;
            margin-top: 6px;
            padding-top: 6px;
            border-top: 1px dashed #e2e8f0;
        }

        .controls {
            margin: 20px 0;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 10px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: #5a67d8;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 18px 24px;
            background: var(--primary);
            color: white;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateY(-100px);
            opacity: 0;
            transition: all 0.4s ease;
            font-weight: 500;
            min-width: 280px;
            text-align: center;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification.success {
            background: #48bb78;
        }

        .notification.error {
            background: #e53e3e;
        }

        @media (max-width: 1024px) {
            .container {
                max-width: 95%;
                height: 95vh;
            }
            
            .sidebar {
                width: 240px;
            }
        }

        @media (max-width: 768px) {
            .container {
                max-width: 100%;
                height: 100vh;
                border-radius: 0;
            }
            
            .nav-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
                height: auto;
                max-height: 30vh;
                overflow-y: auto;
            }
            
            .main-content {
                max-height: calc(100vh - 200px);
                padding: 20px;
            }
            
            .header h1 {
                font-size: 20px;
            }
            
            .card {
                border-radius: 12px;
            }
            
            .card-header {
                padding: 15px 20px;
            }
            
            .card-body {
                padding: 20px;
            }
            
            .resources-grid {
                grid-template-columns: 1fr;
            }
            
            .vitals-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 18px;
            }
            
            .sidebar-header {
                font-size: 16px;
            }
            
            .cat-btn {
                padding: 12px 14px;
                font-size: 14px;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .card-header {
                padding: 12px 16px;
            }
            
            .card-body {
                padding: 16px;
            }
            
            .search-input {
                padding: 12px 16px;
                font-size: 15px;
            }
            
            .notification {
                right: 10px;
                left: 10px;
                min-width: auto;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Aplicación Médica de Referencia</h1>
        </div>
        
        <div class="nav-container">
            <div class="sidebar">
                <div class="sidebar-header">
                    <i class="fas fa-th-large"></i>
                    <h3>Funcionalidades</h3>
                </div>
                <button class="cat-btn active" data-cat="emergencias">
                    <i class="fas fa-ambulance"></i>
                    <span>Emergencias Médicas</span>
                </button>
                <button class="cat-btn" data-cat="farmacologia">
                    <i class="fas fa-pills"></i>
                    <span>Farmacología</span>
                </button>
                <button class="cat-btn" data-cat="procedimientos">
                    <i class="fas fa-procedures"></i>
                    <span>Procedimientos</span>
                </button>
                <button class="cat-btn" data-cat="enfermedades">
                    <i class="fas fa-disease"></i>
                    <span>Enfermedades</span>
                </button>
                <button class="cat-btn" data-cat="nutricion">
                    <i class="fas fa-apple-alt"></i>
                    <span>Nutrición</span>
                </button>
                <button class="cat-btn" data-cat="infecciones">
                    <i class="fas fa-virus"></i>
                    <span>Control de Infecciones</span>
                </button>
                <button class="cat-btn" data-cat="movilizacion">
                    <i class="fas fa-walking"></i>
                    <span>Movilización</span>
                </button>
                <button class="cat-btn" data-cat="rcp">
                    <i class="fas fa-heart-pulse"></i>
                    <span>RCP</span>
                </button>
                <button class="cat-btn" data-cat="recursos">
                    <i class="fas fa-book-medical"></i>
                    <span>Recursos</span>
                </button>
                <button class="cat-btn" data-cat="simulador">
                    <i class="fas fa-vr-cardboard"></i>
                    <span>Simulador</span>
                </button>
                <button class="cat-btn" data-cat="evaluacion">
                    <i class="fas fa-clipboard-check"></i>
                    <span>Evaluación</span>
                </button>
                <button class="cat-btn" data-cat="reumatologia">
                    <i class="fas fa-bone"></i>
                    <span>Reumatología</span>
                </button>
                <button class="cat-btn" data-cat="gastroenterologia">
                    <i class="fas fa-stomach"></i>
                    <span>Gastroenterología</span>
                </button>
                <button class="cat-btn" data-cat="nefrologia">
                    <i class="fas fa-kidneys"></i>
                    <span>Nefrología</span>
                </button>
                <button class="cat-btn" data-cat="endocrinologia">
                    <i class="fas fa-brain"></i>
                    <span>Endocrinología</span>
                </button>
            </div>
            
            <div class="main-content">
                <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="Buscar en la aplicación...">
                </div>
                
                <div id="mainContent">
                    <!-- El contenido se cargará aquí dinámicamente -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">
        Cambios guardados correctamente
    </div>

    <script>
        // Datos médicos completos
        const medicalData = {
            emergencias: {
                title: "Emergencias Médicas",
                icon: "fa-ambulance",
                description: "Manejo de situaciones críticas y emergencias médicas",
                emergencies: [
                    {
                        id: "iam",
                        title: "Infarto Agudo de Miocardio con Elevación del Segmento ST",
                        icon: "fa-heart-pulse",
                        summary: "Manejo agudo del IAMCEST con intervención coronaria percutánea de urgencia.",
                        steps: [
                            "Activación del código infarto",
                            "ECG dentro de los primeros 10 minutos",
                            "Confirmación diagnóstica con elevación del ST",
                            "Establecer acceso venoso periférico",
                            "Administrar aspirina 162-325 mg masticable",
                            "Administrar clopidogrel 600 mg o ticagrelor 180 mg",
                            "Administrar heparina no fraccionada",
                            "Administrar analgesia (morfina)",
                            "Oxigenoterapia si saturación <90%",
                            "Activación del código infarto",
                            "Intervención coronaria percutánea de urgencia"
                        ],
                        notes: "El tiempo es músculo. El objetivo es puerta-balón <90 minutos. Monitoreo continuo de signos vitales y arritmias. Manejo agresivo de factores de riesgo cardiovascular.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/STEMI_electrocardiogram.jpg/800px-STEMI_electrocardiogram.jpg",
                                title: "ECG de IAMCEST",
                                description: "Elevación del segmento ST en derivaciones precordiales"
                            }
                        ],
                        source: {
                            name: "AHA Guidelines",
                            url: "https://www.heart.org/en/guidelines"
                        },
                        lastUpdated: "2023-09-15"
                    },
                    {
                        id: "sepsis",
                        title: "Sepsis y Shock Séptico",
                        icon: "fa-bacteria",
                        summary: "Reconocimiento y manejo temprano de la sepsis para reducir la mortalidad.",
                        steps: [
                            "Identificación de criterios de SIRS",
                            "Obtención de hemocultivos",
                            "Administración de antibióticos empíricos en la primera hora",
                            "Reanimación con fluidos cristaloides (30 ml/kg)",
                            "Uso de vasopresores si persiste hipotensión",
                            "Control de la fuente de infección",
                            "Soporte de órganos fallo"
                        ],
                        notes: "Mortalidad 15-30%. Mejora con intervención temprana (<1 hora). Utilizar el bundle de 3 y 6 horas de la Surviving Sepsis Campaign.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Sepsis_pathophysiology.png/800px-Sepsis_pathophysiology.png",
                                title: "Fisiopatología de la Sepsis",
                                description: "Respuesta sistémica a la infección"
                            }
                        ],
                        source: {
                            name: "Surviving Sepsis Campaign",
                            url: "https://www.sccm.org/survivingsepsiscampaign"
                        },
                        lastUpdated: "2023-08-20"
                    },
                    {
                        id: "stroke",
                        title: "Ictus Isquémico",
                        icon: "fa-brain",
                        summary: "Manejo agudo del ictus isquémico con ventana terapéutica.",
                        steps: [
                            "Evaluación rápida con escala NIHSS",
                            "TC cerebral sin contraste en los primeros 20 minutos",
                            "Exclusión de hemorragia",
                            "Evaluación de ventana terapéutica (<4.5 horas)",
                            "Administración de trombolítico (tPA) si indicado",
                            "Transferencia a unidad de ictus",
                            "Manejo de factores de riesgo"
                        ],
                        notes: "El tiempo es cerebro. Objetivo puerta-aguja <60 minutos. Monitoreo neurológico continuo. Prevenir complicaciones.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/CT_brain_with_ischemic_stroke.jpg/800px-CT_brain_with_ischemic_stroke.jpg",
                                title: "TC de Ictus Isquémico",
                                description: "Área de hipodensidad en territorio vascular"
                            }
                        ],
                        source: {
                            name: "AHA/ASA Guidelines",
                            url: "https://www.heart.org/en/health-topics/stroke"
                        },
                        lastUpdated: "2023-07-10"
                    },
                    {
                        id: "asthma",
                        title: "Asma Aguda Grave",
                        icon: "fa-lungs",
                        summary: "Manejo de la exacerbación aguda del asma.",
                        steps: [
                            "Evaluación de severidad (PEF, saturación)",
                            "Oxigenoterapia para mantener saturación >94%",
                            "Nebsalbutamol 5mg + ipratropio 500mcg cada 20 minutos",
                            "Corticosteroides sistémicos (prednisona 40-50mg o metilprednisolona 125mg IV)",
                            "Magnesio sulfato IV si severo",
                            "Ventilación mecánica si fallo respiratorio"
                        ],
                        notes: "Monitorización continua. Identificar desencadenantes. Prevenir recaídas. Evaluación de riesgo de muerte súbita.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Asthma_attack_pathophysiology.png/800px-Asthma_attack_pathophysiology.png",
                                title: "Fisiopatología del Asma",
                                description: "Inflamación y obstrucción de vías aéreas"
                            }
                        ],
                        source: {
                            name: "GINA Guidelines",
                            url: "https://ginasthma.org"
                        },
                        lastUpdated: "2023-06-05"
                    },
                    {
                        id: "epoc",
                        title: "EPOC Aguda",
                        icon: "fa-lungs",
                        summary: "Manejo de la exacerbación aguda de la enfermedad pulmonar obstructiva crónica.",
                        steps: [
                            "Evaluación inicial de la severidad",
                            "Terapia broncodilatadora (beta-2 agonistas, anticolinérgicos)",
                            "Terapia con corticosteroides sistémicos",
                            "Terapia antimicrobiana si indicado",
                            "Oxigenoterapia controlada (mantener SpO2 88-92%)",
                            "Soporte ventilatorio no invasivo si indicado"
                        ],
                        notes: "Utilizar escalas de evaluación objetiva. Considerar intubación si empeora.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Asthma_attack_management.jpg/800px-Asthma_attack_management.jpg",
                                title: "Manejo de Asma Aguda",
                                description: "Algoritmo de manejo"
                            }
                        ],
                        source: {
                            name: "GOLD Guidelines",
                            url: "https://goldcopd.org"
                        },
                        lastUpdated: "2023-11-10"
                    }
                ]
            },
            farmacologia: {
                title: "Farmacología",
                icon: "fa-pills",
                description: "Información sobre medicamentos y sus usos clínicos",
                medications: [
                    {
                        id: "aspirin",
                        name: "Aspirina",
                        class: "Antiagregante plaquetario",
                        indications: ["IAM agudo", "Accidente cerebrovascular isquémico", "Prevención secundaria cardiovascular"],
                        dosage: "75-100 mg/día (mantenimiento), 162-325 mg (carga)",
                        contraindications: ["Alergia a AINEs", "Úlcera péptica activa", "Hemorragia activa"],
                        sideEffects: ["Hemorragia gastrointestinal", "Acufeno", "Asma inducida por AINEs"],
                        pharmacokinetics: "Absorción rápida en estómago e intestino. Metabolismo hepático. Vida media 15-20 min (dosis baja), 3-6 h (dosis alta).",
                        warnings: "Riesgo de síndrome de Reye en niños. Interacción con anticoagulantes. Evitar en tercer trimestre de embarazo.",
                        storage: "Conservar a temperatura ambiente, protegido de la humedad.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Aspirin_200mg.jpg/800px-Aspirin_200mg.jpg"],
                        sources: [
                            {
                                name: "FDA",
                                url: "https://www.fda.gov/drugs"
                            },
                            {
                                name: "Micromedex",
                                url: "https://www.micromedexsolutions.com"
                            }
                        ],
                        lastUpdated: "2023-09-01"
                    },
                    {
                        id: "metformin",
                        name: "Metformina",
                        class: "Biguanida",
                        indications: ["Diabetes mellitus tipo 2", "Síndrome de ovario poliquístico"],
                        dosage: "500-2000 mg/día en dosis divididas. Dosis máxima 2550 mg/día.",
                        contraindications: ["Insuficiencia renal (TFG <30 ml/min)", "Acidosis metabólica", "Shock"],
                        sideEffects: ["Náuseas, diarrea", "Dolor abdominal", "Deficiencia de vitamina B12 con uso prolongado"],
                        pharmacokinetics: "No se metaboliza. Excreción renal. Vida media 6.2 h.",
                        warnings: "Riesgo de acidosis láctica (raro pero grave). Suspender antes de estudios con contraste y en situaciones de riesgo de isquemia tisular.",
                        storage: "Conservar a temperatura ambiente, protegido de la humedad.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Metformin_500mg_tablets.jpg/800px-Metformin_500mg_tablets.jpg"],
                        sources: [
                            {
                                name: "FDA",
                                url: "https://www.fda.gov/drugs"
                            },
                            {
                                name: "UpToDate",
                                url: "https://www.uptodate.com"
                            }
                        ],
                        lastUpdated: "2023-08-15"
                    },
                    {
                        id: "insulin",
                        name: "Insulina",
                        class: "Hormona hipoglucemiante",
                        indications: ["Diabetes mellitus tipo 1", "Diabetes mellitus tipo 2 descompensada", "Cetoacidosis diabética"],
                        dosage: "Variable según necesidades. Inicio con 0.5-1 unidad/kg/día. Ajuste según glucemias.",
                        contraindications: ["Hipoglucemia", "Alergia a componentes"],
                        sideEffects: ["Hipoglucemia", "Aumento de peso", "Lipodistrofia en sitio de inyección"],
                        pharmacokinetics: "Absorción variable según tipo y sitio de inyección. No se metaboliza por el hígado.",
                        warnings: "Riesgo de hipoglucemia grave. Necesidad de educación del paciente. Rotación de sitios de inyección.",
                        storage: "Insulina en uso: hasta 28 días a temperatura ambiente. No usar si congelada o turbia (excepto insulinas NPH).",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Insulin_pen.jpg/800px-Insulin_pen.jpg"],
                        sources: [
                            {
                                name: "ADA",
                                url: "https://www.diabetes.org"
                            },
                            {
                                name: "UpToDate",
                                url: "https://www.uptodate.com"
                            }
                        ],
                        lastUpdated: "2023-07-20"
                    },
                    {
                        id: "clopidogrel",
                        name: "Clopidogrel",
                        class: "Antiagregante plaquetario",
                        indications: ["IAM agudo", "Accidente cerebrovascular isquémico", "Enfermedad arterial periférica"],
                        dosage: "75 mg/día (mantenimiento), 300-600 mg (carga)",
                        contraindications: ["Alergia", "Hemorragia activa", "Accidente cerebrovascular hemorrágico"],
                        sideEffects: ["Hemorragia", "Diarrea", "Rash cutáneo"],
                        pharmacokinetics: "Prodroga que requiere activación hepática por CYP2C19. Vida media 6 horas.",
                        warnings: "Efectividad reducida en metabolizadores pobres de CYP2C19, precaución con otros antiagregantes/anticoagulantes",
                        storage: "Conservar a temperatura ambiente, protegido de la luz",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Clopidogrel_tablet.jpg/800px-Clopidogrel_tablet.jpg"],
                        sources: [
                            {
                                name: "FDA",
                                url: "https://www.fda.gov"
                            },
                            {
                                name: "Lexicomp",
                                url: "https://www.lexicomp.com"
                            }
                        ],
                        lastUpdated: "2023-11-18"
                    },
                    {
                        id: "atorvastatin",
                        name: "Atorvastatina",
                        class: "Estatina",
                        indications: ["Dislipidemia", "Prevención cardiovascular", "Enfermedad cardiovascular establecida"],
                        dosage: "10-80 mg/día",
                        contraindications: ["Hipersensibilidad", "Enfermedad hepática activa", "Embarazo"],
                        sideEffects: ["Mialgia", "Elevación de transaminasas", "Diabetes"],
                        pharmacokinetics: "Metabolismo hepático por CYP3A4. Vida media 14-20 horas.",
                        warnings: "Riesgo de miopatía y rabdomiólisis. Monitorear función hepática. Interacciones con inhibidores de CYP3A4.",
                        storage: "Conservar a temperatura ambiente",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Atorvastatin_tablets.jpg/800px-Atorvastatin_tablets.jpg"],
                        sources: [
                            {
                                name: "FDA",
                                url: "https://www.fda.gov"
                            },
                            {
                                name: "UpToDate",
                                url: "https://www.uptodate.com"
                            }
                        ],
                        lastUpdated: "2023-11-15"
                    }
                ],
                interactions: [
                    {
                        drugs: ["Warfarina", "Aspirina"],
                        severity: "Severe",
                        mechanism: "Aumento del riesgo de hemorragia por efectos antiplaquetarios y anticoagulantes combinados",
                        recommendation: "Evitar la combinación si es posible. Si es necesaria, monitorear INR de cerca y considerar profilaxis de protección gástrica."
                    },
                    {
                        drugs: ["Simvastatina", "Itraconazol"],
                        severity: "Severe",
                        mechanism: "Itraconazol inhibe CYP3A4 aumentando significativamente los niveles de simvastatina",
                        recommendation: "Evitar la combinación. Usar alternativas como pravastatina o rosuvastatina si es necesario."
                    },
                    {
                        drugs: ["Metformina", "Contraste yodado"],
                        severity: "Moderate",
                        mechanism: "Riesgo de acidosis láctica en pacientes con función renal comprometida",
                        recommendation: "Suspender metformina antes del procedimiento con contraste y reevaluar función renal antes de reiniciar."
                    }
                ]
            },
            procedimientos: {
                title: "Procedimientos",
                icon: "fa-procedures",
                description: "Guías para procedimientos médicos comunes",
                procedures: [
                    {
                        id: "lumbar_puncture",
                        title: "Punción Lumbar",
                        icon: "fa-bed",
                        summary: "Procedimiento para obtener líquido cefalorraquídeo.",
                        materials: ["Juego de punción lumbar", "Tubos para muestras", "Equipo estéril", "Anestesia local"],
                        steps: [
                            "Posición adecuada (lateral fetal o sentado)",
                            "Identificación del espacio intervertebral",
                            "Anestesia local",
                            "Inserción de la aguja",
                            "Recolección de muestras",
                            "Retiro de la aguja y apósito"
                        ],
                        notes: "Indicado para diagnóstico de meningitis, hemorragia subaracnoidea, entre otros. Complicación más común: cefalea post-punción.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Lumbar_puncture_position.jpg/800px-Lumbar_puncture_position.jpg",
                                title: "Posición para Punción Lumbar",
                                description: "Posición lateral fetal con rodillas hacia el pecho"
                            }
                        ],
                        source: {
                            name: "UpToDate",
                            url: "https://www.uptodate.com"
                        },
                        lastUpdated: "2023-09-10"
                    },
                    {
                        id: "peritoneal_dialysis",
                        title: "Diálisis Peritoneal",
                        icon: "fa-procedures",
                        summary: "Técnica de depuración extrarrenal que utiliza la membrana peritoneal.",
                        materials: ["Solución de diálisis", "Catéter peritoneal", "Equipo de intercambio", "Báscula"],
                        steps: [
                            "Evaluación del catéter",
                            "Lavado de manos y uso de mascarilla",
                            "Preparación del equipo",
                            "Drenaje del líquido anterior",
                            "Infusión de solución nueva",
                            "Cierre del sistema"
                        ],
                        notes: "Requiere entrenamiento del paciente. Prevenir infecciones del catéter y peritonitis.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Peritoneal_dialysis_exchange.jpg/800px-Peritoneal_dialysis_exchange.jpg",
                                title: "Intercambio de Diálisis Peritoneal",
                                description: "Procedimiento de intercambio de solución"
                            }
                        ],
                        source: {
                            name: "ISPD Guidelines",
                            url: "https://www.ispd.org"
                        },
                        lastUpdated: "2023-08-30"
                    },
                    {
                        id: "intubation",
                        title: "Intubación Orotraqueal",
                        icon: "fa-user-md",
                        summary: "Procedimiento para establecer vía aérea definitiva.",
                        materials: ["Laringoscopio", "Tubo endotraqueal", "Estilete", "Ambú", "Equipo de succión"],
                        steps: [
                            "Preoxigenación con mascarilla de reservorio",
                            "Posición adecuada (posición de olfateo)",
                            "Apertura de la vía aérea (maniobra de Sellick si indicado)",
                            "Visualización de cuerdas vocales con laringoscopio",
                            "Introducción del tubo endotraqueal",
                            "Confirmación de colocación correcta",
                            "Fijación del tubo"
                        ],
                        notes: "Complicaciones: trauma dental, intubación esofágica, hipoxemia. Confirmar siempre colocación con capnografía.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Endotracheal_intubation.jpg/800px-Endotracheal_intubation.jpg",
                                title: "Intubación Orotraqueal",
                                description: "Visualización de cuerdas vocales durante intubación"
                            }
                        ],
                        source: {
                            name: "Difficult Airway Society",
                            url: "https://www.das.uk.com"
                        },
                        lastUpdated: "2023-07-05"
                    },
                    {
                        id: "central_line",
                        title: "Colocación de Catéter Central",
                        icon: "fa-procedures",
                        summary: "Procedimiento para establecer acceso venoso central.",
                        materials: ["Kit de catéter central", "Equipo estéril", "Anestesia local", "Guías y dilatadores"],
                        steps: [
                            "Elección del sitio (yugular, subclavia, femoral)",
                            "Preparación estéril del campo",
                            "Anestesia local",
                            "Técnica de Seldinger",
                            "Confirmación de colocación con rayos X",
                            "Fijación del catéter"
                        ],
                        notes: "Complicaciones: neumotórax, hematoma, infección. Usar ultrasonido para guiar la colocación.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Central_line_placement.jpg/800px-Central_line_placement.jpg",
                                title: "Colocación de Catéter Central",
                                description: "Técnica de Seldinger bajo ultrasonido"
                            }
                        ],
                        source: {
                            name: "CDC Guidelines",
                            url: "https://www.cdc.gov/infectioncontrol/guidelines"
                        },
                        lastUpdated: "2023-10-15"
                    }
                ]
            },
            enfermedades: {
                title: "Enfermedades",
                icon: "fa-disease",
                description: "Información sobre enfermedades comunes y raras",
                diseases: [
                    {
                        id: "diabetes",
                        name: "Diabetes Mellitus",
                        prevalence: "9.3% global",
                        description: "Grupo de enfermedades metabólicas caracterizadas por hiperglucemia crónica debido a defectos en la secreción de insulina, acción de insulina o ambos.",
                        symptoms: ["Poliuria", "Polidipsia", "Pérdida de peso", "Fatiga", "Visión borrosa"],
                        diagnosis: ["Glucemia en ayunas ≥126 mg/dL", "HbA1c ≥6.5%", "Glucemia al azar ≥200 mg/dL con síntomas"],
                        treatment: ["Modificación de estilo de vida", "Metformina", "Insulina", "Otros hipoglucemiantes orales", "Educación del paciente"],
                        complications: ["Retinopatía diabética", "Nefropatía diabética", "Neuropatía diabética", "Enfermedad cardiovascular", "Pie diabético"],
                        prognosis: "Variable según control glucémico. Mejora con intervención temprana y control adecuado.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Diabetes_symptoms.png/800px-Diabetes_symptoms.png"],
                        sources: [
                            {
                                name: "WHO",
                                url: "https://www.who.int/health-topics/diabetes"
                            },
                            {
                                name: "ADA",
                                url: "https://www.diabetes.org"
                            }
                        ],
                        lastUpdated: "2023-09-20"
                    },
                    {
                        id: "tb",
                        name: "Tuberculosis",
                        prevalence: "10 millones/año",
                        description: "Enfermedad infecciosa causada por Mycobacterium tuberculosis que afecta principalmente los pulmones, pero puede afectar casi cualquier parte del cuerpo.",
                        symptoms: ["Tos crónica (>2 semanas)", "Hemoptisis", "Fiebre vespertina", "Sudores nocturnos", "Pérdida de peso"],
                        diagnosis: ["Radiografía de tórax", "Baciloscopia", "Cultivo", "Prueba molecular (Xpert MTB/RIF)", "Prueba de la tuberculina o IGRA"],
                        treatment: ["Esquema estándar 2HRZE/4HR", "Tratamiento supervisado", "Manejo de efectos adversos", "Terapia para TB resistente"],
                        complications: ["TB multidrogoresistente", "Diseminación miliar", "Meningitis tuberculosa", "Deterioro pulmonar crónico"],
                        prognosis: "Buena con tratamiento adecuado y completo. Mortalidad <5% con tratamiento. Mayor en formas resistentes.",
                        images: [
                            "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Tuberculosis_radiograph.jpg/800px-Tuberculosis_radiograph.jpg",
                            "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Acid_fast_stain_of_M._tuberculosis.jpg/800px-Acid_fast_stain_of_M._tuberculosis.jpg"
                        ],
                        sources: [
                            {
                                name: "WHO",
                                url: "https://www.who.int/teams/global-tuberculosis-programme"
                            },
                            {
                                name: "CDC",
                                url: "https://www.cdc.gov/tb"
                            }
                        ],
                        lastUpdated: "2023-08-30"
                    },
                    {
                        id: "malnutrition",
                        name: "Desnutrición",
                        prevalence: "820 millones personas",
                        description: "Condición que ocurre cuando el cuerpo no obtiene suficientes nutrientes para mantener tejidos y funciones corporales adecuadas.",
                        symptoms: ["Pérdida de peso", "Debilidad", "Edema", "Alteraciones cutáneas", "Retraso en la cicatrización"],
                        treatment: ["Nutrición oral", "Suplementos", "Nutrición enteral", "Nutrición parenteral", "Tratamiento de la causa subyacente"],
                        prognosis: "Mejora con intervención nutricional oportuna. La desnutrición aumenta complicaciones y mortalidad.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Malnutrition_child.jpg/800px-Malnutrition_child.jpg"],
                        sources: [
                            {
                                name: "ESPEN",
                                url: "https://www.espen.org/guidelines"
                            },
                            {
                                name: "ASPEN",
                                url: "https://www.nutritioncare.org"
                            }
                        ],
                        lastUpdated: "2023-07-15"
                    },
                    {
                        id: "hypothyroidism",
                        name: "Hipotiroidismo",
                        prevalence: "4-10% población",
                        description: "Condición caracterizada por una producción insuficiente de hormonas tiroideas por la glándula tiroides.",
                        symptoms: ["Fatiga", "Aumento de peso", "Intolerancia al frío", "Piel seca", "Depresión", "Estreñimiento"],
                        diagnosis: ["TSH elevada", "T4 libre baja", "Anticuerpos anti-tiroideos (en tiroiditis de Hashimoto)"],
                        treatment: ["Levotiroxina sódica", "Ajuste de dosis según TSH", "Control regular", "Educación al paciente"],
                        complications: ["Mixedema", "Enfermedad cardiovascular", "Infertilidad", "Problemas cognitivos"],
                        prognosis: "Excelente con tratamiento adecuado. La mayoría de los pacientes requieren tratamiento de por vida.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Myxedema_face.jpg/800px-Myxedema_face.jpg"],
                        sources: [
                            {
                                name: "ATA",
                                url: "https://www.thyroid.org"
                            },
                            {
                                name: "AACE",
                                url: "https://www.aace.com"
                            }
                        ],
                        lastUpdated: "2023-11-20"
                    }
                ]
            },
            nutricion: {
                title: "Nutrición",
                icon: "fa-apple-alt",
                description: "Técnicas y recomendaciones para el manejo nutricional",
                nutritionGuidelines: [
                    {
                        id: "enteral",
                        title: "Nutrición Enteral",
                        icon: "fa-utensils",
                        summary: "Administración de nutrientes a través del tracto gastrointestinal.",
                        indications: ["Imposibilidad de alimentación oral", "Malabsorción", "Necesidades nutricionales aumentadas", "Enfermedad inflamatoria intestinal"],
                        methods: ["Sonda nasogástrica", "Sonda nasoyeyunal", "Gastrostomía", "Yeyunostomía"],
                        complications: ["Aspiración", "Obstrucción de sonda", "Diarrea", "Intolerancia"],
                        monitoring: ["Tolerancia gástrica", "Volumen residual", "Electrolitos", "Balance hídrico", "Estado nutricional"],
                        notes: "Evaluar riesgo de aspiración. Iniciar lentamente. Monitorear tolerancia. Cambiar a vía oral cuando sea posible.",
                        source: {
                            name: "ESPEN Guidelines",
                            url: "https://www.espen.org"
                        },
                        lastUpdated: "2023-08-25"
                    },
                    {
                        id: "parenteral",
                        title: "Nutrición Parenteral",
                        icon: "fa-syringe",
                        summary: "Administración de nutrientes por vía intravenosa.",
                        indications: ["Fallo intestinal", "Fístulas digestivas de alto gasto", "Obstrucción intestinal", "Malabsorción severa"],
                        components: ["Soluciones de glucosa", "Lípidos", "Aminoácidos", "Electrolitos", "Vitaminas", "Oligoelementos"],
                        complications: ["Infección del catéter", "Síndrome de realimentación", "Alteraciones metabólicas", "Hígado graso"],
                        monitoring: ["Glucemia", "Electrolitos", "Función hepática", "Balance hídrico", "Signos de infección"],
                        notes: "Reservar para cuando la vía enteral no es posible. Prevenir complicaciones. Cambiar a vía enteral cuando sea posible.",
                        source: {
                            name: "ASPEN Guidelines",
                            url: "https://www.nutritioncare.org"
                        },
                        lastUpdated: "2023-07-30"
                    }
                ]
            },
            infecciones: {
                title: "Control de Infecciones",
                icon: "fa-virus",
                description: "Prevención y manejo de infecciones nosocomiales y comunitarias",
                procedures: [
                    {
                        id: "ppe",
                        title: "Uso de Equipos de Protección Personal",
                        icon: "fa-shield-virus",
                        summary: "Protocolo para el uso adecuado de EPP en situaciones de riesgo infeccioso.",
                        materials: ["Mascarilla N95", "Bata", "Guantes", "Gafas protectoras", "Careta"],
                        steps: [
                            "Lavado de manos",
                            "Colocación de bata",
                            "Colocación de mascarilla",
                            "Colocación de gafas/careta",
                            "Colocación de guantes",
                            "Retiro secuencial del EPP",
                            "Lavado de manos"
                        ],
                        notes: "Orden de colocación y retiro es crucial. Prevenir la contaminación cruzada. Entrenamiento regular del personal.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/PPE_donning_and_doffing.jpg/800px-PPE_donning_and_doffing.jpg",
                                title: "Colocación y Retiro de EPP",
                                description: "Secuencia adecuada para prevenir la contaminación"
                            }
                        ],
                        source: {
                            name: "CDC Guidelines",
                            url: "https://www.cdc.gov/infectioncontrol/guidelines"
                        },
                        lastUpdated: "2023-09-05"
                    },
                    {
                        id: "hand_hygiene",
                        title: "Higiene de Manos",
                        icon: "fa-hands-wash",
                        summary: "Técnica fundamental para prevenir la transmisión de patógenos.",
                        materials: ["Agua y jabón", "Solución alcohólica para manos", "Toallas de papel"],
                        steps: [
                            "Mojar manos con agua",
                            "Aplicar jabón",
                            "Frotar palmas",
                            "Frotar dorso de manos",
                            "Entrelazar dedos",
                            "Limpiar pulgares",
                            "Limpiar puntas de dedos",
                            "Aclarar con agua",
                            "Secar con toalla de papel",
                            "Cerrar grifo con toalla"
                        ],
                        notes: "Duración mínima 20 segundos. Indicaciones: antes y después de contacto con paciente, después de contacto con fluidos corporales, antes de procedimientos invasivos.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Hand_washing_steps.jpg/800px-Hand_washing_steps.jpg",
                                title: "Pasos para el Lavado de Manos",
                                description: "Técnica adecuada para la higiene de manos"
                            }
                        ],
                        source: {
                            name: "WHO Guidelines",
                            url: "https://www.who.int/gpsc/5may/en"
                        },
                        lastUpdated: "2023-08-10"
                    },
                    {
                        id: "isolation",
                        title: "Aislamientos Hospitalarios",
                        icon: "fa-door-closed",
                        summary: "Medidas para prevenir la transmisión de agentes infecciosos.",
                        types: [
                            {
                                name: "Aislamiento por contacto",
                                indications: ["MRSA", "Clostridium difficile", "VRE"],
                                measures: ["Bata y guantes", "Equipo dedicado", "Limpieza frecuente"]
                            },
                            {
                                name: "Aislamiento por gotas",
                                indications: ["Influenza", "COVID-19", "Meningitis"],
                                measures: ["Mascarilla quirúrgica", "Distancia >1m", "Ventilación adecuada"]
                            },
                            {
                                name: "Aislamiento por aire",
                                indications: ["Tuberculosis", "Varicela", "Sarampión"],
                                measures: ["Habitación con presión negativa", "Mascarilla N95", "Filtración HEPA"]
                            }
                        ],
                        notes: "La selección del aislamiento depende del agente infeccioso y su vía de transmisión.",
                        source: {
                            name: "CDC Guidelines",
                            url: "https://www.cdc.gov/infectioncontrol/guidelines"
                        },
                        lastUpdated: "2023-10-20"
                    }
                ]
            },
            movilizacion: {
                title: "Movilización",
                icon: "fa-walking",
                description: "Técnicas seguras para la movilización de pacientes",
                procedures: [
                    {
                        id: "traslado",
                        title: "Traslado de Paciente",
                        icon: "fa-procedures",
                        summary: "Técnica segura para el traslado de pacientes entre camas, camillas y sillas de ruedas.",
                        materials: ["Sábana", "Tablilla de transferencia", "Silla de ruedas", "Personal capacitado"],
                        steps: [
                            "Evaluación del paciente",
                            "Explicación del procedimiento",
                            "Posicionamiento adecuado",
                            "Técnica de transferencia",
                            "Verificación de seguridad",
                            "Documentación"
                        ],
                        notes: "Prevenir caídas y lesiones. Usar equipo adecuado. Trabajo en equipo coordinado.",
                        visualReferences: [
                            {
                                url: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Patient_transfer.jpg/800px-Patient_transfer.jpg",
                                title: "Traslado de Paciente",
                                description: "Técnica de transferencia segura"
                            }
                        ],
                        source: {
                            name: "OSHA Guidelines",
                            url: "https://www.osha.gov"
                        },
                        lastUpdated: "2023-07-25"
                    }
                ]
            },
            rcp: {
                title: "RCP",
                icon: "fa-heart-pulse",
                description: "Protocolos avanzados de reanimación cardiopulmonar",
                procedures: [
                    {
                        id: "basic_life_support",
                        title: "Soporte Básico de Vida",
                        icon: "fa-heart-pulse",
                        summary: "Manejo inicial del paro cardiorrespiratorio.",
                        materials: ["Desfibrilador", "Equipo de ventilación", "Medicamentos de paro"],
                        steps: [
                            "Verificar ausencia de respuesta",
                            "Activar código paro",
                            "Iniciar compresiones torácicas",
                            "Ventilación con balón y máscara",
                            "Desfibrilación según ritmo",
                            "Acceso venoso",
                            "Administración de medicamentos"
                        ],
                        notes: "Calidad de las compresiones es crucial. Evitar interrupciones. Rotar equipo cada 2 minutos.",
                        source: {
                            name: "AHA Guidelines",
                            url: "https://www.heart.org/en/guidelines"
                        },
                        lastUpdated: "2023-09-12"
                    },
                    {
                        id: "advanced_life_support",
                        title: "Soporte Avanzado de Vida",
                        icon: "fa-user-md",
                        summary: "Manejo avanzado del paro cardiorrespiratorio.",
                        materials: ["Desfibrilador", "Equipo de intubación", "Medicamentos de paro", "Equipo de soporte vital"],
                        steps: [
                            "Verificar ausencia de respuesta y respiración",
                            "Activar código paro",
                            "Iniciar RCP con compresiones torácicas",
                            "Ventilación con balón y máscara",
                            "Desfibrilación según ritmo",
                            "Acceso venoso y administración de medicamentos",
                            "Identificar y tratar causas reversibles"
                        ],
                        notes: "Calidad de las compresiones es crucial. Evitar interrupciones. Rotar equipo cada 2 minutos.",
                        source: {
                            name: "AHA Guidelines",
                            url: "https://www.heart.org/en/guidelines"
                        },
                        lastUpdated: "2023-09-12"
                    }
                ]
            },
            recursos: {
                title: "Recursos",
                icon: "fa-book-medical",
                description: "Recursos de referencia para profesionales de la salud",
                resources: [
                    {
                        title: "GINA Guidelines",
                        description: "Guías globales para el manejo del asma",
                        url: "https://ginasthma.org",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    },
                    {
                        title: "GOLD Guidelines",
                        description: "Guías para el manejo de la EPOC",
                        url: "https://goldcopd.org",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    },
                    {
                        title: "ATS Resources",
                        description: "Recursos de la Sociedad Americana de Neumología",
                        url: "https://www.thoracic.org",
                        icon: "fa-lungs",
                        category: "Referencia"
                    },
                    {
                        title: "CDC Guidelines",
                        description: "Guías para el control de infecciones",
                        url: "https://www.cdc.gov/infectioncontrol/guidelines",
                        icon: "fa-virus",
                        category: "Control de Infecciones"
                    },
                    {
                        title: "AHA Guidelines",
                        description: "Guías para reanimación cardiopulmonar",
                        url: "https://www.heart.org/en/guidelines",
                        icon: "fa-heart-pulse",
                        category: "RCP"
                    },
                    {
                        title: "WHO Guidelines",
                        description: "Guías para la higiene de manos",
                        url: "https://www.who.int/gpsc/5may/en",
                        icon: "fa-hands-wash",
                        category: "Control de Infecciones"
                    },
                    {
                        title: "ESPEN Guidelines",
                        description: "Guías para nutrición enteral",
                        url: "https://www.espen.org",
                        icon: "fa-utensils",
                        category: "Nutrición"
                    },
                    {
                        title: "ASPEN Guidelines",
                        description: "Guías para nutrición parenteral",
                        url: "https://www.nutritioncare.org",
                        icon: "fa-syringe",
                        category: "Nutrición"
                    },
                    {
                        title: "ISPD Guidelines",
                        description: "Guías para diálisis peritoneal",
                        url: "https://www.ispd.org",
                        icon: "fa-procedures",
                        category: "Procedimientos"
                    },
                    {
                        title: "Surviving Sepsis Campaign",
                        description: "Guías para el manejo de la sepsis",
                        url: "https://www.sccm.org/survivingsepsiscampaign",
                        icon: "fa-bacteria",
                        category: "Emergencias"
                    },
                    {
                        title: "ADA Standards of Care",
                        description: "Estándares de atención para diabetes",
                        url: "https://www.diabetes.org/standards",
                        icon: "fa-syringe",
                        category: "Endocrinología"
                    },
                    {
                        title: "KDIGO Guidelines",
                        description: "Guías para enfermedades renales",
                        url: "https://kdigo.org",
                        icon: "fa-book-medical",
                        category: "Nefrología"
                    },
                    {
                        title: "NKF Resources",
                        description: "Recursos de la Fundación Nacional del Riñón",
                        url: "https://www.kidney.org",
                        icon: "fa-stethoscope",
                        category: "Pacientes"
                    },
                    {
                        title: "ASN Journals",
                        description: "Revistas de la Sociedad de Nefrología",
                        url: "https://www.jasn.org",
                        icon: "fa-newspaper",
                        category: "Investigación"
                    },
                    {
                        title: "Epocrates",
                        description: "Referencia médica y dosificación de medicamentos",
                        url: "https://www.epocrates.com",
                        icon: "fa-mobile-alt",
                        category: "Profesionales"
                    },
                    {
                        title: "UpToDate",
                        description: "Base de datos clínica actualizada",
                        url: "https://www.uptodate.com",
                        icon: "fa-book-medical",
                        category: "Profesionales"
                    },
                    {
                        title: "CDC Emergency Guidelines",
                        description: "Guías para emergencias médicas",
                        url: "https://www.cdc.gov/emergencies",
                        icon: "fa-clinic-medical",
                        category: "Pacientes"
                    }
                ]
            },
            simulador: {
                title: "Simulador de Signos Vitales",
                icon: "fa-vr-cardboard",
                description: "Simulador interactivo de signos vitales para práctica y entrenamiento médico",
                vitals: [
                    { id: "heartRate", label: "Frecuencia Cardíaca", value: 75, unit: "lpm", normalRange: [60, 100] },
                    { id: "bloodPressure", label: "Presión Arterial", value: "120/80", unit: "mmHg", normalRange: [90, 140] },
                    { id: "oxygenSaturation", label: "Sat. Oxígeno", value: 98, unit: "%", normalRange: [95, 100] },
                    { id: "respiratoryRate", label: "Frecuencia Respiratoria", value: 16, unit: "rpm", normalRange: [12, 20] },
                    { id: "temperature", label: "Temperatura", value: 36.8, unit: "°C", normalRange: [36.1, 37.2] },
                    { id: "glucose", label: "Glucemia", value: 95, unit: "mg/dL", normalRange: [70, 100] }
                ],
                scenarios: [
                    {
                        id: "shock",
                        name: "Shock Séptico",
                        description: "Paciente con sepsis progresiva",
                        changes: {
                            heartRate: { value: 125, color: "red" },
                            bloodPressure: { value: "85/50", color: "red" },
                            oxygenSaturation: { value: 88, color: "orange" },
                            respiratoryRate: { value: 28, color: "orange" },
                            temperature: { value: 39.2, color: "red" },
                            glucose: { value: 180, color: "orange" }
                        }
                    },
                    {
                        id: "hypoglycemia",
                        name: "Hipoglucemia",
                        description: "Paciente diabético con hipoglucemia",
                        changes: {
                            heartRate: { value: 110, color: "orange" },
                            bloodPressure: { value: "110/70", color: "green" },
                            oxygenSaturation: { value: 97, color: "green" },
                            respiratoryRate: { value: 18, color: "green" },
                            temperature: { value: 36.5, color: "green" },
                            glucose: { value: 45, color: "red" }
                        }
                    },
                    {
                        id: "asthma",
                        name: "Asma Aguda",
                        description: "Exacerbación aguda de asma",
                        changes: {
                            heartRate: { value: 115, color: "orange" },
                            bloodPressure: { value: "135/85", color: "green" },
                            oxygenSaturation: { value: 90, color: "red" },
                            respiratoryRate: { value: 32, color: "red" },
                            temperature: { value: 37.0, color: "green" },
                            glucose: { value: 110, color: "green" }
                        }
                    },
                    {
                        id: "hypertension",
                        name: "Hipertensión",
                        description: "Paciente con hipertensión severa",
                        changes: {
                            heartRate: { value: 85, color: "green" },
                            bloodPressure: { value: "170/100", color: "orange" },
                            oxygenSaturation: { value: 97, color: "green" },
                            respiratoryRate: { value: 18, color: "green" },
                            temperature: { value: 36.9, color: "green" },
                            glucose: { value: 105, color: "green" }
                        }
                    },
                    {
                        id: "hypotension",
                        name: "Hipotensión",
                        description: "Paciente con hipotensión",
                        changes: {
                            heartRate: { value: 110, color: "orange" },
                            bloodPressure: { value: "85/55", color: "red" },
                            oxygenSaturation: { value: 93, color: "orange" },
                            respiratoryRate: { value: 24, color: "orange" },
                            temperature: { value: 36.7, color: "green" },
                            glucose: { value: 90, color: "green" }
                        }
                    },
                    {
                        id: "fever",
                        name: "Fiebre",
                        description: "Paciente con fiebre alta",
                        changes: {
                            heartRate: { value: 95, color: "green" },
                            bloodPressure: { value: "125/80", color: "green" },
                            oxygenSaturation: { value: 96, color: "green" },
                            respiratoryRate: { value: 20, color: "green" },
                            temperature: { value: 38.9, color: "red" },
                            glucose: { value: 115, color: "green" }
                        }
                    }
                ]
            },
            evaluacion: {
                title: "Evaluación y Progreso",
                icon: "fa-clipboard-check",
                description: "Sistema de evaluación y seguimiento de tu progreso en el aprendizaje",
                quizzes: {
                    curaciones: [
                        {
                            question: "¿Cuál es el primer paso en la curación de una herida quirúrgica?",
                            options: [
                                "Aplicar el antiséptico",
                                "Lavado de manos y colocación de guantes",
                                "Retirar el apósito anterior",
                                "Evaluar características de la herida"
                            ],
                            correct: 1
                        },
                        {
                            question: "¿Qué solución se recomienda para limpiar la mayoría de las heridas?",
                            options: [
                                "Agua oxigenada",
                                "Solución salina fisiológica",
                                "Alcohol etílico",
                                "Povidona yodada"
                            ],
                            correct: 1
                        }
                    ],
                    cardiologia: [
                        {
                            question: "¿Cuál es el primer paso en el manejo del IAMCEST?",
                            options: [
                                "Administrar aspirina",
                                "Confirmación diagnóstica con ECG",
                                "Establecer acceso venoso",
                                "Administrar clopidogrel"
                            ],
                            correct: 1
                        },
                        {
                            question: "¿Cuál es el objetivo de puerta-balón en IAMCEST?",
                            options: [
                                "<30 minutos",
                                "<60 minutos",
                                "<90 minutos",
                                "<120 minutos"
                            ],
                            correct: 2
                        }
                    ]
                },
                progress: {
                    scores: {},
                    completedQuizzes: []
                }
            },
            reumatologia: {
                title: "Reumatología",
                icon: "fa-bone",
                description: "Diagnóstico y tratamiento de enfermedades reumáticas",
                diseases: [
                    {
                        id: "arthritis",
                        name: "Artritis Reumatoide",
                        prevalence: "0.5-1% población",
                        description: "Enfermedad autoinmune sistémica que afecta principalmente las articulaciones, caracterizada por inflamación sinovial crónica.",
                        symptoms: ["Dolor articular simétrico", "Rigidez matutina >1 hora", "Hinchazón articular", "Limitación funcional", "Síntomas sistémicos"],
                        diagnosis: ["Criterios ACR/EULAR", "Factor reumatoide positivo", "Anti-CCP positivo", "Elevación de PCR/VSG", "Hallazgos radiológicos"],
                        treatment: ["DMARDs convencionales (metotrexato)", "DMARDs biológicos (anti-TNF)", "Corticosteroides", "AINEs", "Terapia física"],
                        complications: ["Erosiones óseas", "Compromiso extraarticular", "Enfermedad cardiovascular", "Osteoporosis"],
                        prognosis: "Variable. Mejora con tratamiento temprano y agresivo. Objetivo: remisión o baja actividad de enfermedad.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Rheumatoid_arthritis_hand.jpg/800px-Rheumatoid_arthritis_hand.jpg"],
                        sources: [
                            {
                                name: "ACR Guidelines",
                                url: "https://www.rheumatology.org"
                            },
                            {
                                name: "EULAR Guidelines",
                                url: "https://www.eular.org"
                            }
                        ],
                        lastUpdated: "2023-10-15"
                    }
                ],
                resources: [
                    {
                        title: "ACR Guidelines",
                        description: "Guías de la Asociación Americana de Reumatología",
                        url: "https://www.rheumatology.org",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    },
                    {
                        title: "EULAR Guidelines",
                        description: "Guías de la Liga Europea contra el Reumatismo",
                        url: "https://www.eular.org",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    }
                ]
            },
            gastroenterologia: {
                title: "Gastroenterología",
                icon: "fa-stomach",
                description: "Diagnóstico y tratamiento de enfermedades digestivas",
                diseases: [
                    {
                        id: "ibd",
                        name: "Enfermedad Inflamatoria Intestinal",
                        prevalence: "0.3-0.5% población",
                        description: "Grupo de trastornos caracterizados por inflamación crónica del tracto gastrointestinal, incluyendo enfermedad de Crohn y colitis ulcerosa.",
                        symptoms: ["Dolor abdominal", "Diarrhea crónica", "Hematoquecia", "Pérdida de peso", "Fiebre"],
                        diagnosis: ["Endoscopia con biopsia", "Imagenología (RM, TC)", "Laboratorio (PCR, VSG, calprotectina fecal)", "Hallazgos patológicos"],
                        treatment: ["Aminosalicilatos", "Corticosteroides", "Inmunomoduladores", "Biologicos", "Nutrición enteral", "Cirugía"],
                        complications: ["Estenosis", "Fístulas", "Abscesos", "Cáncer colorrectal", "Malabsorción"],
                        prognosis: "Curso crónico con recaídas y remisiones. Objetivo: remisión clínica y endoscópica. Mejora con tratamiento biológico.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Crohns_disease_endoscopy.jpg/800px-Crohns_disease_endoscopy.jpg"],
                        sources: [
                            {
                                name: "ACG Guidelines",
                                url: "https://gi.org"
                            },
                            {
                                name: "ECCO Guidelines",
                                url: "https://www.ecco-ibd.eu"
                            }
                        ],
                        lastUpdated: "2023-09-25"
                    }
                ],
                resources: [
                    {
                        title: "ACG Guidelines",
                        description: "Guías de la Asociación Americana de Gastroenterología",
                        url: "https://gi.org",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    },
                    {
                        title: "ECCO Guidelines",
                        description: "Guías de la Organización Europea de Colitis y Enfermedad de Crohn",
                        url: "https://www.ecco-ibd.eu",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    }
                ]
            },
            nefrologia: {
                title: "Nefrología",
                icon: "fa-kidneys",
                description: "Diagnóstico y tratamiento de enfermedades renales",
                diseases: [
                    {
                        id: "ckd",
                        name: "Enfermedad Renal Crónica",
                        prevalence: "10-15% población",
                        description: "Pérdida progresiva de la función renal durante un período de meses o años, definida por un TFG <60 ml/min/1.73m² durante >3 meses.",
                        symptoms: ["Asintomática inicialmente", "Fatiga", "Edema", "Hipertensión", "Alteraciones urinarias"],
                        diagnosis: ["TFG calculado", "Albuminuria", "Imagenología renal", "Biopsia renal si indicado"],
                        treatment: ["Control de presión arterial", "Control glucémico", "Inhibidores de la ECA/ARA II", "Dieta renal", "Preparación para diálisis"],
                        complications: ["Enfermedad cardiovascular", "Anemia", "Osteodistrofia renal", "Acidosis metabólica", "Uremia"],
                        prognosis: "Variable según etapa y causa. Objetivo: retrasar progresión. Diálisis o trasplante en etapa terminal.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Kidney_failure_diagram.jpg/800px-Kidney_failure_diagram.jpg"],
                        sources: [
                            {
                                name: "KDIGO Guidelines",
                                url: "https://kdigo.org"
                            },
                            {
                                name: "NKF Guidelines",
                                url: "https://www.kidney.org"
                            }
                        ],
                        lastUpdated: "2023-11-05"
                    }
                ],
                resources: [
                    {
                        title: "KDIGO Guidelines",
                        description: "Guías para enfermedades renales",
                        url: "https://kdigo.org",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    },
                    {
                        title: "NKF Resources",
                        description: "Recursos de la Fundación Nacional del Riñón",
                        url: "https://www.kidney.org",
                        icon: "fa-stethoscope",
                        category: "Pacientes"
                    },
                    {
                        title: "ASN Journals",
                        description: "Revistas de la Sociedad de Nefrología",
                        url: "https://www.jasn.org",
                        icon: "fa-newspaper",
                        category: "Investigación"
                    }
                ]
            },
            endocrinologia: {
                title: "Endocrinología",
                icon: "fa-brain",
                description: "Diagnóstico y tratamiento de trastornos endocrinos",
                diseases: [
                    {
                        id: "diabetes",
                        name: "Diabetes Mellitus Tipo 2",
                        prevalence: "9.3% global",
                        description: "Trastorno metabólico caracterizado por resistencia a la insulina y déficit relativo de insulina, llevando a hiperglucemia crónica.",
                        symptoms: ["Poliuria", "Polidipsia", "Pérdida de peso", "Fatiga", "Visión borrosa", "Infecciones recurrentes"],
                        diagnosis: ["Glucemia en ayunas ≥126 mg/dL", "HbA1c ≥6.5%", "Glucemia al azar ≥200 mg/dL con síntomas", "Prueba de tolerancia oral a la glucosa"],
                        treatment: ["Modificación de estilo de vida", "Metformina", "SGLT2 inhibidores", "GLP-1 agonistas", "Insulina", "Educación del paciente"],
                        complications: ["Retinopatía diabética", "Nefropatía diabética", "Neuropatía diabética", "Enfermedad cardiovascular", "Pie diabético"],
                        prognosis: "Variable según control glucémico. Mejora con intervención temprana y control adecuado. Enfoque en prevención de complicaciones.",
                        images: ["https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Diabetes_symptoms.png/800px-Diabetes_symptoms.png"],
                        sources: [
                            {
                                name: "ADA Standards",
                                url: "https://www.diabetes.org/standards"
                            },
                            {
                                name: "EASD Guidelines",
                                url: "https://www.easd.org"
                            }
                        ],
                        lastUpdated: "2023-10-18"
                    }
                ],
                resources: [
                    {
                        title: "ADA Standards of Care",
                        description: "Estándares de atención para diabetes",
                        url: "https://www.diabetes.org/standards",
                        icon: "fa-syringe",
                        category: "Endocrinología"
                    },
                    {
                        title: "EASD Guidelines",
                        description: "Guías de la Asociación Europea para el Estudio de la Diabetes",
                        url: "https://www.easd.org",
                        icon: "fa-book-medical",
                        category: "Referencia"
                    }
                ]
            }
        };

        // Estado actual
        let currentCategory = 'emergencias';
        let searchTimeout = null;
        let currentQuiz = null;
        let currentQuizIndex = 0;

        // Funciones de utilidad
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function saveToLocalStorage() {
            try {
                localStorage.setItem('medicalAppData', JSON.stringify(medicalData));
                localStorage.setItem('medicalAppState', JSON.stringify({
                    currentCategory: currentCategory,
                    searchHistory: document.getElementById('searchInput').value
                }));
                showNotification('Cambios guardados correctamente');
            } catch (e) {
                console.error('Error saving to localStorage:', e);
                showNotification('Error al guardar los datos', 'error');
            }
        }

        function loadFromLocalStorage() {
            try {
                const savedData = localStorage.getItem('medicalAppData');
                if (savedData) {
                    Object.assign(medicalData, JSON.parse(savedData));
                }
                
                const savedState = localStorage.getItem('medicalAppState');
                if (savedState) {
                    const state = JSON.parse(savedState);
                    currentCategory = state.currentCategory;
                }
            } catch (e) {
                console.error('Error loading from localStorage:', e);
            }
        }

        // Funciones de renderizado
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('es-ES', options);
        }

        function renderEmergenciasContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.emergencies.map(emergency => `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas ${emergency.icon} card-icon"></i>
                            <h3 class="card-title">${emergency.title}</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">${emergency.summary}</p>
                            <h4>Procedimiento:</h4>
                            <ol class="steps-list">
                                ${emergency.steps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                            <div class="notes">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Nota:</strong> ${emergency.notes}
                            </div>
                            ${emergency.visualReferences ? `
                                <div class="visual-reference">
                                    <img src="${emergency.visualReferences[0].url}" alt="${emergency.visualReferences[0].title}">
                                    <div class="caption">${emergency.visualReferences[0].description}</div>
                                </div>
                            ` : ''}
                            <div class="source">
                                <i class="fas fa-book"></i> Fuente: 
                                <a href="${emergency.source.url}" target="_blank">${emergency.source.name}</a>
                                <span class="last-updated">Actualizado: ${formatDate(emergency.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderFarmacologiaContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.medications.map(medication => `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-pills card-icon"></i>
                            <h3 class="card-title">${medication.name}</h3>
                        </div>
                        <div class="card-body">
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-flask"></i>Clase Farmacológica</div>
                                    <div class="info-value">${medication.class}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-list"></i>Indicaciones</div>
                                    <div class="info-value">${medication.indications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-prescription"></i>Dosificación</div>
                                    <div class="info-value">${medication.dosage}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-ban"></i>Contraindicaciones</div>
                                    <div class="info-value">${medication.contraindications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-exclamation-triangle"></i>Efectos Secundarios</div>
                                    <div class="info-value">${medication.sideEffects.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-microscope"></i>Farmacocinética</div>
                                    <div class="info-value">${medication.pharmacokinetics}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-warning"></i>Precauciones</div>
                                    <div class="info-value">${medication.warnings}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-box"></i>Almacenamiento</div>
                                    <div class="info-value">${medication.storage}</div>
                                </div>
                            </div>
                            <div class="image-gallery">
                                ${medication.images.map(img => `
                                    <div class="image-item">
                                        <img src="${img}" alt="${medication.name}">
                                        <div class="caption">${medication.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuentes: 
                                ${medication.sources.map(source => `
                                    <a href="${source.url}" target="_blank">${source.name}</a>
                                `).join(', ')}
                                <span class="last-updated">Actualizado: ${formatDate(medication.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
                
                ${data.interactions ? `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-exchange-alt card-icon"></i>
                            <h3 class="card-title">Interacciones Medicamentosas</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">Interacciones importantes entre medicamentos que requieren atención clínica.</p>
                            ${data.interactions.map(interaction => `
                                <div class="notes" style="border-left-color: ${interaction.severity === 'Severe' ? '#e53e3e' : '#f6ad55'};">
                                    <i class="fas ${interaction.severity === 'Severe' ? 'fa-exclamation-triangle' : 'fa-exclamation-circle'}"></i>
                                    <strong>${interaction.severity}: ${interaction.drugs.join(' + ')}</strong>
                                    <p><strong>Mecanismo:</strong> ${interaction.mechanism}</p>
                                    <p><strong>Recomendación:</strong> ${interaction.recommendation}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function renderProcedimientosContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.procedures.map(procedure => `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas ${procedure.icon} card-icon"></i>
                            <h3 class="card-title">${procedure.title}</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">${procedure.summary}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-box-open"></i>Materiales Necesarios</div>
                                    <div class="info-value">${procedure.materials.join(', ')}</div>
                                </div>
                            </div>
                            <h4>Pasos del Procedimiento:</h4>
                            <ol class="steps-list">
                                ${procedure.steps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                            <div class="notes">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Nota:</strong> ${procedure.notes}
                            </div>
                            ${procedure.visualReferences ? `
                                <div class="visual-reference">
                                    <img src="${procedure.visualReferences[0].url}" alt="${procedure.visualReferences[0].title}">
                                    <div class="caption">${procedure.visualReferences[0].description}</div>
                                </div>
                            ` : ''}
                            <div class="source">
                                <i class="fas fa-book"></i> Fuente: 
                                <a href="${procedure.source.url}" target="_blank">${procedure.source.name}</a>
                                <span class="last-updated">Actualizado: ${formatDate(procedure.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderEnfermedadesContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.diseases.map(disease => `
                    <div class="disease-card">
                        <div class="disease-header">
                            <div class="disease-title">${disease.name}</div>
                            <div class="disease-prevalence">${disease.prevalence}</div>
                        </div>
                        <div class="card-body">
                            <p class="disease-description">${disease.description}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-heartbeat"></i>Síntomas</div>
                                    <div class="info-value">${disease.symptoms.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-diagnoses"></i>Diagnóstico</div>
                                    <div class="info-value">${disease.diagnosis.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-capsules"></i>Tratamiento</div>
                                    <div class="info-value">${disease.treatment.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-exclamation-triangle"></i>Complicaciones</div>
                                    <div class="info-value">${disease.complications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-chart-line"></i>Pronóstico</div>
                                    <div class="info-value">${disease.prognosis}</div>
                                </div>
                            </div>
                            <div class="image-gallery">
                                ${disease.images.map(img => `
                                    <div class="image-item">
                                        <img src="${img}" alt="${disease.name}">
                                        <div class="caption">${disease.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuentes: 
                                ${disease.sources.map(source => `
                                    <a href="${source.url}" target="_blank">${source.name}</a>
                                `).join(', ')}
                                <span class="last-updated">Actualizado: ${formatDate(disease.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderNutricionContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.nutritionGuidelines.map(guideline => `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas ${guideline.icon} card-icon"></i>
                            <h3 class="card-title">${guideline.title}</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">${guideline.summary}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-list"></i>Indicaciones</div>
                                    <div class="info-value">${guideline.indications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-tools"></i>Métodos</div>
                                    <div class="info-value">${guideline.methods.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-exclamation-triangle"></i>Complicaciones</div>
                                    <div class="info-value">${guideline.complications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-heartbeat"></i>Monitoreo</div>
                                    <div class="info-value">${guideline.monitoring.join(', ')}</div>
                                </div>
                            </div>
                            <div class="notes">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Nota:</strong> ${guideline.notes}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuente: 
                                <a href="${guideline.source.url}" target="_blank">${guideline.source.name}</a>
                                <span class="last-updated">Actualizado: ${formatDate(guideline.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderInfeccionesContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.procedures.map(procedure => `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas ${procedure.icon} card-icon"></i>
                            <h3 class="card-title">${procedure.title}</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">${procedure.summary}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-box-open"></i>Materiales Necesarios</div>
                                    <div class="info-value">${procedure.materials.join(', ')}</div>
                                </div>
                            </div>
                            <h4>Pasos del Procedimiento:</h4>
                            <ol class="steps-list">
                                ${procedure.steps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                            <div class="notes">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Nota:</strong> ${procedure.notes}
                            </div>
                            ${procedure.visualReferences ? `
                                <div class="visual-reference">
                                    <img src="${procedure.visualReferences[0].url}" alt="${procedure.visualReferences[0].title}">
                                    <div class="caption">${procedure.visualReferences[0].description}</div>
                                </div>
                            ` : ''}
                            <div class="source">
                                <i class="fas fa-book"></i> Fuente: 
                                <a href="${procedure.source.url}" target="_blank">${procedure.source.name}</a>
                                <span class="last-updated">Actualizado: ${formatDate(procedure.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
                
                ${data.procedures.some(p => p.types) ? `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-door-closed card-icon"></i>
                            <h3 class="card-title">Aislamientos Hospitalarios</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">Medidas para prevenir la transmisión de agentes infecciosos.</p>
                            ${data.procedures.find(p => p.types)?.types.map(type => `
                                <div class="notes" style="border-left-color: ${type.name.includes('aire') ? '#e53e3e' : type.name.includes('gotas') ? '#f6ad55' : '#667eea'};">
                                    <i class="fas ${type.name.includes('aire') ? 'fa-wind' : type.name.includes('gotas') ? 'fa-water' : 'fa-handshake'}"></i>
                                    <strong>${type.name}</strong>
                                    <p><strong>Indicaciones:</strong> ${type.indications}</p>
                                    <p><strong>Medidas:</strong> ${type.measures.join(', ')}</p>
                                </div>
                            `).join('')}
                            <div class="source">
                                <i class="fas fa-book"></i> Fuente: 
                                <a href="${data.procedures.find(p => p.types)?.source.url}" target="_blank">${data.procedures.find(p => p.types)?.source.name}</a>
                                <span class="last-updated">Actualizado: ${formatDate(data.procedures.find(p => p.types)?.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function renderMovilizacionContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.procedures.map(procedure => `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas ${procedure.icon} card-icon"></i>
                            <h3 class="card-title">${procedure.title}</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">${procedure.summary}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-box-open"></i>Materiales Necesarios</div>
                                    <div class="info-value">${procedure.materials.join(', ')}</div>
                                </div>
                            </div>
                            <h4>Pasos del Procedimiento:</h4>
                            <ol class="steps-list">
                                ${procedure.steps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                            <div class="notes">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Nota:</strong> ${procedure.notes}
                            </div>
                            ${procedure.visualReferences ? `
                                <div class="visual-reference">
                                    <img src="${procedure.visualReferences[0].url}" alt="${procedure.visualReferences[0].title}">
                                    <div class="caption">${procedure.visualReferences[0].description}</div>
                                </div>
                            ` : ''}
                            <div class="source">
                                <i class="fas fa-book"></i> Fuente: 
                                <a href="${procedure.source.url}" target="_blank">${procedure.source.name}</a>
                                <span class="last-updated">Actualizado: ${formatDate(procedure.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderRcpContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.procedures.map(procedure => `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas ${procedure.icon} card-icon"></i>
                            <h3 class="card-title">${procedure.title}</h3>
                        </div>
                        <div class="card-body">
                            <p class="card-content">${procedure.summary}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-box-open"></i>Materiales Necesarios</div>
                                    <div class="info-value">${procedure.materials.join(', ')}</div>
                                </div>
                            </div>
                            <h4>Pasos del Procedimiento:</h4>
                            <ol class="steps-list">
                                ${procedure.steps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                            <div class="notes">
                                <i class="fas fa-lightbulb"></i>
                                <strong>Nota:</strong> ${procedure.notes}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuente: 
                                <a href="${procedure.source.url}" target="_blank">${procedure.source.name}</a>
                                <span class="last-updated">Actualizado: ${formatDate(procedure.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        function renderRecursosContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                <div class="resources-grid">
                    ${data.resources.map(resource => `
                        <div class="resource-card">
                            <div class="resource-title">
                                <i class="fas ${resource.icon}"></i>
                                ${resource.title}
                            </div>
                            <div class="resource-category">${resource.category}</div>
                            <p class="resource-description">${resource.description}</p>
                            <a href="${resource.url}" target="_blank" class="resource-link">Ir al recurso</a>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderSimuladorContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                <div class="vitals-grid">
                    ${data.vitals.map(vital => `
                        <div class="vital-card">
                            <div class="vital-label">${vital.label}</div>
                            <div class="vital-value" id="vital-${vital.id}">${vital.value}</div>
                            <div class="vital-unit">${vital.unit}</div>
                            <div class="normal-range">Rango normal: ${vital.normalRange[0]}-${vital.normalRange[1]} ${vital.unit}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="controls">
                    <h3>Escenarios Clínicos:</h3>
                    ${data.scenarios.map(scenario => `
                        <button class="control-btn" onclick="applyScenario('${scenario.id}')">${scenario.name}</button>
                    `).join('')}
                    <button class="control-btn" onclick="resetVitals()">Valores Normales</button>
                </div>
            `;
        }

        function renderEvaluacionContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                <div class="quiz-container">
                    <h3>Selecciona un tema para evaluar:</h3>
                    <div class="controls">
                        <button class="control-btn" onclick="startQuiz('curaciones')">Curaciones</button>
                        <button class="control-btn" onclick="startQuiz('cardiologia')">Cardiología</button>
                    </div>
                </div>
                <div id="quizDisplay"></div>
            `;
        }

        function renderReumatologiaContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.diseases.map(disease => `
                    <div class="disease-card">
                        <div class="disease-header">
                            <div class="disease-title">${disease.name}</div>
                            <div class="disease-prevalence">${disease.prevalence}</div>
                        </div>
                        <div class="card-body">
                            <p class="disease-description">${disease.description}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-heartbeat"></i>Síntomas</div>
                                    <div class="info-value">${disease.symptoms.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-diagnoses"></i>Diagnóstico</div>
                                    <div class="info-value">${disease.diagnosis.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-capsules"></i>Tratamiento</div>
                                    <div class="info-value">${disease.treatment.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-exclamation-triangle"></i>Complicaciones</div>
                                    <div class="info-value">${disease.complications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-chart-line"></i>Pronóstico</div>
                                    <div class="info-value">${disease.prognosis}</div>
                                </div>
                            </div>
                            <div class="image-gallery">
                                ${disease.images.map(img => `
                                    <div class="image-item">
                                        <img src="${img}" alt="${disease.name}">
                                        <div class="caption">${disease.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuentes: 
                                ${disease.sources.map(source => `
                                    <a href="${source.url}" target="_blank">${source.name}</a>
                                `).join(', ')}
                                <span class="last-updated">Actualizado: ${formatDate(disease.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
                
                ${data.resources ? `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-book-medical card-icon"></i>
                            <h3 class="card-title">Recursos Recomendados</h3>
                        </div>
                        <div class="card-body">
                            <div class="resources-grid">
                                ${data.resources.map(resource => `
                                    <div class="resource-card">
                                        <div class="resource-title">
                                            <i class="fas ${resource.icon}"></i>
                                            ${resource.title}
                                        </div>
                                        <p class="resource-description">${resource.description}</p>
                                        <a href="${resource.url}" target="_blank" class="resource-link">Ir al recurso</a>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function renderGastroenterologiaContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.diseases.map(disease => `
                    <div class="disease-card">
                        <div class="disease-header">
                            <div class="disease-title">${disease.name}</div>
                            <div class="disease-prevalence">${disease.prevalence}</div>
                        </div>
                        <div class="card-body">
                            <p class="disease-description">${disease.description}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-heartbeat"></i>Síntomas</div>
                                    <div class="info-value">${disease.symptoms.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-diagnoses"></i>Diagnóstico</div>
                                    <div class="info-value">${disease.diagnosis.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-capsules"></i>Tratamiento</div>
                                    <div class="info-value">${disease.treatment.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-exclamation-triangle"></i>Complicaciones</div>
                                    <div class="info-value">${disease.complications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-chart-line"></i>Pronóstico</div>
                                    <div class="info-value">${disease.prognosis}</div>
                                </div>
                            </div>
                            <div class="image-gallery">
                                ${disease.images.map(img => `
                                    <div class="image-item">
                                        <img src="${img}" alt="${disease.name}">
                                        <div class="caption">${disease.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuentes: 
                                ${disease.sources.map(source => `
                                    <a href="${source.url}" target="_blank">${source.name}</a>
                                `).join(', ')}
                                <span class="last-updated">Actualizado: ${formatDate(disease.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
                
                ${data.resources ? `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-book-medical card-icon"></i>
                            <h3 class="card-title">Recursos Recomendados</h3>
                        </div>
                        <div class="card-body">
                            <div class="resources-grid">
                                ${data.resources.map(resource => `
                                    <div class="resource-card">
                                        <div class="resource-title">
                                            <i class="fas ${resource.icon}"></i>
                                            ${resource.title}
                                        </div>
                                        <p class="resource-description">${resource.description}</p>
                                        <a href="${resource.url}" target="_blank" class="resource-link">Ir al recurso</a>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function renderNefrologiaContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.diseases.map(disease => `
                    <div class="disease-card">
                        <div class="disease-header">
                            <div class="disease-title">${disease.name}</div>
                            <div class="disease-prevalence">${disease.prevalence}</div>
                        </div>
                        <div class="card-body">
                            <p class="disease-description">${disease.description}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-heartbeat"></i>Síntomas</div>
                                    <div class="info-value">${disease.symptoms.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-diagnoses"></i>Diagnóstico</div>
                                    <div class="info-value">${disease.diagnosis.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-capsules"></i>Tratamiento</div>
                                    <div class="info-value">${disease.treatment.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-exclamation-triangle"></i>Complicaciones</div>
                                    <div class="info-value">${disease.complications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-chart-line"></i>Pronóstico</div>
                                    <div class="info-value">${disease.prognosis}</div>
                                </div>
                            </div>
                            <div class="image-gallery">
                                ${disease.images.map(img => `
                                    <div class="image-item">
                                        <img src="${img}" alt="${disease.name}">
                                        <div class="caption">${disease.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuentes: 
                                ${disease.sources.map(source => `
                                    <a href="${source.url}" target="_blank">${source.name}</a>
                                `).join(', ')}
                                <span class="last-updated">Actualizado: ${formatDate(disease.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
                
                ${data.resources ? `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-book-medical card-icon"></i>
                            <h3 class="card-title">Recursos Recomendados</h3>
                        </div>
                        <div class="card-body">
                            <div class="resources-grid">
                                ${data.resources.map(resource => `
                                    <div class="resource-card">
                                        <div class="resource-title">
                                            <i class="fas ${resource.icon}"></i>
                                            ${resource.title}
                                        </div>
                                        <p class="resource-description">${resource.description}</p>
                                        <a href="${resource.url}" target="_blank" class="resource-link">Ir al recurso</a>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function renderEndocrinologiaContent(data) {
            return `
                <div class="page-header">
                    <h1 class="page-title"><i class="fas ${data.icon}"></i>${data.title}</h1>
                    <p class="page-description">${data.description}</p>
                </div>
                ${data.diseases.map(disease => `
                    <div class="disease-card">
                        <div class="disease-header">
                            <div class="disease-title">${disease.name}</div>
                            <div class="disease-prevalence">${disease.prevalence}</div>
                        </div>
                        <div class="card-body">
                            <p class="disease-description">${disease.description}</p>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-heartbeat"></i>Síntomas</div>
                                    <div class="info-value">${disease.symptoms.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-diagnoses"></i>Diagnóstico</div>
                                    <div class="info-value">${disease.diagnosis.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-capsules"></i>Tratamiento</div>
                                    <div class="info-value">${disease.treatment.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-exclamation-triangle"></i>Complicaciones</div>
                                    <div class="info-value">${disease.complications.join(', ')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label"><i class="fas fa-chart-line"></i>Pronóstico</div>
                                    <div class="info-value">${disease.prognosis}</div>
                                </div>
                            </div>
                            <div class="image-gallery">
                                ${disease.images.map(img => `
                                    <div class="image-item">
                                        <img src="${img}" alt="${disease.name}">
                                        <div class="caption">${disease.name}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="source">
                                <i class="fas fa-book"></i> Fuentes: 
                                ${disease.sources.map(source => `
                                    <a href="${source.url}" target="_blank">${source.name}</a>
                                `).join(', ')}
                                <span class="last-updated">Actualizado: ${formatDate(disease.lastUpdated)}</span>
                            </div>
                        </div>
                    </div>
                `).join('')}
                
                ${data.resources ? `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-book-medical card-icon"></i>
                            <h3 class="card-title">Recursos Recomendados</h3>
                        </div>
                        <div class="card-body">
                            <div class="resources-grid">
                                ${data.resources.map(resource => `
                                    <div class="resource-card">
                                        <div class="resource-title">
                                            <i class="fas ${resource.icon}"></i>
                                            ${resource.title}
                                        </div>
                                        <p class="resource-description">${resource.description}</p>
                                        <a href="${resource.url}" target="_blank" class="resource-link">Ir al recurso</a>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                ` : ''}
            `;
        }

        function renderContent(category) {
            const mainContent = document.getElementById('mainContent');
            let content = '';
            
            switch (category) {
                case 'emergencias':
                    content = renderEmergenciasContent(medicalData.emergencias);
                    break;
                case 'farmacologia':
                    content = renderFarmacologiaContent(medicalData.farmacologia);
                    break;
                case 'procedimientos':
                    content = renderProcedimientosContent(medicalData.procedimientos);
                    break;
                case 'enfermedades':
                    content = renderEnfermedadesContent(medicalData.enfermedades);
                    break;
                case 'nutricion':
                    content = renderNutricionContent(medicalData.nutricion);
                    break;
                case 'infecciones':
                    content = renderInfeccionesContent(medicalData.infecciones);
                    break;
                case 'movilizacion':
                    content = renderMovilizacionContent(medicalData.movilizacion);
                    break;
                case 'rcp':
                    content = renderRcpContent(medicalData.rcp);
                    break;
                case 'recursos':
                    content = renderRecursosContent(medicalData.recursos);
                    break;
                case 'simulador':
                    content = renderSimuladorContent(medicalData.simulador);
                    break;
                case 'evaluacion':
                    content = renderEvaluacionContent(medicalData.evaluacion);
                    break;
                case 'reumatologia':
                    content = renderReumatologiaContent(medicalData.reumatologia);
                    break;
                case 'gastroenterologia':
                    content = renderGastroenterologiaContent(medicalData.gastroenterologia);
                    break;
                case 'nefrologia':
                    content = renderNefrologiaContent(medicalData.nefrologia);
                    break;
                case 'endocrinologia':
                    content = renderEndocrinologiaContent(medicalData.endocrinologia);
                    break;
                default:
                    content = '<p>Contenido no disponible</p>';
            }
            
            mainContent.innerHTML = content;
            
            // Si es el simulador, inicializar los valores
            if (category === 'simulador') {
                initializeVitals();
            }
        }

        // Funciones de búsqueda
        function handleSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            if (searchTerm.length < 2) return;
            
            // Buscar en todos los datos
            const results = [];
            
            // Buscar en emergencias
            medicalData.emergencias.emergencies.forEach(emergency => {
                if (emergency.title.toLowerCase().includes(searchTerm) || 
                    emergency.summary.toLowerCase().includes(searchTerm)) {
                    results.push({
                        type: 'Emergencia',
                        title: emergency.title,
                        content: emergency.summary,
                        category: 'emergencias',
                        id: emergency.id
                    });
                }
            });
            
            // Buscar en farmacología
            medicalData.farmacologia.medications.forEach(medication => {
                if (medication.name.toLowerCase().includes(searchTerm) || 
                    medication.class.toLowerCase().includes(searchTerm)) {
                    results.push({
                        type: 'Medicamento',
                        title: medication.name,
                        content: medication.class,
                        category: 'farmacologia',
                        id: medication.id
                    });
                }
            });
            
            // Buscar en procedimientos
            medicalData.procedimientos.procedures.forEach(procedure => {
                if (procedure.title.toLowerCase().includes(searchTerm) || 
                    procedure.summary.toLowerCase().includes(searchTerm)) {
                    results.push({
                        type: 'Procedimiento',
                        title: procedure.title,
                        content: procedure.summary,
                        category: 'procedimientos',
                        id: procedure.id
                    });
                }
            });
            
            // Buscar en enfermedades
            medicalData.enfermedades.diseases.forEach(disease => {
                if (disease.name.toLowerCase().includes(searchTerm) || 
                    disease.description.toLowerCase().includes(searchTerm)) {
                    results.push({
                        type: 'Enfermedad',
                        title: disease.name,
                        content: disease.description.substring(0, 100) + '...',
                        category: 'enfermedades',
                        id: disease.id
                    });
                }
            });
            
            // Buscar en reumatología
            if (medicalData.reumatologia?.diseases) {
                medicalData.reumatologia.diseases.forEach(disease => {
                    if (disease.name.toLowerCase().includes(searchTerm) || 
                        disease.description.toLowerCase().includes(searchTerm)) {
                        results.push({
                            type: 'Enfermedad Reumática',
                            title: disease.name,
                            content: disease.description.substring(0, 100) + '...',
                            category: 'reumatologia',
                            id: disease.id
                        });
                    }
                });
            }
            
            // Buscar en gastroenterología
            if (medicalData.gastroenterologia?.diseases) {
                medicalData.gastroenterologia.diseases.forEach(disease => {
                    if (disease.name.toLowerCase().includes(searchTerm) || 
                        disease.description.toLowerCase().includes(searchTerm)) {
                        results.push({
                            type: 'Enfermedad Gastrointestinal',
                            title: disease.name,
                            content: disease.description.substring(0, 100) + '...',
                            category: 'gastroenterologia',
                            id: disease.id
                        });
                    }
                });
            }
            
            // Buscar en nefrología
            if (medicalData.nefrologia?.diseases) {
                medicalData.nefrologia.diseases.forEach(disease => {
                    if (disease.name.toLowerCase().includes(searchTerm) || 
                        disease.description.toLowerCase().includes(searchTerm)) {
                        results.push({
                            type: 'Enfermedad Renal',
                            title: disease.name,
                            content: disease.description.substring(0, 100) + '...',
                            category: 'nefrologia',
                            id: disease.id
                        });
                    }
                });
            }
            
            // Buscar en endocrinología
            if (medicalData.endocrinologia?.diseases) {
                medicalData.endocrinologia.diseases.forEach(disease => {
                    if (disease.name.toLowerCase().includes(searchTerm) || 
                        disease.description.toLowerCase().includes(searchTerm)) {
                        results.push({
                            type: 'Enfermedad Endocrina',
                            title: disease.name,
                            content: disease.description.substring(0, 100) + '...',
                            category: 'endocrinologia',
                            id: disease.id
                        });
                    }
                });
            }
            
            // Mostrar resultados
            if (results.length > 0) {
                let resultsHtml = '<div class="page-header"><h1 class="page-title">Resultados de búsqueda</h1></div>';
                resultsHtml += '<div class="card"><div class="card-body">';
                resultsHtml += `<p>Mostrando ${results.length} resultados para "${searchTerm}":</p>`;
                resultsHtml += '<ul class="steps-list">';
                results.forEach(result => {
                    resultsHtml += `<li><strong>${result.type}:</strong> <a href="#" onclick="navigateTo('${result.category}', '${result.id}'); return false;">${result.title}</a> - ${result.content}</li>`;
                });
                resultsHtml += '</ul></div></div>';
                
                document.getElementById('mainContent').innerHTML = resultsHtml;
            } else {
                document.getElementById('mainContent').innerHTML = `
                    <div class="page-header">
                        <h1 class="page-title">Resultados de búsqueda</h1>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <p>No se encontraron resultados para "${searchTerm}".</p>
                            <p>Intenta con otro término de búsqueda o explora las categorías del menú.</p>
                        </div>
                    </div>
                `;
            }
        }

        function navigateTo(category, id) {
            activateCategory(category);
            
            // Desplazar a la sección específica después de un breve retraso
            setTimeout(() => {
                const element = document.getElementById(id);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                }
            }, 300);
        }

        // Funciones de simulador
        function initializeVitals() {
            medicalData.simulador.vitals.forEach(vital => {
                document.getElementById(`vital-${vital.id}`).textContent = vital.value;
            });
        }

        function applyScenario(scenarioId) {
            const scenario = medicalData.simulador.scenarios.find(s => s.id === scenarioId);
            if (!scenario) return;
            
            medicalData.simulador.vitals.forEach(vital => {
                const newValue = scenario.changes[vital.id]?.value || vital.value;
                const element = document.getElementById(`vital-${vital.id}`);
                element.textContent = newValue;
                
                if (scenario.changes[vital.id]?.color) {
                    element.style.color = scenario.changes[vital.id].color;
                } else {
                    element.style.color = 'inherit';
                }
            });
            
            showNotification(`Escenario aplicado: ${scenario.name}`);
        }

        function resetVitals() {
            medicalData.simulador.vitals.forEach(vital => {
                const element = document.getElementById(`vital-${vital.id}`);
                element.textContent = vital.value;
                element.style.color = 'inherit';
            });
            
            showNotification('Valores restablecidos a normales');
        }

        // Funciones de evaluación
        function startQuiz(topic) {
            currentQuiz = topic;
            currentQuizIndex = 0;
            showQuizQuestion();
        }

        function showQuizQuestion() {
            const quizDisplay = document.getElementById('quizDisplay');
            const questions = medicalData.evaluacion.quizzes[currentQuiz];
            const question = questions[currentQuizIndex];
            
            let optionsHtml = '';
            question.options.forEach((option, index) => {
                optionsHtml += `<li class="quiz-option" onclick="selectOption(this, ${index})">${option}</li>`;
            });
            
            quizDisplay.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-question-circle card-icon"></i>
                        <h3 class="card-title">Pregunta ${currentQuizIndex + 1} de ${questions.length}</h3>
                    </div>
                    <div class="card-body">
                        <div class="quiz-question">${question.question}</div>
                        <ul class="quiz-options">
                            ${optionsHtml}
                        </ul>
                        <div id="quizFeedback"></div>
                        <div class="action-buttons">
                            <button class="btn btn-secondary" onclick="prevQuestion()" ${currentQuizIndex === 0 ? 'disabled' : ''}>Anterior</button>
                            <button class="btn btn-primary" onclick="nextQuestion()">Siguiente</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function selectOption(element, index) {
            // Remover selección anterior
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // Añadir selección actual
            element.classList.add('selected');
            
            // Mostrar feedback
            const questions = medicalData.evaluacion.quizzes[currentQuiz];
            const question = questions[currentQuizIndex];
            const feedback = document.getElementById('quizFeedback');
            
            if (index === question.correct) {
                feedback.innerHTML = '<div class="quiz-feedback correct"><i class="fas fa-check"></i> ¡Correcto!</div>';
            } else {
                feedback.innerHTML = `<div class="quiz-feedback incorrect"><i class="fas fa-times"></i> Incorrecto. La respuesta correcta es: ${question.options[question.correct]}</div>`;
            }
        }

        function nextQuestion() {
            const questions = medicalData.evaluacion.quizzes[currentQuiz];
            if (currentQuizIndex < questions.length - 1) {
                currentQuizIndex++;
                showQuizQuestion();
            } else {
                // Finalizar quiz
                const quizDisplay = document.getElementById('quizDisplay');
                const score = Math.round(((currentQuizIndex + 1) / questions.length) * 100);
                medicalData.evaluacion.progress.scores[currentQuiz] = score;
                medicalData.evaluacion.progress.completedQuizzes.push({
                    quiz: currentQuiz,
                    score: score,
                    date: new Date().toISOString()
                });
                
                quizDisplay.innerHTML = `
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-clipboard-check card-icon"></i>
                            <h3 class="card-title">Quiz Completado</h3>
                        </div>
                        <div class="card-body">
                            <p>Tu puntaje: ${score}%</p>
                            <div class="action-buttons">
                                <button class="btn btn-secondary" onclick="startQuiz('${currentQuiz}')">Repetir Quiz</button>
                                <button class="btn btn-primary" onclick="renderEvaluacionContent(medicalData.evaluacion)">Menú Principal</button>
                            </div>
                        </div>
                    </div>
                `;
                
                saveToLocalStorage();
            }
        }

        function prevQuestion() {
            if (currentQuizIndex > 0) {
                currentQuizIndex--;
                showQuizQuestion();
            }
        }

        // Funciones de navegación
        function activateCategory(category) {
            // Actualizar UI
            const categoryButtons = document.querySelectorAll('.cat-btn');
            categoryButtons.forEach(button => {
                if (button.getAttribute('data-cat') === category) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
            
            // Actualizar estado
            currentCategory = category;
            
            // Renderizar contenido
            renderContent(category);
            
            // Guardar estado
            saveToLocalStorage();
        }

        // Inicialización
        function initApp() {
            // Cargar datos desde localStorage
            loadFromLocalStorage();
            
            // Renderizar contenido inicial
            renderContent(currentCategory);
            
            // Configurar eventos
            const categoryButtons = document.querySelectorAll('.cat-btn');
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-cat');
                    activateCategory(category);
                });
            });
            
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(handleSearch, 300);
            });
            
            // Guardar datos iniciales si no existen
            if (!localStorage.getItem('medicalAppData')) {
                saveToLocalStorage();
            }
        }

        // Exponer funciones al objeto global para que puedan ser llamadas desde el HTML
        window.applyScenario = applyScenario;
        window.resetVitals = resetVitals;
        window.startQuiz = startQuiz;
        window.nextQuestion = nextQuestion;
        window.prevQuestion = prevQuestion;
        window.selectOption = selectOption;
        window.navigateTo = navigateTo;

        // Iniciar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
    
    <!-- Font Awesome para íconos -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>
```
